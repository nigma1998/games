(self.webpackChunkvk=self.webpackChunkvk||[]).push([[82051],{756658:(_,e,o)=>{"use strict";function i(){return{icon:'<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M12 3.9c-1.06 0-2.07.2-3 .57a.9.9 0 1 1-.66-1.67A9.88 9.88 0 0 1 12 2.1a9.9 9.9 0 0 1 9.9 9.9 9.88 9.88 0 0 1-.7 3.66.9.9 0 0 1-1.67-.66A8.1 8.1 0 0 0 12 3.9z"/><path d="M11.13 7a.9.9 0 0 1 .9-.9 5.9 5.9 0 0 1 5.87 5.85.9.9 0 1 1-1.8.02 4.1 4.1 0 0 0-4.07-4.07.9.9 0 0 1-.9-.9zM5 19a9.87 9.87 0 0 0 7 2.9c2.41 0 4.62-.86 6.33-2.3l1.13 1.14a.9.9 0 1 0 1.28-1.28L4.54 3.26a.9.9 0 1 0-1.28 1.28L4.4 5.66A9.86 9.86 0 0 0 2.1 12 9.87 9.87 0 0 0 5 19zm-1.1-7a8.08 8.08 0 0 0 8.1 8.1c1.91 0 3.67-.66 5.06-1.77l-1.57-1.57A5.88 5.88 0 0 1 12 17.9a5.88 5.88 0 0 1-4.17-1.73A5.88 5.88 0 0 1 6.1 12a5.88 5.88 0 0 1 1.14-3.49L5.67 6.94A8.06 8.06 0 0 0 3.9 12zm4 0a4.1 4.1 0 0 0 1.2 2.9 4.08 4.08 0 0 0 2.9 1.2 4.07 4.07 0 0 0 2.2-.64l-1.65-1.64c-.66.2-1.4.01-1.9-.48s-.67-1.23-.47-1.89L8.54 9.81A4.08 4.08 0 0 0 7.9 12z"/></g></svg>',name:"live_disable_outline_24"}}o.d(e,{getIcon24LiveDisableOutline:()=>i})},999187:(_,e,o)=>{"use strict";function i(){return{icon:'<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M5 5a9.87 9.87 0 0 1 7-2.9A9.87 9.87 0 0 1 19 5a9.87 9.87 0 0 1 2.9 7 9.87 9.87 0 0 1-2.9 7 9.87 9.87 0 0 1-7 2.9A9.87 9.87 0 0 1 5 19a9.87 9.87 0 0 1-2.9-7A9.87 9.87 0 0 1 5 5zm7-1.1A8.08 8.08 0 0 0 3.9 12a8.08 8.08 0 0 0 8.1 8.1 8.08 8.08 0 0 0 8.1-8.1A8.08 8.08 0 0 0 12 3.9z"/><path d="M7.83 7.83A5.88 5.88 0 0 1 17.9 12a5.88 5.88 0 0 1-10.07 4.17 5.88 5.88 0 0 1 0-8.34zM12 7.9A4.1 4.1 0 0 0 7.9 12a4.1 4.1 0 0 0 4.1 4.1 4.1 4.1 0 0 0 2.9-1.2 4.1 4.1 0 0 0 0-5.8A4.08 4.08 0 0 0 12 7.9z"/><path d="M13.34 10.66a1.9 1.9 0 0 0-2.68 0 1.9 1.9 0 0 0 0 2.68 1.9 1.9 0 0 0 2.68 0 1.9 1.9 0 0 0 0-2.68z"/></g></svg>',name:"live_outline_24"}}o.d(e,{getIcon24LiveOutline:()=>i})},323835:(_,e,o)=>{"use strict";function i(){return{icon:'<svg height="24" viewBox="0 0 24 24" width="24" xmlns="http://www.w3.org/2000/svg"><g fill="none" fill-rule="evenodd"><path d="M0 0h24v24H0z"/><path d="M12 2.1c.68 0 1.33.1 1.95.27a.9.9 0 0 1-.5 1.73A5.1 5.1 0 0 0 12 3.9c-2.9 0-5 2.31-5.1 5.5v1.83c0 .8-.34 1.38-1.06 2.15l-.72.75c-.54.57-.72.88-.72 1.2 0 .19.01.29.06.38.1.2.38.37 1.1.39h12.7c.82 0 1.16-.17 1.28-.4.04-.1.06-.2.06-.37 0-.32-.18-.63-.72-1.2l-.55-.57-.26-.27a6.8 6.8 0 0 1-.22-.25.9.9 0 1 1 1.4-1.15c.07.1.15.19.26.3l.38.4c1.08 1.09 1.51 1.72 1.51 2.74 0 .44-.05.79-.27 1.2-.43.83-1.3 1.31-2.62 1.36l-.25.01h-1.88v.03c-.63 2.38-2.14 3.67-4.38 3.67-2.24 0-3.75-1.3-4.37-3.67v-.03h-1.9c-1.48 0-2.46-.5-2.9-1.41-.19-.4-.23-.72-.23-1.16 0-.96.38-1.57 1.31-2.55l.47-.47.24-.26c.31-.35.45-.58.48-.76V9.63C5.1 5.38 7.99 2.1 12 2.1zm2.5 15.8h-5c.45 1.32 1.24 1.9 2.5 1.9s2.05-.58 2.5-1.9zm4.96-13.64a.9.9 0 1 1 1.28 1.28l-4.2 4.2a.9.9 0 0 1-1.28 0l-2-2a.9.9 0 1 1 1.28-1.28l1.36 1.37z" fill="currentColor" fill-rule="nonzero"/></g></svg>',name:"notification_check_outline_24"}}o.d(e,{getIcon24NotificationCheckOutline:()=>i})},789136:(_,e,o)=>{"use strict";function i(){return{icon:'<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.1c4.02 0 6.9 3.28 6.9 7.53v1.6c0 .23.2.53.72 1.08l.27.27c1.08 1.1 1.51 1.73 1.51 2.75 0 .44-.05.79-.27 1.2-.45.88-1.42 1.37-2.87 1.37h-1.9c-.64 2.33-2.14 3.6-4.36 3.6-2.25 0-3.75-1.3-4.37-3.67l.02.07H5.74c-1.5 0-2.47-.5-2.9-1.41-.2-.4-.24-.72-.24-1.16 0-1.02.43-1.65 1.51-2.75l.27-.27c.53-.55.72-.85.72-1.08v-1.6C5.1 5.38 7.99 2.1 12 2.1zm2.47 15.8H9.53c.46 1.25 1.25 1.8 2.47 1.8s2.01-.55 2.47-1.8zM12 3.9c-2.96 0-5.1 2.43-5.1 5.73v1.6c0 .85-.39 1.46-1.23 2.33l-.28.29c-.75.75-.99 1.11-.99 1.48 0 .19.01.29.06.38.1.22.43.39 1.28.39h12.52c.82 0 1.16-.17 1.28-.4.05-.1.06-.2.06-.37 0-.37-.24-.73-.99-1.48l-.28-.29c-.84-.87-1.23-1.48-1.23-2.33v-1.6c0-3.3-2.13-5.73-5.1-5.73z" fill="currentColor"/></svg>',name:"notification_outline_24"}}o.d(e,{getIcon24NotificationOutline:()=>i})},616488:(_,e,o)=>{"use strict";function i(){return{icon:'<svg fill="none" height="24" width="24" xmlns="http://www.w3.org/2000/svg"><path d="M12 2.1c4.17 0 6.9 3.45 6.9 7.53v1.6c0 .25.15.54.58 1 .47.49 1.01.93 1.4 1.5.32.48.53 1.04.52 1.7a.9.9 0 1 1-1.8-.05c.02-.81-.93-1.4-1.43-1.92-.47-.5-1.07-1.23-1.07-2.23v-1.6c0-3.31-2.13-5.73-5.1-5.73-1 0-1.88.27-2.62.73a.9.9 0 1 1-.96-1.52A6.67 6.67 0 0 1 12 2.1zm4.35 15.8c-.63 2.33-2.13 3.6-4.35 3.6s-3.72-1.27-4.35-3.6H5.74c-1.5 0-2.47-.5-2.9-1.41-.2-.4-.24-.72-.24-1.16 0-1.3.94-2.16 1.78-3.02.53-.55.72-.85.72-1.08 0-1.5-.04-2.97.46-4.4l-2.3-2.3a.9.9 0 1 1 1.28-1.27l16.2 16.2a.9.9 0 1 1-1.28 1.28l-2.83-2.84zm-6.82 0h4.94c-.46 1.25-1.25 1.8-2.47 1.8s-2.01-.55-2.47-1.8zM6.9 11.23c0-.97-.06-1.97.12-2.93l7.8 7.8H5.75c-.85 0-1.18-.17-1.28-.39-.34-.7.52-1.44.93-1.86.72-.73 1.51-1.52 1.51-2.62z" clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"/></svg>',name:"notification_slash_outline_24"}}o.d(e,{getIcon24NotificationSlashOutline:()=>i})},786665:(__unused_webpack___webpack_module__,__webpack_exports__,__webpack_require__)=>{"use strict";__webpack_require__.d(__webpack_exports__,{default:()=>__WEBPACK_DEFAULT_EXPORT__});var core_js_modules_es6_array_from__WEBPACK_IMPORTED_MODULE_0__=__webpack_require__(530522),core_js_modules_es6_regexp_to_string__WEBPACK_IMPORTED_MODULE_1__=__webpack_require__(66108),core_js_modules_es6_object_to_string__WEBPACK_IMPORTED_MODULE_2__=__webpack_require__(296253),core_js_modules_web_dom_iterable__WEBPACK_IMPORTED_MODULE_3__=__webpack_require__(991181),core_js_modules_es7_symbol_async_iterator__WEBPACK_IMPORTED_MODULE_4__=__webpack_require__(579665),core_js_modules_es6_symbol__WEBPACK_IMPORTED_MODULE_5__=__webpack_require__(95767),core_js_modules_es6_object_assign__WEBPACK_IMPORTED_MODULE_6__=__webpack_require__(175115),core_js_modules_es6_regexp_split__WEBPACK_IMPORTED_MODULE_7__=__webpack_require__(751876),core_js_modules_es6_regexp_match__WEBPACK_IMPORTED_MODULE_8__=__webpack_require__(21466),core_js_modules_es6_regexp_replace__WEBPACK_IMPORTED_MODULE_9__=__webpack_require__(59357),_lib_dom__WEBPACK_IMPORTED_MODULE_10__=__webpack_require__(315544),_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_11__=__webpack_require__(45634),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__=__webpack_require__(726271),_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__=__webpack_require__(49535),_shared_lib_common__WEBPACK_IMPORTED_MODULE_14__=__webpack_require__(40906),_web_lib_feature_boxes__WEBPACK_IMPORTED_MODULE_15__=__webpack_require__(635093),_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_16__=__webpack_require__(486125),_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__=__webpack_require__(695724),_shared_lib_convert__WEBPACK_IMPORTED_MODULE_18__=__webpack_require__(668040),_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__=__webpack_require__(850167),_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_20__=__webpack_require__(376852),_lib_message_box__WEBPACK_IMPORTED_MODULE_21__=__webpack_require__(654612),_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__=__webpack_require__(386409),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__=__webpack_require__(26330),_lib_debug_tools__WEBPACK_IMPORTED_MODULE_24__=__webpack_require__(787481),_lib_stats__WEBPACK_IMPORTED_MODULE_25__=__webpack_require__(460615),_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_40__=__webpack_require__(609720),_lib_scroll__WEBPACK_IMPORTED_MODULE_26__=__webpack_require__(803834),_lib_video__WEBPACK_IMPORTED_MODULE_27__=__webpack_require__(325489),_lib_fx__WEBPACK_IMPORTED_MODULE_28__=__webpack_require__(635676),_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__=__webpack_require__(786067),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_30__=__webpack_require__(962857),_icons_desktop_getIcon24NotificationSlashOutline__WEBPACK_IMPORTED_MODULE_37__=__webpack_require__(616488),_icons_desktop_getIcon24NotificationOutline__WEBPACK_IMPORTED_MODULE_35__=__webpack_require__(789136),_icons_desktop_getIcon24LiveOutline__WEBPACK_IMPORTED_MODULE_38__=__webpack_require__(999187),_icons_desktop_getIcon24LiveDisableOutline__WEBPACK_IMPORTED_MODULE_39__=__webpack_require__(756658),_icons_desktop_getIcon24NotificationCheckOutline__WEBPACK_IMPORTED_MODULE_36__=__webpack_require__(323835),_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__=__webpack_require__(364702),_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_32__=__webpack_require__(171516),_web_page_page_utils__WEBPACK_IMPORTED_MODULE_33__=__webpack_require__(870900),_web_photos_photo_restriction_blur_global_state__WEBPACK_IMPORTED_MODULE_34__=__webpack_require__(187595);function _slicedToArray(_,e){return _arrayWithHoles(_)||_iterableToArrayLimit(_,e)||_unsupportedIterableToArray(_,e)||_nonIterableRest()}function _nonIterableRest(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}function _unsupportedIterableToArray(_,e){if(_){if("string"==typeof _)return _arrayLikeToArray(_,e);var o=Object.prototype.toString.call(_).slice(8,-1);return"Object"===o&&_.constructor&&(o=_.constructor.name),"Map"===o||"Set"===o?Array.from(o):"Arguments"===o||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(o)?_arrayLikeToArray(_,e):void 0}}function _arrayLikeToArray(_,e){(null==e||e>_.length)&&(e=_.length);for(var o=0,i=new Array(e);o<e;o++)i[o]=_[o];return i}function _iterableToArrayLimit(_,e){if("undefined"!=typeof Symbol&&Symbol.iterator in Object(_)){var o=[],i=!0,t=!1,a=void 0;try{for(var s,l=_[Symbol.iterator]();!(i=(s=l.next()).done)&&(o.push(s.value),!e||o.length!==e);i=!0);}catch(_){t=!0,a=_}finally{try{i||null==l.return||l.return()}finally{if(t)throw a}}return o}}function _arrayWithHoles(_){if(Array.isArray(_))return _}function _extends(){return _extends=Object.assign||function(_){for(var e=1;e<arguments.length;e++){var o=arguments[e];for(var i in o)Object.prototype.hasOwnProperty.call(o,i)&&(_[i]=o[i])}return _},_extends.apply(this,arguments)}var Page={_adBlockSeenStorage:{},_postsClearTimeoutsCalls:0,initUploadForImagePaste:function initUploadForImagePaste(txtEl,addMedia,blob){window.stManager.add([window.jsc("web/upload.js")],(function(){addMedia.menu&&addMedia.menu.activate();var uploadEl=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("div",{className:"post_upload_wrap fl_r",innerHTML:'<div id="page_field_upload" class="post_upload"></div>'});(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domInsertBefore)(uploadEl,txtEl);var uploadData=window.wkcur?wkcur.wallUploadOpts:cur.wallUploadOpts;if(void 0!==addMedia.clipboardImageUploadIndex)Upload.onFileApiSend(addMedia.clipboardImageUploadIndex,[blob]);else{var composer=txtEl&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.data)(txtEl,"composer"),composerOpts=composer&&composer.options&&composer.options.media&&composer.options.media.options||{},limit=composerOpts&&composerOpts.limit||2;addMedia.clipboardImageUploadIndex=Upload.init((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(uploadEl),uploadData.url,uploadData.params,{file_name:"photo",file_size_limit:26214400,file_types_description:"Image files (*.jpg, *.jpeg, *.png, *.gif)",file_types:"*.jpg;*.JPG;*.jpeg;*.JPEG;*.png;*.PNG;*.gif;*.GIF",file_input:null,accept:"image/jpeg,image/png",file_match:uploadData.opts.ext_re,lang:uploadData.opts.lang,wiki_editor:0,onUploadStart:function(_,e){var o=void 0!==_.ind?_.ind:_,i=Upload.options[o];"form"==Upload.types[o]&&((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("file",(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("choose_photo_upload")).disabled=!0),"fileApi"==Upload.types[o]&&(cur.notStarted&&(cur.preventBoxHide||boxQueue.hideLast(),delete cur.notStarted),i.multi_progress&&this.onUploadProgress(_,0,0))},onUploadComplete:function onUploadComplete(info,res){var params,i=void 0!==info.ind?info.ind:info,fileName=(info.fileName?info.fileName:info).replace(/[&<>"']/g,"");try{params=eval("("+res+")")}catch(_){params=(0,_shared_lib_convert__WEBPACK_IMPORTED_MODULE_18__.fromQueryString)(res)}params.photos?ajax.post("al_photos.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)({act:"choose_uploaded"},params),{onDone:function(_,e){e.uploadNum=i,addMedia.chooseMedia("photo",_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(e,{upload_ind:i+"_"+fileName}))},onFail:function(){}}):Upload.onUploadError(info)},onUploadProgress:function(_,e,o){var i=void 0!==_.ind?_.ind:_;if("fileApi"==Upload.types[i]){var t=(cur.attachMediaIndexes||{})[i];if(void 0===t||t&&cur.addMedia[t].chosenMedia||cur.imMedia){var a={loaded:e,total:o};_.fileName&&(a.fileName=_.fileName.replace(/[&<>"']/g,"")),addMedia.showMediaProgress("photo",i,a)}}},onUploadError:WallUpload.uploadFailed,onCheckServerFailed:function(){delete cur.uploadInited,WallUpload.hide()},onUploadCompleteAll:function(_){"form"==Upload.types[_]&&Upload.embed(_)},onCheckComplete:function(_){Upload.types[_]="fileApi",Upload.onFileApiSend(_,[blob])},customShowProgress:function(){},noFlash:1,multiple:1,multi_progress:1,max_files:limit,chooseBox:1,clear:1,type:"photo",max_attempts:3,server:uploadData.opts.server,error:uploadData.opts.default_error,error_hash:uploadData.opts.error_hash})}}))},buildMediaLinkEl:function(_,e){return'<div class="page_media_link_url '+(e?"page_market_owner_link":"")+'">'+(e?"":'<div class="page_media_link_icon"></div>')+'<div class="page_media_link_text">'+_+"</div></div>"},showManyPhoto:function(_,e,o,i){var t=[];return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_).childNodes,(function(_,e){var o=(e&&e.getAttribute&&e.getAttribute("onclick")).match(/'(-?\d+_\d+)'\s*,\s*'([a-f0-9]{18})'/i);o&&t.push(o[1]+"/"+o[2])})),i.additional={draft_photos:t.join(";")},(0,_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.showPhoto)(e,o,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(i,{queue:1}))},inviteToGroupByMessage:function(_,e,o,i,t){var a=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(e));return(0,_web_lib_feature_boxes__WEBPACK_IMPORTED_MODULE_15__.showWriteMessageBox)(_,i,{params:{onMessageSend:function(_){ajax.post("/al_page.php",{act:"a_invite_by_message",mid:_,gid:o,hash:t},{onDone:function(_,o,i){if(0===o){var t=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geById)("page_block_group_invite_friends");if(t)return t.remove(),void(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_16__.curBox)().hide()}i&&(e.outerHTML=i),_&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(a,"group_box_row_collapsable")&&a.remove()}})}}}),!1},inviteToGroup:function(_,e,o,i,t){var a=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_),s=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_)),l=function(_){var i=_?1:0,s=_?(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("friends_cancel_event_invite"):(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("friends_send_event_invite");a.innerHTML='<a onclick="return page.inviteToGroup(this, '+e+", "+o+", "+i+", '"+t+"')\">"+s+"</a>",a.invited_value=i};return i?(ajax.post("/al_page.php",{act:"a_cancel_invite",mid:o,gid:e,hash:t}),l(0)):(ajax.post("/al_page.php",{act:"a_invite",mid:o,gid:e,hash:t},{onDone:function(_,e){if(!_){l(0),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(a);var o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("error",s),i=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.se)('<div class="page_members_box_error msg"><div class="msg_text">'+e+"</div></div>");o?s.replaceChild(i,o):s.insertBefore(i,s.firstChild)}_&&1===a.invited_value&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(s,"group_box_row_collapsable")&&s.remove()}}),l(1)),!1},moneyTransferBox:function(_,e){var o={to_id:cur.oid,from:e};"own_profile"!==e&&"own_profile_tt"!==e||(o.to_id=0,o.tab="link"),_web_payments_money_transfer__WEBPACK_IMPORTED_MODULE_30__.MoneyTransfer.showMoneyTransferBox(o,{},(_=>(setTimeout((0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_error"),_).hide,2e3),!0))),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(_)},showMoreActions:function(_){var e=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("page_actions_more",_.parentElement);e&&((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(_),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(e))},onSubscriptionItemOnClick:function(_,e,o,i,t){var a=!Number(_.dataset.act);o&&Page.toggleSubscription(_,o,e,0,"page",(function(e,o){_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.update(_,{icon:a?(0,_icons_desktop_getIcon24NotificationOutline__WEBPACK_IMPORTED_MODULE_35__.getIcon24NotificationOutline)().icon:(0,_icons_desktop_getIcon24NotificationCheckOutline__WEBPACK_IMPORTED_MODULE_36__.getIcon24NotificationCheckOutline)().icon,label:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)(a?"groups_notifications_on":"groups_notifications_set_up")}),_.dataset.act=String(o)})),i&&Page.toggleLiveSubscription(_,i,a?0:1,e,(function(){}),!0),t&&Page.togglePodcastsSubscription(_,t,a?0:1,e,(function(){}),!0)},toggleSubscription:function(_,e,o,i,t,a,s){var l=parseInt((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"act"))?1:0,n={onDone:e=>{a?a(e,l?0:1,_):(_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.update(_,{icon:l?(0,_icons_desktop_getIcon24NotificationSlashOutline__WEBPACK_IMPORTED_MODULE_37__.getIcon24NotificationSlashOutline)().icon:(0,_icons_desktop_getIcon24NotificationOutline__WEBPACK_IMPORTED_MODULE_35__.getIcon24NotificationOutline)().icon,label:e}):(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByTag1)("span",_),e),_.setAttribute("data-act",l?0:1))}};s||(n.showProgress=()=>Page.actionsDropdownLock(_),n.hideProgress=()=>Page.actionsDropdownUnlock(_)),ajax.post("al_wall.php",{act:"a_toggle_posts_subscription",subscribe:l?1:0,oid:i||cur.oid,hash:e,source:t},n),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(o)},toggleLiveSubscription:function(_,e,o,i,t,a){void 0!==cur.toggleLiveSubscriptionAct&&(o=cur.toggleLiveSubscriptionAct),ajax.post("al_video.php?act=a_subscribe_live",{subscribe:o?1:0,owner_id:cur.oid,hash:e},{onDone:e=>{cur.toggleLiveSubscriptionAct=!o,t?t(e):_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.update(_,{icon:cur.toggleLiveSubscriptionAct?(0,_icons_desktop_getIcon24LiveOutline__WEBPACK_IMPORTED_MODULE_38__.getIcon24LiveOutline)().icon:(0,_icons_desktop_getIcon24LiveDisableOutline__WEBPACK_IMPORTED_MODULE_39__.getIcon24LiveDisableOutline)().icon,label:e}):(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByTag1)("span",_),e)},showProgress:()=>Page.actionsDropdownLock(_),hideProgress:()=>Page.actionsDropdownUnlock(_)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(i)},togglePodcastsSubscription:function(_,e,o,i,t,a){void 0!==cur.togglePodcastsSubscriptionAct&&(o=cur.togglePodcastsSubscriptionAct),ajax.post("al_wall.php",{act:"a_toggle_podcasts_subscription",subscribe:o?1:0,owner_id:cur.oid,hash:e},{onDone:function(e){cur.togglePodcastsSubscriptionAct=!o,t?t(e):(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(_,e)},showProgress:()=>!a&&Page.actionsDropdownLock(_),hideProgress:()=>!a&&Page.actionsDropdownUnlock(_)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(i)},showMessagesFromCommunityTooltip:function(_){var e=Number(_.getAttribute("data-tooltip-state")),o=_.getAttribute("data-tooltip-text");void 0===cur.toggleMessagesFromCommunityAct&&0===e&&(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_20__.showTooltip)(_,{text:o,dir:"auto",shift:[4,-3]})},toggleMessagesFromCommunity:function(_,e,o,i){void 0!==cur.toggleMessagesFromCommunityAct&&(o=cur.toggleMessagesFromCommunityAct),ajax.post("al_groups.php",{act:"a_toggle_messages_from_community",allow:o?1:0,oid:cur.oid,hash:e},{onDone:function(e){cur.toggleMessagesFromCommunityAct=!o,_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.update(_,{label:e})},showProgress:()=>_&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.lock(_),hideProgress:()=>_&&_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.unlock(_)}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(i)},showPageMembers:function(_,e,o){return(0,_web_page_page_utils__WEBPACK_IMPORTED_MODULE_33__.showPageMembersBox)(e,o,_)},showHiddenMembersBoxInfo:()=>(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("groups_hidden_members_message_box_title"),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("groups_hidden_members_message_box_content")),showPageVideos:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(_)):!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_video.php?act=a_choose_video_box",{review:1,to_id:e},{cache:1,grey:1})},showPageAudios:function(_,e){return cur.viewAsBox?(cur.viewAsBox(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(_)):!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("/al_audio.php?act=audios_box",{oid:e},{cache:1,params:{width:638}},_)},ownerPhotoFast:function(){var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("owner_photo_bubble_input");_||(_=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("owner_photo_wrap").appendChild((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("input",{type:"file",id:"owner_photo_bubble_input",onchange:function(){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.data)(this,"changed",!0),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_page.php",{act:"owner_photo_box",oid:cur.oid}).inp=this}}))),_.click()},ownerPhoto:function(_,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};e||(e={});var i=_extends({stat:["owner_photo.css",window.jsc("web/owner_photo.js")]},o);(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,gid:e.gid},i)},openAvatarForm:function(_){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(boxLayerBG),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(boxLoader),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(boxLayerWrap),(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_16__.boxRefreshCoords)(boxLoader),ajax.post("al_page.php",_,{onDone:function(_,e){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(boxLayerBG),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(boxLoader),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(boxLayerWrap),e?(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showFastBox)((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_error"),e):window.initOwnerAvatarEditForm(_)},onFail:function(){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(boxLayerBG),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(boxLoader),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(boxLayerWrap)}})},ownerAvatarUpload:function(_){Page.openAvatarForm({act:"owner_avatar_upload",oid:_})},ownerAvatarEdit:function(_,e){Page.openAvatarForm({act:"owner_avatar_edit",oid:_,hash:e})},ownerAvatarSelect:function(_){Page.openAvatarForm({act:"owner_avatar_select",list:cur.pvListId||"",photo:_})},ownerCrop:function(_,e){var o=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},i=_extends({stat:["owner_photo.css",window.jsc("web/owner_photo.js")]},o);(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_page.php",{hash:e,act:"owner_photo_crop",oid:_||cur.oid},i)},ownerPhotoEffects:function(_,e){var o="album"+e+"_0/rev";!cur.pvData||cur.pvShown&&cur.pvListId==o||delete cur.pvData[o],(0,_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.showPhoto)(_,o,{additional:{open_pe:1,pe_no_copy:1},loader:1,onHide:function(){cur.pvEditorSaved&&nav.reload()}})},uploadOwnerCover:function(_){return!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_page.php",{act:"owner_photo_box",oid:_||cur.oid,cover:1},{stat:["owner_photo.css",window.jsc("web/owner_photo.js")]})},editOwnerCover:function(_){(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_page.php",{act:"owner_cover_crop",oid:_||cur.oid},{stat:["owner_photo.css",window.jsc("web/owner_photo.js")]})},deleteOwnerCover:function(_,e,o){o||(o=cur.shareSetOwnPhoto),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("groups_delete_cover_title")},(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("groups_delete_cover_confirm"),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_delete"),(function(i){ajax.post("al_page.php",{act:"owner_cover_remove",oid:_,hash:e,from:cur.module},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.lockButton)(i),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.unlockButton)(i),onDone:o})}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_cancel"))},editPhoto:function(_){cur.hideOther(),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_page.php",(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(_||{},{act:"a_edit_photo"}),{params:{bodyStyle:"padding: 16px 7px"},stat:[window.jsc("web/tagger.js"),"tagger.css"]})},deletePhoto:function(_,e){cur.hideOther();var o=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showFastBox)({title:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_warning")},(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("sure_delete_photo"),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_delete"),(function(){ajax.post("al_page.php",{act:"a_delete_photo",hash:e,oid:_},{showProgress:o.showProgress,hideProgress:o.hideProgress})}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_cancel"))},shareCurrent:function(){var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("current_audio",(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("page_current_info"));return _||nav.reload(),(_=_.getAttribute("data-audio"))||nav.reload(),((_=_.split("_")).length<3||"s"!=_[2].substr(0,1))&&nav.reload(),!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("like.php",{act:"publish_box",object:"audio"+_[0]+"_"+_[1],list:_[2]+(_[3]&&"h"==_[3].charAt(0)?"_"+_[3]:"")},{stat:["page.js","page.css","wide_dd.js","wide_dd.css",window.jsc("web/sharebox.js")]})},playCurrent:function(_,e){var o=_.parentNode;return Page.playLive(e,{showProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.showProgress)(o)},hideProgress:function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.hideProgress)(o)}})},playLive:function(_,e){(0,_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.getAudioPlayer)().playLive(_,e)},audioStatusUpdate:function(_){var e=(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.isChecked)("currinfo_audio"),o=(0,_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.getAudioPlayer)(),i=_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_11__.AudioUtils.asObject(o.getCurrentAudioLs());ajax.post("al_audio.php",{act:"toggle_status",hash:_,exp:e,id:i?i.fullId:"",oid:vk.id},{onDone:function(_,e){vk.id==cur.oid&&_&&((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("current_info",_),o.setStatusExportInfo(e,!0))},onFail:()=>!0})},audioListenersOver:function(_,e){(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_20__.showTooltip)(_,{url:"al_audio.php",params:{act:"listeners_tt",oid:e},slide:15,shift:[24,10,10],ajaxdt:100,showdt:400,hidedt:200,asrtl:1,dir:"auto",typeClass:"audio_tt",appendParentCls:"scroll_fix_wrap"})},showAudioListeners:function(_,e){function o(){var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("listeners_more_link"),e=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("listeners_more_link_trigger");(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)(e)&&boxLayerWrap.scrollHeight-500<boxLayerWrap.scrollTop+boxLayerWrap.offsetHeight&&((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(e),_.click())}return e.cancelBubble=!0,cur.audioListenersOnDone={onHide:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window.boxLayerWrap,"scroll",o)},onDone:function(_,e){window.audioListenersOffset=0,e?(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window.boxLayerWrap,"scroll",o):((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)("listeners_more_link"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)("listeners_more_link_trigger"))}},!(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("/al_audio.php",{act:"listeners_box",oid:_},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(cur.audioListenersOnDone,{cache:1}))},moreAudioListeners:function(_){window.audioListenersOffset+=50;var e=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("fans_rows"),o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("listeners_more_link");ajax.post("/al_audio.php",{act:"listeners_box",oid:_,offset:window.audioListenersOffset},{onDone:function(_,i){for(var t=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("div",{innerHTML:_}),a=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(t);a;a=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(t))e.appendChild(a);if(i){var s=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("listeners_more_link_trigger");(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(s)}else(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)(o),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)("listeners_more_link_trigger")},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.lockButton.pbind(o),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.unlockButton.pbind(o)})},postsUnseen:function(_){window._postsExtras||(window._postsExtras={});var e=Date.now(),o=!1;for(var i in _)for(var t in _[i])if("module"!=t&&"index"!=t&&"q"!=t&&"block"!=t){var a=window._postsExtras[t];a&&-1==a.diff&&(a.diff=e-a.start,o=!0)}o&&Page.postsClearTimeouts()},postsSeen:function(_){if(vk.id&&_.length){window._postsSeenModules||(window._postsSeenModules={}),window._postsExtras||(window._postsExtras={});var e,o=Date.now(),i=Page._adBlockSeenStorage;for(var t in _){var a=Page.getPostModuleCode(_[t].module?_[t].module:""),s=_[t].index,l=_[t].q,n=_[t].block;for(var r in _[t].hash&&!window._postsViewHash&&(window._postsViewHash=_[t].hash),_[t])if("module"!=r&&"index"!=r&&"q"!=r&&"hash"!=r&&"block"!=r){window._postsSeenModules[r]=a;var d=_[t][r],E=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("post"+r);if(r in i||(i[r]=!(!E||!(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.attr)(E,"data-ad-view"))),!i[r]){var c=window._postsSeen[r],P=window._postsSaved[r];if(-1==P||-1==c||1==d&&(P||c))continue}var u=0;if(E){u=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)(E)[1];var D=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("replies",E);D&&(u-=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)(D)[1])}window._postsSeen[r]=d,e=d,window._postsExtras[r]={start:o,diff:-1,index:s,q:l,block:n,postHeight:u,viewportHeight:(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.clientHeight)(),session_id:cur.feed_session_id?cur.feed_session_id:"na"},Wall.triggerAdStat(r,_[t].long?"impression_long":"impression")}}e&&Page.postsClearTimeouts()}},postsClearTimeouts:function(){clearTimeout(window._postsSaveTimer),clearTimeout(window._postsSendTimer),++Page._postsClearTimeoutsCalls<10?(window._postsSaveTimer=setTimeout(Page.postsSave,2500),window._postsSendTimer=setTimeout(Page.postsSend,5e3)):(Page._postsClearTimeoutsCalls=0,Page.postsSave(),Page.postsSend())},postsSave:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.checkVersion()||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.isEmpty)(window._postsSeen))return window._postsSeen;var _,e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_sent")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_seen")||{},i=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_seen_modules")||{},t=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_extras")||{},a=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),s=Page._adBlockSeenStorage;for(var l in window._postsExtras||(window._postsExtras={}),window._postsSeen){var n=window._postsSeen[l];window._postsExtras[l]&&(t[l]={diff:window._postsExtras[l].diff,index:window._postsExtras[l].index,q:window._postsExtras[l].q,session_id:window._postsExtras[l].session_id?window._postsExtras[l].session_id:"na",postHeight:window._postsExtras[l].postHeight,viewportHeight:window._postsExtras[l].viewportHeight,block:window._postsExtras[l].block},delete window._postsExtras[l]);var r=l.split("_");"ad"!==r[0]&&"adsite"!==r[0]&&"posthashtag"!==r[0]&&"block"!==r[0]&&(r[0]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(r[0]),r[1]&&"p"==r[1].substr(0,1)||(r[1]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(r[1])));var d=(e[r[0]]||{})[r[1]],E=r&&"block"===r[0]&&4===(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(r[1]);r[0]!=vk.id&&(E||s[l]||!d||-1==n&&d>0)&&(o[r[0]]||(o[r[0]]={},delete i[l]),(!o[r[0]][r[1]]||-1==n&&o[r[0]][r[1]]>0)&&(_=o[r[0]][r[1]]=a*n,i[l]=window._postsSeenModules[l])),window._postsSaved[l]=n}window._postsSeen={},window._postsSeenModules={},_&&(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_seen",o),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_seen_modules",i),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_extras",t))},getPostModuleCode:function(_){switch(_){case"feed":return"f";case"public":case"groups":return"c";case"profile":return"p";case"wall":return"w";case"wall_top":return"tw";case"feed_search":return"s";case"feed_news_recent":case"feed_news":return"rf";case"feed_news_top":return"tf";case"feed_recommended":case"feed_recommended_recent":return"d";case"feed_recommended_top":return"e";case"feed_other":return"o";case"feed_friends":case"feed_friends_recent":return"rr";case"feed_friends_top":return"tr";case"feed_podcasts":case"feed_podcasts_top":case"feed_podcasts_recent":return"h";case"feed_groups":case"feed_groups_recent":return"rg";case"feed_groups_top":return"tg";case"feed_videos":case"feed_videos_recent":return"rv";case"feed_videos_top":return"tv";case"feed_photos":case"feed_photos_recent":return"rp";case"feed_photos_top":return"tp";case"feed_list_recent":return"rl";case"feed_list_top":return"tl";case"groups_ads_promoted_post":return"ag";case"public_ads_promoted_post":return"ap";default:return"u"}},postsSend:function(){var _={},e={},o={};if(_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.checkVersion())_=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_seen")||{},e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_seen_modules")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_extras")||{};else{var i=Page.postsSave();for(var t in i){var a=i[t],s=t.split("_");"ad"!==s[0]&&"posthashtag"!==s[0]&&(s[0]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(s[0]),"p"!=s[1].substr(0,1)&&(s[1]=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)(s[1]))),_[s[0]]||(_[s[0]]={}),(!_[s[0]][s[1]]||-1==a&&_[s[0]][s[1]]>0)&&(_[s[0]][s[1]]=a)}}var l=[],n=[];for(var r in _){var d=[];for(var E in _[r]){var c=r+"_"+E,P=e[c]||"",u=o[c],D="s"==P&&u&&u.q?u.q:"";D=D.replace(/[,;:]/g,"");var M=u&&u.session_id?u.session_id:"na",O="";u&&"ad"!==r&&"posthashtag"!==r&&(O=(O=":"+[u.diff,u.index,M,D||"",u.block||""].join(":")).replace(/:+$/,"")),u&&u.postHeight&&n.push([c,u.postHeight,u.viewportHeight].join(":")),d.push(P+(_[r][E]>0?E:-E)+O)}d.length&&l.push(r+"_"+d.join(","))}if(l.length){if(!vk.id)return Page.postsClear();var p={act:"seen",data:l.join(";"),meta:n.join(";")};window._postsViewHash&&(p.hash=window._postsViewHash),ajax.post("al_page.php",p,{onDone:function(){if(!_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.checkVersion())return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(window._postsSaved,window._postsSeen);var e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_seen")||{},o=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_sent")||{},i=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_seen_modules")||{};for(var t in _){var a=void 0;for(a in _[t])o[t]||(o[t]={}),-1!=o[t][a]&&(o[t][a]=_[t][a]),(e[t]||{})[a]&&(delete e[t][a],delete i[t+"_"+a]);e[t]&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.isEmpty)(e[t])&&(delete e[t],delete i[t+"_"+a])}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_seen",e),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_sent",o),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_seen_modules",i),clearTimeout(window._postsCleanTimer),window._postsCleanTimer=setTimeout(Page.postsClean,1e4)}})}},postsClean:function(){if(window.curNotifier&&curNotifier.idle_manager&&!curNotifier.idle_manager.is_idle)return(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_24__.debugLog)("waiting ls clean.."),clearTimeout(window._postsCleanTimer),void(window._postsCleanTimer=setTimeout(Page.postsClean,1e4));(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_24__.debugLog)("cleaning ls..");var _=Math.floor((vk.ts+Math.floor((Date.now()-vk.started)/1e3))/3600),e=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("posts_sent")||{};for(var o in e){for(var i in e[o]){var t=e[o][i];_-(t>0?t:-t)>24&&delete e[o][i]}(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.isEmpty)(e[o])&&delete e[o]}_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_sent",e),Wall.cleanAdsEvents()},postsClear:function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_seen",{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_extras",{}),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("posts_sent",{}),window._postsSaved={},window._postsSeen={},window._postsSeenModules={},window._postsExtras={},_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set(Wall.LS_ADS_EVENTS,Wall._lsAdsEvents={})},showContacts:function(_,e,o){(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("/al_page.php",{act:"a_get_contacts",oid:_,edit:e},{noEval:!0}).setOptions({onHideAttempt:function(){return cur.reloadAfterClose&&(o?o():(nav.reload({noscroll:!0}),cur.reloadAfterClose=!1)),!0}})},showContactTT:function(_,e){(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_20__.showTooltip)(_,{text:()=>e,slideX:15,className:"pedit_tt",hasover:1,shift:[-(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)(_)[0]-10,-15,-15],dir:"left",appendParentCls:"scroll_fix_wrap",onCreate:function(){_.tt&&setTimeout(_.tt.hide,3e3)}})},editContact:function(_,e,o,i){var t=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_page.php",{act:"a_edit_contact_box",mid:e,oid:_});return t.setButtons((0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_save"),(function(a){function s(){var s={act:"a_add_contact",mid:e,oid:_,boxhash:t.boxhash};s.hash=o,o||(s.hash=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("group_contact_hash").value),s.title=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("group_contact_position"),s.phone=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("group_contact_phone"),s.email=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("group_contact_email"),e||!(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("group_contact_memlink")||(s.page=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("group_contact_memlink"),s.page||s.phone||s.email)?ajax.post("al_page.php",s,{onDone:function(e,o){t.hide();var a=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_16__.curBox)();a?(a.content(e),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("public_contacts_list")&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("public_contacts_list").sorter&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("public_contacts_list").sorter.destroy(),a.execInline(t.boxhash),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.toggle)("group_add_contact",(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("public_contacts_list").childNodes.length<30)):Page.showContacts(_,1,i)},onFail:function(_){if((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("group_contact_error"))return(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("group_contact_error").innerHTML=_,(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("group_contact_error_wrap"),!0},showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.lockButton)(a),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.unlockButton)(a)}):t.hide()}cur.reloadAfterClose=!0,e||cur.lastContact==(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("group_contact_memlink")?s():Page.searchContact(_,(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)("group_contact_memlink"),s)}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_cancel")),!1},searchContact:function(_,e,o){if(!(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)(e))return cur.lastContact="",void(o&&o());e!=cur.lastContact&&ajax.post("al_page.php",{act:"a_search_contact",oid:_,page:e},{onDone:function(_,i,t,a){cur.lastContact=e,(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("group_contact_name").innerHTML=t,(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("group_contact_image").innerHTML=i,(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("group_contact_hash").value=a,_?o?o():(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("group_contact_error_wrap"):((0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.notaBene)("group_contact_memlink","",!0),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("group_contact_error_wrap"))}})},deleteContact:function deleteContact(oid,mid,hash){return cur.reloadAfterClose=!0,ajax.post("al_page.php",{act:"a_delete_contact",oid,mid,hash},{onDone:function onDone(res,script){var box=(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_16__.curBox)();if(box.content(res),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("public_contacts_list")&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("public_contacts_list").sorter&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("public_contacts_list").sorter.destroy(),script)try{eval(script)}catch(_){(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_24__.logEvalError)(_,script)}(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.toggle)("group_add_contact",(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("public_contacts_list").childNodes.length<30)}}),!1},reorderContacts:function(_,e,o,i,t){var a=o.id.replace("group_contact_cell",""),s=(i&&i.id||"").replace("group_contact_cell",""),l=(t&&t.id||"").replace("group_contact_cell","");cur.reloadAfterClose=!0,ajax.post("/al_page.php",{act:"a_reorder_contacts",oid:_,mid:a,before:s,after:l,hash:e})},initStatusEditable:function(_){if(_.emojiInited)return!1;_.emojiInited=!0,window.stManager.add([window.jsc("web/emoji.js"),"notifier.css"],(function(){Emoji.init(_,{ttDiff:-48,rPointer:!0,controlsCont:(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_),noStickers:!0,forceEnterSend:!0,ref:"status",onSend:Page.infoSave,checkEditable:function(){var e=Emoji.editableVal(_);e.length>140&&(Emoji.val(_,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.clean)(e.substr(0,140))),Emoji.editableFocus(_,!1,!0))}})}))},infoEdit:function(_){if(cur.viewAsBox)return cur.viewAsBox();var e=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("current_info").tt;e&&e.hide&&e.hide({fasthide:!0}),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("currinfo_editor","currinfo_fake"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("currinfo_wrap"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("currinfo_app")&&!cur.ciApp?((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("currinfo_audio"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("currinfo_app")):cur.ciApp&&((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("currinfo_audio"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("currinfo_app"));var o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("current_info").firstChild,i=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("currinfo_input"),t=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByTag1)("a",o);if(Page.initStatusEditable(i,cur.infoOld),cur.infoEditing="my_current_info"==o.className,cur.infoEditing){var a=t?t.innerHTML:o.innerHTML;a=a.replace(/<img[^>]+alt="([^"]+)"[^>]*>/g,"$1"),cur.infoOld=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.clean)((0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.stripHTML)(a)))}else cur.infoOld="";return window.Emoji?(Emoji.val(i,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.winToUtf)(cur.infoOld)),Emoji.editableFocus(i,!1,!0,!0)):((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(i,(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.winToUtf)(cur.infoOld)),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.elfocus)(i)),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"keydown",Page.infoKeydown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(document,"mousedown",Page.infoMousedown),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("currinfo_save").onclick=Page.infoSave,!1},infoCancel:function(){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("currinfo_editor","currinfo_fake"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("currinfo_wrap"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.cleanElems)("currinfo_save","currinfo_cancel"),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window,"keydown",Page.infoKeydown),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(document,"mousedown",Page.infoMousedown),cur.ciApp=!1},infoShowShare:function(){if(cur.viewAsBox)return cur.viewAsBox();var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("current_info"),e=(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("share_current_info");(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_20__.showTooltip)(_,{content:'<div class="content"><div class="checkbox">'+e+"</div></div>",className:"share_tt",init:function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("checkbox",_.tt.container),"click",(function(){(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.checkbox)(this),ajax.post("al_page.php",{act:"share_currinfo",hash:cur.options.info_hash,oid:cur.oid,checked:(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.isChecked)(this)},{onDone:Wall.receive})}))},toup:!1,showdt:0,slide:10,shift:[6,8,8],dir:"auto",hidedt:200,onClean:function(){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.cleanElems)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("checkbox",_.tt.container))}})},infoKeydown:function(_){_.keyCode==_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.KEY.ESC&&Page.infoCancel()},infoMousedown:function(_){for(var e=_.target;e.parentNode;){if("currinfo_editor"==e.id)return;e=e.parentNode}Page.infoCancel()},infoSave:function(){if(cur.viewAsBox)return cur.viewAsBox();var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("currinfo_input"),e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)((window.Emoji?Emoji.editableVal:_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(_)).replace(/\n/g," ");if(e==cur.infoOld||e==(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.winToUtf)(cur.infoOld))return Page.infoCancel();e=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)(e).substr(0,140),ajax.post("al_page.php",{act:"current_info",oid:cur.oid,info:e,hash:cur.options.info_hash},{onDone:function(){var _=e?"my":"no",o=e?'<span class="current_text">'+Emoji.emojiToHTML(e.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/"/g,"&quot;"),!0)+"</span>":(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("change_current_info");(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("current_info").innerHTML=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("currinfo_fake").innerHTML='<span class="'+_+'_current_info">'+o+"</span>",Page.infoCancel();var i=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("current_info"),t=i.tt;t&&t.el&&(t.destroy(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(i,"mouseover")),e&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(i,"mouseover",Page.infoShowShare),Page.infoShowShare())},onFail:function(_){if(!_)return!0},showProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.lockButton.pbind("currinfo_save"),hideProgress:_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.unlockButton.pbind("currinfo_save"),stat:[window.jsc("web/tooltips.js"),"tooltips.css",window.jsc("web/emoji.js")]})},showGifBox:function(_,e,o,i,t,a){var s=arguments.length>6&&void 0!==arguments[6]?arguments[6]:{};a&&(a.ctrlKey||a.metaKey||a.shiftKey)||((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(a),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("docs.php",{act:"show_box",access_key:null==s?void 0:s.accessKey,doc_id:_,doc_owner_id:e,post_id:o,post_owner_id:i,hash:t},{stat:[window.jsc("web/docs.js"),"docs.css"],params:{white:!0,hideButtons:!0},onDone:function(_,e){if(!vk.widget){if((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_16__.curBox)().setOptions({width:e.width+50}),cur.gifAdded&&cur.gifAdded[e.doc]){var o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("docs_gif_box_add_"+e.doc);(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.replaceClass)(o,"button_action_light_add","button_action_light_done"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(o,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("wall_doc_added_short"))}var i=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("page_doc_photo_href",(0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_16__.curBox)().bodyNode);Page.showGif(i)}}}))},showGif:function(_,e,o){if(e&&(e.ctrlKey||e.metaKey))return!0;var i=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_),t=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(i),a=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(_);cur.gifAdded=cur.gifAdded||{},(cur.activeGif&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(cur.activeGif))===t||(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(cur.activeGif),"page_gif_large")&&!o)&&Page.hideGif(cur.activeGif,!1);var s,l=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"doc"),n=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"hash"),r=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"add-txt")||"",d=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"add-hash"),E=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"share-txt")||"",c=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"post"),P=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"reply"),u=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"preview"),D=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"width"),M=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"height"),O=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"thumb"),p=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(i,"page_gif_large"),b=!e,m=!0;u||(m=!1);var g=_.href+"&wnd=1&module="+cur.module;m?(s=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("video",{autoplay:!0,muted:!0,loop:"loop",poster:O,src:g+"&mp4=1",className:"pages_gif_img page_gif_big"},{width:D?D+"px":void 0,height:M?M+"px":void 0,background:p?"transparent url("+O+") no-repeat 0 0":"",backgroundSize:"cover"}),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.attr)(s,"webkit-playsinline",""),_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.ipad&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.attr)(s,"controls","")):s=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("img",{src:g,className:"pages_gif_img"},{visibility:"hidden"});var h=n?'<div class="page_gif_share" onmouseover="showTooltip(this, {text: \''+E+"', black: 1, shift: [7, 6, 6], toup: 0, needLeft: 1})\" onclick=\"return Page.shareGif(this, '"+l+"', '"+n+'\', event)"><div class="page_gif_share_icon"></div></div>':"",C=d?'<div class="page_gif_add" onmouseover="return Page.overGifAdd(this, \''+r+"', '"+l+"', event);\" onclick=\"return Page.addGif(this, '"+l+"', '"+n+"', '"+d+'\', event);"><div class="page_gif_add_icon"></div></div>':"",w=h||C?'<div class="page_gif_actions">'+h+C+"</div>":"",f='<div class="page_gif_progress_icon" style="display:none;">'+(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.rs)(vk.pr_tpl,{id:"",cls:""})+"</div>",A=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("a",{href:_.href,className:"page_gif_preview"+(cur.gifAdded[l]?" page_gif_added":""),innerHTML:f+w,onclick:_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent},{backgroundImage:m?"":((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getStyle)(a,"backgroundImage")||"").replace(/"/g,"'"),backgroundSize:m?"":((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getStyle)(a,"backgroundSize")||"").replace(/"/g,"'"),width:D?D+"px":void 0,height:M?M+"px":void 0}),L=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(A);A.appendChild(s),cur.activeGif=A,i.insertBefore(A,_),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(_);var T,B=!1,v=function(){var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)(s);(_[0]||_[1])&&(clearInterval(T),delete s.onload,delete s.onloadeddata,B=!0,(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(L),A.style.background="",A.setAttribute("onclick","return Page.hideGif(this, event);"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)(s,"page_gif_big"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)(A,"page_gif_loaded"),D&&(s.style.width=D+"px"),M&&(s.style.height=M+"px"),s.style.visibility="",(0,_lib_stats__WEBPACK_IMPORTED_MODULE_25__.statlogsValueEvent)("gif_play",0,m?"mp4":"gif",b?1:0))};e?(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(L):setTimeout((function(){B||(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(L)}),300),m?s.onloadeddata=v:(T=setInterval(v,10),s.onload=v),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(i,"playing",1);var I=b?"autoplay":"manual",U=cur.module||"other",R=c?"post":P?"reply":"";if((0,_lib_stats__WEBPACK_IMPORTED_MODULE_25__.statlogsValueEvent)("gif_show",I,U,R),c){var W=c.split("_"),K=W[0],x=W[1];(0,_lib_stats__WEBPACK_IMPORTED_MODULE_25__.statlogsValueEvent)("show_post_gif",1,K,x)}return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(e)},hideGif:function(_,e){if(e&&(e.ctrlKey||e.metaKey))return!0;var o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_),i=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domNS)(_);return o.removeAttribute("data-playing"),e&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(o,"page_gif_autoplay"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)(_),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(i),delete cur.activeGif,!1},overGifAdd:function(_,e,o,i){return cur.gifAdded=cur.gifAdded||{},cur.gifAdded[o]&&!(e=cur.gifAdded[o].tooltip)||(0,_lib_tooltip_utils__WEBPACK_IMPORTED_MODULE_20__.showTooltip)(_,{text:e,black:1,shift:[7,6,6],toup:0,needLeft:1}),!1},addGif:function(_,e,o,i,t){if(cur.viewAsBox)return(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.stopEvent)(t),cur.viewAsBox();cur.gifAdded=cur.gifAdded||{},(0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_14__.isObject)(_.tt)&&_.tt.hide();var a=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(_,"button_action_light");return cur.gifAdded[e]?ajax.post("docs.php",{act:"a_delete",oid:vk.id,did:cur.gifAdded[e].did,hash:cur.gifAdded[e].hash},{onDone:function(){if(a)(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.replaceClass)(_,"button_action_light_done","button_action_light_add"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("wall_doc_add_short"));else{var o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.gpeByClass)("page_gif_large",_)||(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_);(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(o,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}delete cur.gifAdded[e]}}):((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)(_,"page_gif_adding"),ajax.post("docs.php",{act:"a_add",doc:e,hash:o,add_hash:i},{onDone:function(o,i,t,s){if((0,_web_lib_box_utils__WEBPACK_IMPORTED_MODULE_16__.showDoneBox)(o),a)(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.replaceClass)(_,"button_action_light_add","button_action_light_done"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(_,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("wall_doc_added_short"));else{var l=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.gpeByClass)("page_gif_large",_)||(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_);(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)(l,"page_gif_added"),_.tt&&_.tt.el&&_.tt.destroy()}cur.gifAdded[e]={tooltip:i,did:t[0],hash:s}}})),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(t)},shareGif:function(_,e,o,i){return cur.viewAsBox?((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.stopEvent)(i),cur.viewAsBox()):((0,_shared_lib_common__WEBPACK_IMPORTED_MODULE_14__.isObject)(_.tt)&&_.tt.hide(),(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("like.php",{act:"publish_box",object:"doc"+e,list:o},{stat:["wide_dd.js","wide_dd.css",window.jsc("web/sharebox.js")]}),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(i))},initGifAutoplay:function(){if(!(cur.gifAutoplayScrollHandler||_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.mobile||cur.viewAsBox)){var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)("page_header")[1],e=(0,_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_40__.debounce)((function(){var e=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("page_gif_autoplay");if(!(!e.length||window.wkcur&&wkcur.shown)){var o,i,t,a=(window.innerHeight||document.documentElement.clientHeight)-_,s=_+a/2,l=Math.min(a,800),n=s-l/2,r=s+l/2,d=e.length-1,E=-1;if(cur.activeGif){var c=cur.activeGif.getBoundingClientRect();if(c.top>n&&c.bottom<r){if(c.top<s&&c.bottom>s)return;var P=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.indexOf)(e,(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(cur.activeGif)),u=Math.min(Math.abs(a/2-c.top),Math.abs(a/2-c.bottom));o={el:(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(cur.activeGif),distanceToMiddle:u},P>-1&&(d=P,E=Math.abs(a/2-c.top)<Math.abs(a/2-c.bottom)?-1:1)}else(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.inArray)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(cur.activeGif),e)&&Page.hideGif(cur.activeGif)}for(;i=e[d];){var D=i.getBoundingClientRect(),M=D.width&&D.height&&D.top>n&&D.bottom<r;if(M&&0==d&&(0,_lib_scroll__WEBPACK_IMPORTED_MODULE_26__.scrollGetY)()<300){o={el:i,distanceToMiddle:t};break}if(M){if(t=Math.min(Math.abs(a/2-D.top),Math.abs(a/2-D.bottom)),o&&t>o.distanceToMiddle)break;o={el:i,distanceToMiddle:t}}d+=E}if(o&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(o.el)!==cur.activeGif){Page.showGif((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(o.el));for(var O,p=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.indexOf)(e,o.el)+1;O=e[p++];){var b=O.getBoundingClientRect();if(b.width&&b.height){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("video",{src:(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(O).href+"&wnd=1&mp4=1",preload:"auto"});break}}}}}),50);cur.gifAutoplayScrollHandler=e,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"scroll",e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"resize",e),e(),cur.destroy.push((function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window,"scroll",e),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window,"resize",e),e=null,delete cur.gifAutoplayScrollHandler}))}},initVideoAutoplay:function initVideoAutoplay(){if(_shared_lib_browser__WEBPACK_IMPORTED_MODULE_12__.browser.mobile||cur.videoAutoplayScrollHandler)"feed"===cur.module&&(0,_lib_stats__WEBPACK_IMPORTED_MODULE_25__.statlogsValueEvent)("feed_init_video_autoplay",cur.videoAutoplayScrollHandler?"already_init":"bad_browser");else{var isMessagePage="im"===cur.module,chatHeader,chatWrapperUiScroll,chatHeaderHeight,chatInputBox,lastScroll,directionUp,lastAutoPlayVideo,chatHeaderBottom,chatInputBoxTop;if("feed"===cur.module)(0,_lib_stats__WEBPACK_IMPORTED_MODULE_25__.statlogsValueEvent)("feed_init_video_autoplay","good_browser");else if(isMessagePage){var chatWrapper=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("_im_chat_body_abs");chatHeader=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("im-page--chat-header"),chatWrapperUiScroll=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.data)(chatWrapper,"ui-scroll"),chatHeaderHeight=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)(chatHeader)[1],chatInputBox=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass1)("im-chat-input"),lastScroll=0,directionUp=!0,lastAutoPlayVideo=null}var canPlayHls=window.MediaSource&&MediaSource.isTypeSupported&&MediaSource.isTypeSupported('video/mp4; codecs="avc1.42E01E,mp4a.40.2"'),noHlsMaxDuration=300,fixedHeaderHeight=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getSize)("page_header")[1],scrollHandler=(0,_shared_lib_debounce__WEBPACK_IMPORTED_MODULE_40__.debounce)((function(_,e){if(!(layers.visible||window.mvcur&&mvcur.mvShown||nav.objLoc.z||_getFullscreenElement()||window.Calls&&window.Calls.isInActiveCall)){var o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("page_video_autoplayable"),i=o.length;if(i&&(!e||!cur.videoInlinePlayer||cur.videoInlinePlayer.isAutoplay())){var t,a,s,l=document.body.scrollHeight-fixedHeaderHeight,n=(window.innerHeight||document.documentElement.clientHeight)-fixedHeaderHeight,r=fixedHeaderHeight+n/2,d=Math.min(n,800);isMessagePage?(s=cur.imClassicInterface?l-(n+(0,_lib_scroll__WEBPACK_IMPORTED_MODULE_26__.scrollGetY)()):chatWrapperUiScroll.api.data.scrollBottom,directionUp=s>=lastScroll,lastScroll=s,(e||s&&(cur.imClassicInterface&&directionUp||!cur.imClassicInterface&&directionUp))&&(o=o.reverse()),t=r-d/2,a=s<100?n:t+d,cur.imClassicInterface?(chatHeaderBottom=chatHeader.getBoundingClientRect().top+chatHeaderHeight,chatInputBoxTop=chatInputBox.getBoundingClientRect().top):(chatHeaderBottom=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getXY)(chatHeader)[1]+chatHeaderHeight,chatInputBoxTop=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.getXY)(chatInputBox)[1]),t<chatHeaderBottom&&(t=chatHeaderBottom),a>chatInputBoxTop&&(a=chatInputBoxTop)):a=(t=(s=(0,_lib_scroll__WEBPACK_IMPORTED_MODULE_26__.scrollGetY)())<300?fixedHeaderHeight:r-d/2)+d;var E=function(_,e){var o=_.closest(".FeedVideosForYou");if(!o)return!1;var i=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByClass)("ui_gallery_item",o),t=i.indexOf(_.closest(".ui_gallery_item")),a=o.getBoundingClientRect(),s=a.x+(.3+.4*t/i.length)*a.width;return e.x<s&&s<e.x+e.width},c=cur.videoInlinePlayer;if(c){var P=c.isAutoplay(),u=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domClosest)("post",c.el),"ad-view"),D=c.el.getBoundingClientRect(),M=D.top>t&&D.bottom<a;if(!u&&P||(M=D.bottom>t&&D.bottom<a||D.top>t&&D.top<a),c.el.closest(".ui_gallery__inner_cont")&&(M=M&&E(c.el,D)),M){if(P&&"paused"==c.getState()&&c.play(),"ended"!=c.getState())return}else P&&!c.isActiveLive()&&c.pause()}var O=i;for(e&&lastAutoPlayVideo&&(O=o.indexOf(lastAutoPlayVideo));O--;){var p=o[O],b=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(p,"VideoRestriction");if(!(!canPlayHls&&(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(p,"duration"))>noHlsMaxDuration||b)){var m=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(p,"loading"),g=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(p,"playing"),h=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domClosest)("post",p),"ad-view"),C=(g?(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domNS)(p):p).getBoundingClientRect();if(C.width&&C.height){var w=C.top>t&&C.bottom<a;if(h&&!c&&(w=C.bottom>t&&C.bottom<a||C.top>t&&C.top<a),p.closest(".ui_gallery__inner_cont")&&(w=w&&E(p,C)),w){if(!g&&!m){var f=_getVideoParams(p),A=Date.now();lastAutoPlayVideo=p,(0,_lib_video__WEBPACK_IMPORTED_MODULE_27__.showInlineVideo)(f.video,f.list,{autoplay:1,no_progress:1,cache:1,addParams:f},!1,p),(0,_lib_stats__WEBPACK_IMPORTED_MODULE_25__.statlogsValueEvent)("page_show_inline_video",Date.now()-A),_sendLoadEvent(f),cur.videoAutoplayStat={video:f.video,launched:Date.now(),preloaded:_isPreloaded(f.video)}}break}if(!isMessagePage&&C.top<=t)break}}}var L=O+1;if(isMessagePage){if(!s)return;L=O-1}do{var T=o[L];if(T&&(canPlayHls||(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(T,"duration"))<=noHlsMaxDuration)){var B=_getVideoParams(T);_isPreloaded(B.video)||(0,_lib_video__WEBPACK_IMPORTED_MODULE_27__.loadInlineVideo)(B,_onVideoDataLoaded,!0);break}}while(++L<i&&!isMessagePage)}}}),50);cur.videoAutoplayScrollHandler=scrollHandler,(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"scroll",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"resize",scrollHandler),isMessagePage&&!cur.imClassicInterface&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(window,"imScroll",scrollHandler),scrollHandler(),cur.destroy.push((function(){(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window,"scroll",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window,"resize",scrollHandler),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(window,"imScroll",scrollHandler),scrollHandler=null,delete cur.videoAutoplayScrollHandler}))}function _getVideoParams(thumb){var _options$addParams,videoRawId,listId,options,showInlineParamsMatch=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.attr)(thumb,"onclick").match(/show(?:Inline)?Video\((.+)\)/);if(showInlineParamsMatch){var paramsStr=showInlineParamsMatch[1];try{var _eval=eval("["+paramsStr+"]"),_eval2=_slicedToArray(_eval,3);videoRawId=_eval2[0],listId=_eval2[1],options=_eval2[2]}catch(_){}}return videoRawId||(videoRawId=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(thumb,"video"),listId=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(thumb,"list")),options=options||{},(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.extend)(options.addParams,{video:videoRawId,list:listId,ad_data:(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(thumb,"ad-data"),ad_block_id:(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(thumb,"ad-block-id"),post_id:(null===(_options$addParams=options.addParams)||void 0===_options$addParams?void 0:_options$addParams.post_id)||(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domClosest)("post",thumb),"post-id"),stretch_vertical:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(thumb,"stretch-vertical")),autoplay_sound:(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.intval)((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(thumb,"autoplay-sound")),autoplay:1,from_autoplay:1,module:options.module||currentModule()})}function _isPreloaded(_){var e=!1;return(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.each)(window.ajaxCache,(function(o,i){if(0===o.indexOf("/al_video.php?act=video_box")&&o.indexOf("&video="+_)>0)return e=!0,!1})),e}function _sendLoadEvent(_){ajax.post("al_video.php?act=autoplay_stat",{event:"load",video:_.video,post_id:_.post_id,module:cur.module||""},{})}function _onVideoDataLoaded(_,e){}function _getFullscreenElement(){return document.fullscreenElement||document.mozFullScreenElement||document.msFullscreenElement||document.webkitFullscreenElement}},actionsDropdown:function(_,e){_||!e?(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)(_):e()},actionsDropdownHide:function(_,e,o){if(1===e)return o&&o(),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)(_);clearTimeout(cur.actDdHide),cur.actDdHide=setTimeout((function(){(0,_lib_fx__WEBPACK_IMPORTED_MODULE_28__.fadeOut)(_,200,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide.pbind("page_actions_sublist")),o&&o()}),150)},actionsDropdownUnhide:function(){clearTimeout(cur.actDdHide)},actionsDropdownLocked:function(_){if(_=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)(_))return(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(_,"page_actions_item_lock")},lockTimeout:null,resetLockTimeout:null,actionsDropdownLock:function(_){(_=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)(_))&&(_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.lock(_):(_=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)(_))&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(_,"page_actions_item")&&!(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),Page.resetLockTimeout=!1,Page.lockTimeout=setTimeout((function(){if(!Page.resetLockTimeout){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.data)(_,"inner",_.innerHTML),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)(_,"page_actions_item_lock");var e=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ce)("div",{className:"page_actions_item_lock_text"});(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.val)(e,_.innerHTML),_.appendChild(e),(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.showProgress)(_)}}),500)))},actionsDropdownUnlock:function(_){_=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)(_),_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.isPageActionCell(_)?_web_ui_PageActionCell__WEBPACK_IMPORTED_MODULE_31__.PageActionCell.unlock(_):(Page.resetLockTimeout=!0,(_=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)(_))&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(_,"page_actions_item")&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(_,"page_actions_item_lock")&&(Page.lockTimeout&&clearTimeout(Page.lockTimeout),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(_,"page_actions_item_lock"),_.innerHTML=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.data)(_,"inner")))},actionsPreloadFeedLists:function actionsPreloadFeedLists(el,sh){ajax.post("al_feed.php",{act:"a_get_lists_by_item",item_id:cur.oid},{onDone:function onDone(html,js){if(sh&&!(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("page_actions_wrap")){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(el).appendChild((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.se)(html),el);try{eval(js)}catch(_){(0,_lib_debug_tools__WEBPACK_IMPORTED_MODULE_24__.logEvalError)(_,js)}}},cache:1})},feedListsDDShow:function(){var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("page_actions_item_lists");if((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.addClass)(_,"page_actions_item_unfolded"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("page_actions_sublist"))return clearTimeout(cur.feedListsDDHide),void(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.show)("page_actions_sublist");var e=[];for(var o in cur.options.feedLists){var i=cur.options.feedLists[o];i.length>20&&(i=(0,_web_lib_utils_common__WEBPACK_IMPORTED_MODULE_17__.trim)(i.substr(0,18))+"..."),e.push('<a id="page_feed_item'+o+'" class="page_actions_item page_actions_subitem'+(cur.options.feedListsSet&&cur.options.feedListsSet[o]?" checked":"")+'" onclick="Page.feedListsCheck(this, '+o+');">'+i+"</a>")}e=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.se)('<div id="page_actions_sublist" onmouseover="Page.feedListsDDShow();">'+e.join("")+"</div>"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPN)(_).appendChild(e)},feedListsDDHide:function(){clearTimeout(cur.feedListsDDHide),cur.feedListsDDHide=setTimeout((function(){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hide)("page_actions_sublist"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)("page_actions_item_lists","page_actions_item_unfolded")}),150)},feedListsCheck:function(_,e){var o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(_,"checked");o?(cur.options.feedListsSet[e]=0,cur.options.feedListsChanges[e]=-1):(cur.options.feedListsSet[e]=1,cur.options.feedListsChanges[e]=1),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.toggleClass)(_,"checked",!o),cur.feedListsTO&&clearTimeout(cur.feedListsTO);var i=[];for(var t in cur.options.feedListsChanges)i.push(cur.options.feedListsChanges[t]*t);i.length&&(cur.feedListsTO=setTimeout((function(){ajax.post("al_feed.php",{act:"a_toggle_lists",item_id:cur.oid,lists_ids:i.join(","),hash:cur.options.feedListsHash},{onDone:function(){cur.options.feedListsChanges={}}})})))},addAudioPreview:function(_,e){return e[_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_11__.AudioUtils.AUDIO_ITEM_INDEX_CONTEXT]="attach_preview",_web_audio_player_utils__WEBPACK_IMPORTED_MODULE_11__.AudioUtils.drawAudio(e,"inlined")},ownerButtonClick:function(_,e,o,i){if(!(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.checkEvent)(o)){i&&(0,_shared_lib_web_stats__WEBPACK_IMPORTED_MODULE_32__.saveStatlogEvents)({name:"owner_button_app_click",value:i});if("open_url"===_.type){if(_.is_internal&&_.open_in_layer){var t=nav.fromStr(_.url),a=t[0].replace("/","");return delete t[0],(0,_lib_feature_entries__WEBPACK_IMPORTED_MODULE_19__.showWiki)({w:a},null,null,{ads_params:t})}return nav.go(e,o)}return!1}},postAttachesShowMore:function(_,e){var o=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPS)(_);if(o&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(o,"post_cropped_attaches")){var i=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domPS)(o),t=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domFC)(o);["wall_audio_rows","post_media","post_thumbed_media"].some((function(_){return(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(i,_)&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.hasClass)(t,_)}))&&((0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domChildren)(t).forEach((function(_){i.appendChild(_)})),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)(t));var a=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.cf)(o.innerHTML);(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domInsertBefore)(a,o),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)(o),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.re)(_);var s=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.gpeByClass)("post",_),l=s?(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(s,"post-id"):"";if(l){var n="feed"===cur.module&&feed?feed.getModuleRef():cur.module;(0,_lib_stats__WEBPACK_IMPORTED_MODULE_25__.statlogsValueEvent)("post_activity","expand_attach",l,n)}}return e&&(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.cancelEvent)(e)},showLoginBox:()=>((0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showBox)("al_login.php",{act:"box"}),!1),showUnblurBox(_,e,o,i,t){var a=(0,_lib_message_box__WEBPACK_IMPORTED_MODULE_21__.showFastBox)({title:_},e,(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("photos_restriction_button_watch"),(function(_){Page.unblurPhoto(o,i,_,(function(){a.hide(),t&&t()}))}),(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("global_cancel"))},unblurPhoto(_,e,o,i){ajax.post("al_photos.php",{act:"unblur",photo_raw:_,hash:e},{showProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.lockButton)(o),hideProgress:()=>(0,_web_lib_ui__WEBPACK_IMPORTED_MODULE_22__.unlockButton)(o),onDone:function(e,o){if((e?document.querySelectorAll(".PhotosRestriction--blur, .PostPhotoRestriction--blur, .PostPhotoRestriction--blurWithText"):document.querySelectorAll(`.PhotosRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blur[data-photo-id='${_}'], .PostPhotoRestriction--blurWithText[data-photo-id='${_}']`)).forEach((function(e){var i=e.getAttribute("data-photo-id"),t=parseInt(e.getAttribute("data-restriction-type"));if(i===_||Array.isArray(o)&&o.includes(t)){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(e,"PhotosRestriction--blur"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(e,"PostPhotoRestriction--blur"),(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(e,"PostPhotoRestriction--blurWithText");var a=e.querySelector(".PostPhotoRestriction__blurTitle"),s=e.querySelector(".PostPhotoRestriction__blurButton");a&&a.parentNode.removeChild(a),s&&s.parentNode.removeChild(s)}})),(0,_web_photos_photo_restriction_blur_global_state__WEBPACK_IMPORTED_MODULE_34__.addPhotoUnblurred)(_),cur.pvPhoto&&cur.pvCurData&&cur.pvCurData.photoRaw===_){(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.removeClass)(cur.pvPhoto,"ZPhotosRestriction--blur");var t=cur.pvPhoto.querySelector(".ZPhotosRestriction__title"),a=cur.pvPhoto.querySelector(".ZPhotosRestriction__text"),s=cur.pvPhoto.querySelector(".ZPhotosRestriction__button");t&&t.parentNode.removeChild(t),a&&a.parentNode.removeChild(a),s&&s.parentNode.removeChild(s),cur.pvCurData.restrictionBlur=!1,window.Photoview&&window.Photoview.doShow()}i&&i()}})},playVkFestBanner(){window.onDomReady((function(){setTimeout((function(){!function(){var _=(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.ge)("vk_fest_2020_banner_video");if(_){var e={video:(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.domData)(_,"video"),module:currentModule()};(0,_lib_video__WEBPACK_IMPORTED_MODULE_27__.showInlineVideo)(e.video,"",{autoplay:1,no_progress:1,cache:1,addParams:e},!1,_)}}()}))}))},showGroupCallsOnboardingTooltip(){var _=_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.get("group_calls_tooltip_shown")||0;_<=2&&!cur.groupCallsTooltip&&"im"!==cur.module&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("side_bar")&&(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.isVisible)("side_bar_inner")&&!cur.introTooltipShow&&setTimeout((function(){_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("group_calls_tooltip_shown",_+1);var e=()=>{cur.groupCallsTooltip&&cur.groupCallsTooltip.destroy(),_shared_lib_ls__WEBPACK_IMPORTED_MODULE_23__.default.set("group_calls_tooltip_shown",999)};cur.groupCallsTooltip=new ElementTooltip("l_msg",{autoShow:!1,content:(0,_web_lib_lang__WEBPACK_IMPORTED_MODULE_29__.getLang)("mail_group_calls_sidebar_tt"),cls:"feature_intro_tt feature_intro_blue_tt",forceSide:"right",width:228,appendTo:(0,_lib_dom__WEBPACK_IMPORTED_MODULE_10__.geByTag1)("body"),offset:[7,0,0],onHide:function(){cur.groupCallsTooltip&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(cur.groupCallsTooltip._ttel,"click",e),cur.groupCallsTooltip.destroy())}}),cur.groupCallsTooltip.show(),(0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.addEvent)(cur.groupCallsTooltip._ttel,"click",e),cur.destroy.push((function(){cur.groupCallsTooltip&&((0,_web_lib_dom_events__WEBPACK_IMPORTED_MODULE_13__.removeEvent)(cur.groupCallsTooltip._ttel,"click",e),cur.groupCallsTooltip.destroy())}))}),1e3)}};const __WEBPACK_DEFAULT_EXPORT__=Page},870900:(_,e,o)=>{"use strict";o.d(e,{showPageMembersBox:()=>a});var i=o(49535),t=o(654612);function a(_,e,o){return window.cur.viewAsBox?(window.cur.viewAsBox(),(0,i.cancelEvent)(o)):!(0,t.showTabbedBox)("al_page.php",{act:"box",oid:_,tab:e},{cache:1},o)}}}]);try{stManager.done("dist/7850838909a69c37f9ed241792459b02.8716541658075b7c1e7c.js")}catch(_){}