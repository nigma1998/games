/*! For license information please see 11c7a0efa74f6d488cf4ce0ffbe4d05a.e8757e4156d0d9bd789e.js.LICENSE.txt */
(self.webpackChunkvk=self.webpackChunkvk||[]).push([[79542],{710409:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon16Chevron","chevron_16","0 0 12 16",'<symbol xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 12 16" id="chevron_16"><path fill="currentColor" d="M7.227 8 3.864 4.636a.9.9 0 0 1 1.272-1.272l4 4a.9.9 0 0 1 0 1.272l-4 4a.9.9 0 0 1-1.272-1.272L7.227 8Z" /></symbol>',12,16)},671269:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon20ChevronRightOutline","chevron_right_outline_20","0 0 20 20",'<symbol viewBox="0 0 20 20" fill="none" xmlns="http://www.w3.org/2000/svg" id="chevron_right_outline_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.47 4.217a.75.75 0 0 0 0 1.06L12.185 10l-4.716 4.72a.75.75 0 1 0 1.062 1.06l5.245-5.25a.75.75 0 0 0 0-1.061L8.531 4.218a.75.75 0 0 0-1.061-.001z" fill="currentColor" /></symbol>',20,20)},585561:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon20DeleteOutline","delete_outline_20","0 0 20 20",'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="delete_outline_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M7.697 6.502a.75.75 0 0 0-.695.801l.5 7a.75.75 0 0 0 1.496-.106l-.5-7a.75.75 0 0 0-.801-.695zm4.606 0a.75.75 0 0 1 .695.801l-.5 7a.75.75 0 0 1-1.496-.106l.5-7a.75.75 0 0 1 .801-.695z" fill="currentColor" /><path fill-rule="evenodd" clip-rule="evenodd" d="M2.25 3a.75.75 0 0 0 0 1.5h1.066l.958 10.44c.045.489.083.898.14 1.233.06.35.15.675.331.98.279.47.691.846 1.185 1.08.32.153.652.213 1.006.24.338.027.75.027 1.24.027h3.647c.491 0 .903 0 1.24-.026.355-.028.687-.088 1.007-.24a2.75 2.75 0 0 0 1.185-1.081c.18-.305.27-.63.33-.98.058-.335.096-.744.14-1.233l.96-10.44h1.065a.75.75 0 0 0 0-1.5h-4.587a3.251 3.251 0 0 0-6.326 0H2.25zm3.516 11.774c.048.525.08.876.127 1.145.044.26.093.385.142.469.127.213.314.384.539.49.087.043.216.08.48.1.272.021.624.022 1.151.022h3.59c.527 0 .879 0 1.152-.022.263-.02.392-.057.48-.1a1.25 1.25 0 0 0 .538-.49c.05-.084.098-.209.142-.469.046-.27.08-.62.127-1.145L15.178 4.5H4.822l.944 10.274zM10 2c-.698 0-1.3.409-1.582 1h3.164A1.75 1.75 0 0 0 10 2z" fill="currentColor" /></symbol>',20,20)},594941:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon20MessagesOutline","messages_outline_20","0 0 20 20",'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="messages_outline_20"><path fill-rule="evenodd" clip-rule="evenodd" d="M8 2C4.44 2 1.5 4.518 1.5 7.754c0 1.084.336 2.12.954 3.014-.094.407-.361 1.038-.82 1.877a1.08 1.08 0 0 0 .46 1.483c.167.086.352.127.538.121 1.426-.041 2.563-.365 3.366-1.015.64.18 1.313.274 2.002.274 3.56 0 6.5-2.518 6.5-5.754C14.5 4.518 11.56 2 8 2zm0 1.5c-2.917 0-5 2.02-5 4.254 0 .788.25 1.55.726 2.216l.134.188a.75.75 0 0 1 .128.572l-.042.226c-.09.49-.324 1.087-.648 1.742.873-.107 1.438-.357 1.795-.662l.24-.206a.75.75 0 0 1 .701-.15l.308.092c.523.155 1.08.236 1.658.236 2.917 0 5-2.02 5-4.254C13 5.52 10.917 3.5 8 3.5z" fill="currentColor" /><path d="M16.157 8.575a.75.75 0 1 1 1.187-.916 5.455 5.455 0 0 1 1.156 3.345 5.42 5.42 0 0 1-.914 3.008c.088.411.346 1.049.789 1.895a1.089 1.089 0 0 1-.992 1.593c-1.363-.042-2.456-.363-3.231-1.01a6.808 6.808 0 0 1-1.902.268 6.733 6.733 0 0 1-2.57-.5.75.75 0 0 1 .572-1.388 5.22 5.22 0 0 0 1.998.388c.546 0 1.073-.08 1.568-.233l.294-.092a.75.75 0 0 1 .722.158l.23.206c.33.294.85.538 1.652.646-.311-.657-.535-1.253-.622-1.743l-.04-.225a.75.75 0 0 1 .12-.554l.129-.188a3.925 3.925 0 0 0 .697-2.23c0-.894-.306-1.733-.843-2.429z" fill="currentColor" /></symbol>',20,20)},714226:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon20RemoveCircleOutline","remove_circle_outline_20","0 0 20 20",'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 20 20" id="remove_circle_outline_20"><g fill="currentColor"><path d="M6.75 9.25a.75.75 0 0 0 0 1.5h6.5a.75.75 0 0 0 0-1.5z" /><path clip-rule="evenodd" d="M10 18.5a8.5 8.5 0 1 0 0-17 8.5 8.5 0 0 0 0 17zm7-8.5a7 7 0 1 1-14 0 7 7 0 0 1 14 0z" fill-rule="evenodd" /></g></symbol>',20,20)},150591:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon20ShareOutline","share_outline_20","0 0 20 20",'<symbol fill="none" viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="share_outline_20"><path clip-rule="evenodd" d="M9.764 4.753a.25.25 0 0 1 .402-.198l6.742 5.247a.25.25 0 0 1 0 .395l-6.747 5.25a.25.25 0 0 1-.402-.198v-3.136a.75.75 0 0 0-.75-.75c-2.456 0-4.342.913-5.832 2.197.266-1.454.824-2.577 1.57-3.426 1.066-1.212 2.58-1.941 4.385-2.228a.75.75 0 0 0 .632-.741zm1.324-1.381c-1.15-.895-2.824-.075-2.824 1.38v1.791c-1.81.394-3.434 1.225-4.643 2.6-1.352 1.538-2.117 3.68-2.117 6.445a.75.75 0 0 0 1.329.477c1.362-1.655 3.059-2.942 5.426-3.167v2.35c0 1.456 1.674 2.277 2.823 1.382l6.747-5.25c.9-.7.9-2.061 0-2.762z" fill="currentColor" fill-rule="evenodd" /></symbol>',20,20)},986818:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon20UserOutline","user_outline_20","0 0 20 20",'<symbol viewBox="0 0 20 20" xmlns="http://www.w3.org/2000/svg" id="user_outline_20"><g fill="none" fill-rule="evenodd"><path opacity=".1" d="M0 0h20v20H0z" /><path d="M12.5 5a2.5 2.5 0 1 0-5 0 2.5 2.5 0 1 0 5 0ZM14 5a4 4 0 0 1-4 4 4 4 0 0 1-4-4 4 4 0 0 1 4-4 4 4 0 0 1 4 4ZM4 15.5c0 .715.358 1 1 1h10c.642 0 1-.285 1-1 0-2.333-2.567-3.5-6-3.5s-6 1.167-6 3.5Zm-1.5 0c0-3.485 3.333-5 7.5-5s7.5 1.515 7.5 5c0 1.628-1.095 2.5-2.5 2.5H5c-1.405 0-2.5-.872-2.5-2.5Z" fill="currentColor" fill-rule="nonzero" /></g></symbol>',20,20)},774877:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon24DocumentOutline","document_outline_24","0 0 24 24",'<symbol viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" id="document_outline_24"><path d="M13.25 3.753H7.47c-1.2 0-2.169.928-2.169 2.065v11.764c0 1.137.968 2.065 2.17 2.065h9.209c1.2 0 2.169-.927 2.169-2.065V10.9h-2.274a3.325 3.325 0 0 1-3.325-3.325V3.753Zm1.775 4.197c0 .649.526 1.175 1.175 1.175h2.317l-3.492-3.97V7.95ZM3.5 5.818C3.5 3.706 5.28 2 7.47 2h5.921c.78 0 1.52.33 2.026.904L20.02 8.14c.406.461.629 1.047.629 1.653v7.79c0 2.111-1.78 3.817-3.97 3.817H7.47c-2.19 0-3.97-1.706-3.97-3.818V5.818Z" fill="currentColor" /></symbol>',24,24)},84343:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon24MessageArrowRightOutline","message_arrow_right_outline_24","0 0 24 24",'<symbol fill="none" viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="message_arrow_right_outline_24"><g clip-rule="evenodd" fill="currentColor" fill-rule="evenodd"><path d="M12.016 4.9c-3.077 0-5.702 1.444-7.065 3.5a.9.9 0 0 1-1.5-.995C5.178 4.799 8.395 3.1 12.016 3.1c5.324 0 9.884 3.729 9.884 8.607 0 4.878-4.56 8.607-9.884 8.607-1.173 0-2.3-.178-3.348-.506C7.42 20.961 5.616 21.513 3.42 21.6c-.927.036-1.598-.927-1.209-1.792.529-1.183 1.197-2.403 1.298-3.72a8.205 8.205 0 0 1-.34-.54.9.9 0 0 1 1.56-.898c.124.216.262.426.413.629a.9.9 0 0 1 .177.537c0 1.38-.54 2.684-1.099 3.92 1.714-.194 2.835-.75 3.513-1.547a.9.9 0 0 1 1.002-.26c1 .376 2.11.586 3.28.586 4.6 0 8.085-3.172 8.085-6.807 0-3.635-3.485-6.807-8.084-6.807z" /><path d="M10.864 8.264a.9.9 0 0 1 1.272 0l2.6 2.6a.9.9 0 0 1 0 1.272l-2.6 2.6a.9.9 0 0 1-1.272-1.272l1.063-1.064H2.9a.9.9 0 1 1 0-1.8h9.027l-1.063-1.064a.9.9 0 0 1 0-1.272z" /></g></symbol>',24,24)},650485:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon24MoreHorizontal","more_horizontal_24","0 0 24 24",'<symbol viewBox="0 0 24 24" xmlns="http://www.w3.org/2000/svg" id="more_horizontal_24"><g fill="none" fill-rule="evenodd"><path d="M24 0H0v24h24z" /><path d="M18 10c1.1 0 2 .9 2 2s-.9 2-2 2-2-.9-2-2 .9-2 2-2Zm-6 4c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Zm-6 0c-1.1 0-2-.9-2-2s.9-2 2-2 2 .9 2 2-.9 2-2 2Z" fill="currentColor" /></g></symbol>',24,24)},354629:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=(0,n(951201).makeIcon)("Icon32Play","play_32","0 0 32 32",'<symbol fill="none" xmlns="http://www.w3.org/2000/svg" viewBox="0 0 32 32" id="play_32"><path d="M24.948 14.001c1.154.656 1.732.984 1.925 1.412.17.374.17.8 0 1.174-.194.428-.77.756-1.925 1.412l-12.43 7.061c-1.154.656-1.732.984-2.205.935a1.471 1.471 0 0 1-1.033-.587C9 25.03 9 24.373 9 23.061V8.938c0-1.311 0-1.967.28-2.347.244-.33.62-.543 1.033-.586.473-.05 1.05.279 2.205.935L24.948 14z" fill="currentColor" /></symbol>',32,32)},602314:(e,t,n)=>{"use strict";n.d(t,{IconSettingsContext:()=>o});var r=n(667294);var o=r.createContext({})},951201:(e,t,n)=>{"use strict";n.d(t,{makeIcon:()=>v});var r=n(667294),o=n(887854),a=n.n(o),i=n(602314),s=n(428823);function c(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function u(){return u=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},u.apply(this,arguments)}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{},r=Object.keys(n);"function"==typeof Object.getOwnPropertySymbols&&(r=r.concat(Object.getOwnPropertySymbols(n).filter((function(e){return Object.getOwnPropertyDescriptor(n,e).enumerable})))),r.forEach((function(t){c(e,t,n[t])}))}return e}function d(e,t){return t=null!=t?t:{},Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(t)):function(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}(Object(t)).forEach((function(n){Object.defineProperty(e,n,Object.getOwnPropertyDescriptor(t,n))})),e}function f(e,t){if(null==e)return{};var n,r,o=function(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}(e,t);if(Object.getOwnPropertySymbols){var a=Object.getOwnPropertySymbols(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(o[n]=e[n])}return o}var p={display:"block"};var m=function(e){var t=e.width,n=e.height,o=e.viewBox,a=e.id,s=e.className,c=void 0===s?"":s,m=e.style,v=void 0===m?{}:m,h=e.fill,g=e.getRootRef,b=e.Component,y=void 0===b?"div":b,w=e.role,_=e["aria-label"],k=e["aria-hidden"],C=f(e,["width","height","viewBox","id","className","style","fill","getRootRef","Component","role","aria-label","aria-hidden"]),E=Math.max(t,n),I=r.useContext(i.IconSettingsContext),x=function(e,t){for(var n=t.classPrefix,r=t.globalClasses,o="",a=0;a<e.length;a++)n&&(o+=" "+(n+e[a])),n&&!r||(o+=" "+e[a]);return o}(["Icon","Icon--".concat(E),"Icon--w-".concat(t),"Icon--h-".concat(n),"Icon--".concat(a)],I);return r.createElement(y,u({role:"presentation"},C,{ref:g,className:"".concat(x," ").concat(c),style:d(l({},v),{width:t,height:n})}),r.createElement("svg",{viewBox:o,width:t,height:n,style:p,role:w,"aria-label":_,"aria-hidden":k},r.createElement("use",{xlinkHref:"#".concat(a),style:{fill:"currentColor",color:h}})))};function v(e,t,n,o,i,c){var l=!1;function d(){l||((0,s.addSpriteSymbol)(new(a())({id:t,viewBox:n,content:o})),l=!0)}var f=function(e){return(0,s.useIsomorphicLayoutEffect)(d,[]),r.createElement(m,u({},e,{viewBox:n,id:t,width:isNaN(e.width)?i:+e.width,height:isNaN(e.height)?c:+e.height}))};return f.mountIcon=d,f.displayName=e,f}},428823:(e,t,n)=>{"use strict";n.d(t,{addSpriteSymbol:()=>l,useIsomorphicLayoutEffect:()=>d});var r,o=n(362548),a=n.n(o),i=n(667294),s=!("undefined"==typeof window||!window.document||!window.document.createElement);if(s){var c="__SVG_SPRITE_NODE__";r=new(a())({attrs:{id:c}});var u=function(){var e=document.getElementById(c);e?r.attach(e):r.mount(),document.removeEventListener("DOMContentLoaded",u)};document.querySelector("body")?u():document.addEventListener("DOMContentLoaded",u)}else r=null;function l(e){r&&r.add(e)}var d=s?i.useLayoutEffect:i.useEffect},254632:(e,t,n)=>{"use strict";n.d(t,{useInView:()=>l});var r=n(667294);const o=new Map,a=new WeakMap;let i,s=0;function c(e){return Object.keys(e).sort().filter((t=>void 0!==e[t])).map((t=>{return`${t}_${"root"===t?(n=e.root,n?(a.has(n)||(s+=1,a.set(n,s.toString())),a.get(n)):"0"):e[t]}`;var n})).toString()}function u(e,t,n={},r=i){if(void 0===window.IntersectionObserver&&void 0!==r){const o=e.getBoundingClientRect();return t(r,{isIntersecting:r,target:e,intersectionRatio:"number"==typeof n.threshold?n.threshold:0,time:0,boundingClientRect:o,intersectionRect:o,rootBounds:o}),()=>{}}const{id:a,observer:s,elements:u}=function(e){let t=c(e),n=o.get(t);if(!n){const r=new Map;let a;const i=new IntersectionObserver((t=>{t.forEach((t=>{var n;const o=t.isIntersecting&&a.some((e=>t.intersectionRatio>=e));e.trackVisibility&&void 0===t.isVisible&&(t.isVisible=o),null==(n=r.get(t.target))||n.forEach((e=>{e(o,t)}))}))}),e);a=i.thresholds||(Array.isArray(e.threshold)?e.threshold:[e.threshold||0]),n={id:t,observer:i,elements:r},o.set(t,n)}return n}(n);let l=u.get(e)||[];return u.has(e)||u.set(e,l),l.push(t),s.observe(e),function(){l.splice(l.indexOf(t),1),0===l.length&&(u.delete(e),s.unobserve(e)),0===u.size&&(s.disconnect(),o.delete(a))}}r.Component;function l({threshold:e,delay:t,trackVisibility:n,rootMargin:o,root:a,triggerOnce:i,skip:s,initialInView:c,fallbackInView:l,onChange:d}={}){const f=r.useRef(),p=r.useRef(),[m,v]=r.useState({inView:!!c});p.current=d;const h=r.useCallback((r=>{void 0!==f.current&&(f.current(),f.current=void 0),s||r&&(f.current=u(r,((e,t)=>{v({inView:e,entry:t}),p.current&&p.current(e,t),t.isIntersecting&&i&&f.current&&(f.current(),f.current=void 0)}),{root:a,rootMargin:o,threshold:e,trackVisibility:n,delay:t},l))}),[Array.isArray(e)?e.toString():e,a,o,i,s,n,l,t]);r.useEffect((()=>{f.current||!m.entry||i||s||v({inView:!!c})}));const g=[h,m.inView,m.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}},47861:()=>{},998899:()=>{},153249:()=>{},849204:()=>{},712433:()=>{},966773:()=>{},202532:()=>{},556750:()=>{},603709:()=>{},779961:()=>{},410131:()=>{},606143:()=>{},581753:()=>{},997864:function(e){"undefined"!=typeof self&&self,e.exports=function(e){var t={};function n(r){if(t[r])return t[r].exports;var o=t[r]={i:r,l:!1,exports:{}};return e[r].call(o.exports,o,o.exports,n),o.l=!0,o.exports}return n.m=e,n.c=t,n.d=function(e,t,r){n.o(e,t)||Object.defineProperty(e,t,{configurable:!1,enumerable:!0,get:r})},n.r=function(e){Object.defineProperty(e,"__esModule",{value:!0})},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=0)}([function(e,t,n){"use strict";function r(e){if(!(this instanceof r))return new r(e);this._=e}var o=r.prototype;function a(e,t){for(var n=0;n<e;n++)t(n)}function i(e,t,n){return function(e,t){a(t.length,(function(n){e(t[n],n,t)}))}((function(n,r,o){t=e(t,n,r,o)}),n),t}function s(e,t){return i((function(t,n,r,o){return t.concat([e(n,r,o)])}),[],t)}function c(e,t){var n={v:0,buf:t};return a(e,(function(){var e;n={v:n.v<<1|(e=n.buf,e[0]>>7),buf:function(e){var t=i((function(e,t,n,r){return e.concat(n===r.length-1?Buffer.from([t,0]).readUInt16BE(0):r.readUInt16BE(n))}),[],e);return Buffer.from(s((function(e){return(e<<1&65535)>>8}),t))}(n.buf)}})),n}function u(){return"undefined"!=typeof Buffer}function l(){if(!u())throw new Error("Buffer global does not exist; please use webpack if you need to parse Buffers in the browser.")}function d(e){l();var t=i((function(e,t){return e+t}),0,e);if(t%8!=0)throw new Error("The bits ["+e.join(", ")+"] add up to "+t+" which is not an even number of bytes; the total should be divisible by 8");var n,o=t/8,a=(n=function(e){return e>48},i((function(e,t){return e||(n(t)?t:e)}),null,e));if(a)throw new Error(a+" bit range requested exceeds 48 bit (6 byte) Number max.");return new r((function(t,n){var r=o+n;return r>t.length?k(n,o.toString()+" bytes"):_(r,i((function(e,t){var n=c(t,e.buf);return{coll:e.coll.concat(n.v),buf:n.buf}}),{coll:[],buf:t.slice(n,r)},e).coll)}))}function f(e,t){return new r((function(n,r){return l(),r+t>n.length?k(r,t+" bytes for "+e):_(r+t,n.slice(r,r+t))}))}function p(e,t){if("number"!=typeof(n=t)||Math.floor(n)!==n||t<0||t>6)throw new Error(e+" requires integer length in range [0, 6].");var n}function m(e){return p("uintBE",e),f("uintBE("+e+")",e).map((function(t){return t.readUIntBE(0,e)}))}function v(e){return p("uintLE",e),f("uintLE("+e+")",e).map((function(t){return t.readUIntLE(0,e)}))}function h(e){return p("intBE",e),f("intBE("+e+")",e).map((function(t){return t.readIntBE(0,e)}))}function g(e){return p("intLE",e),f("intLE("+e+")",e).map((function(t){return t.readIntLE(0,e)}))}function b(e){return e instanceof r}function y(e){return"[object Array]"==={}.toString.call(e)}function w(e){return u()&&Buffer.isBuffer(e)}function _(e,t){return{status:!0,index:e,value:t,furthest:-1,expected:[]}}function k(e,t){return y(t)||(t=[t]),{status:!1,index:-1,value:null,furthest:e,expected:t}}function C(e,t){if(!t)return e;if(e.furthest>t.furthest)return e;var n=e.furthest===t.furthest?function(e,t){if(function(){if(void 0!==r._supportsSet)return r._supportsSet;var e="undefined"!=typeof Set;return r._supportsSet=e,e}()&&Array.from){for(var n=new Set(e),o=0;o<t.length;o++)n.add(t[o]);var a=Array.from(n);return a.sort(),a}for(var i={},s=0;s<e.length;s++)i[e[s]]=!0;for(var c=0;c<t.length;c++)i[t[c]]=!0;var u=[];for(var l in i)({}).hasOwnProperty.call(i,l)&&u.push(l);return u.sort(),u}(e.expected,t.expected):t.expected;return{status:e.status,index:e.index,value:e.value,furthest:t.furthest,expected:n}}var E={};function I(e,t){if(w(e))return{offset:t,line:-1,column:-1};e in E||(E[e]={});for(var n=E[e],r=0,o=0,a=0,i=t;i>=0;){if(i in n){r=n[i].line,0===a&&(a=n[i].lineStart);break}("\n"===e.charAt(i)||"\r"===e.charAt(i)&&"\n"!==e.charAt(i+1))&&(o++,0===a&&(a=i+1)),i--}var s=r+o,c=t-a;return n[t]={line:s,lineStart:a},{offset:t,line:s+1,column:c+1}}function x(e){if(!b(e))throw new Error("not a parser: "+e)}function O(e,t){return"string"==typeof e?e.charAt(t):e[t]}function A(e){if("number"!=typeof e)throw new Error("not a number: "+e)}function M(e){if("function"!=typeof e)throw new Error("not a function: "+e)}function P(e){if("string"!=typeof e)throw new Error("not a string: "+e)}var S=2,j=3,N=8,L=5*N,D=4*N,R="  ";function T(e,t){return new Array(t+1).join(e)}function U(e,t,n){var r=t-e.length;return r<=0?e:T(n,r)+e}function B(e,t,n,r){return{from:e-t>0?e-t:0,to:e+n>r?r:e+n}}function q(e,t){var n,r,o,a,c,u=t.index,l=u.offset,d=1;if(l===e.length)return"Got the end of the input";if(w(e)){var f=l-l%N,p=l-f,m=B(f,L,D+N,e.length),v=s((function(e){return s((function(e){return U(e.toString(16),2,"0")}),e)}),function(e,t){var n=e.length,r=[],o=0;if(n<=t)return[e.slice()];for(var a=0;a<n;a++)r[o]||r.push([]),r[o].push(e[a]),(a+1)%t==0&&o++;return r}(e.slice(m.from,m.to).toJSON().data,N));a=function(e){return 0===e.from&&1===e.to?{from:e.from,to:e.to}:{from:e.from/N,to:Math.floor(e.to/N)}}(m),r=f/N,n=3*p,p>=4&&(n+=1),d=2,o=s((function(e){return e.length<=4?e.join(" "):e.slice(0,4).join(" ")+"  "+e.slice(4).join(" ")}),v),(c=(8*(a.to>0?a.to-1:a.to)).toString(16).length)<2&&(c=2)}else{var h=e.split(/\r\n|[\n\r\u2028\u2029]/);n=u.column-1,r=u.line-1,a=B(r,S,j,h.length),o=h.slice(a.from,a.to),c=a.to.toString().length}var g=r-a.from;return w(e)&&(c=(8*(a.to>0?a.to-1:a.to)).toString(16).length)<2&&(c=2),i((function(t,r,o){var i,s=o===g,u=s?"> ":R;return i=w(e)?U((8*(a.from+o)).toString(16),c,"0"):U((a.from+o+1).toString(),c," "),[].concat(t,[u+i+" | "+r],s?[R+T(" ",c)+" | "+U("",n," ")+T("^",d)]:[])}),[],o).join("\n")}function z(e,t){return["\n","-- PARSING FAILED "+T("-",50),"\n\n",q(e,t),"\n\n",(n=t.expected,1===n.length?"Expected:\n\n"+n[0]:"Expected one of the following: \n\n"+n.join(", ")),"\n"].join("");var n}function F(e){return void 0!==e.flags?e.flags:[e.global?"g":"",e.ignoreCase?"i":"",e.multiline?"m":"",e.unicode?"u":"",e.sticky?"y":""].join("")}function G(){for(var e=[].slice.call(arguments),t=e.length,n=0;n<t;n+=1)x(e[n]);return r((function(n,r){for(var o,a=new Array(t),i=0;i<t;i+=1){if(!(o=C(e[i]._(n,r),o)).status)return o;a[i]=o.value,r=o.index}return C(_(r,a),o)}))}function V(){var e=[].slice.call(arguments);if(0===e.length)throw new Error("seqMap needs at least one argument");var t=e.pop();return M(t),G.apply(null,e).map((function(e){return t.apply(null,e)}))}function H(){var e=[].slice.call(arguments),t=e.length;if(0===t)return Q("zero alternates");for(var n=0;n<t;n+=1)x(e[n]);return r((function(t,n){for(var r,o=0;o<e.length;o+=1)if((r=C(e[o]._(t,n),r)).status)return r;return r}))}function K(e,t){return W(e,t).or(Z([]))}function W(e,t){return x(e),x(t),V(e,t.then(e).many(),(function(e,t){return[e].concat(t)}))}function $(e){P(e);var t="'"+e+"'";return r((function(n,r){var o=r+e.length,a=n.slice(r,o);return a===e?_(o,a):k(r,t)}))}function Y(e,t){!function(e){if(!(e instanceof RegExp))throw new Error("not a regexp: "+e);for(var t=F(e),n=0;n<t.length;n++){var r=t.charAt(n);if("i"!==r&&"m"!==r&&"u"!==r&&"s"!==r)throw new Error('unsupported regexp flag "'+r+'": '+e)}}(e),arguments.length>=2?A(t):t=0;var n=function(e){return RegExp("^(?:"+e.source+")",F(e))}(e),o=""+e;return r((function(e,r){var a=n.exec(e.slice(r));if(a){if(0<=t&&t<=a.length){var i=a[0],s=a[t];return _(r+i.length,s)}return k(r,"valid match group (0 to "+a.length+") in "+o)}return k(r,o)}))}function Z(e){return r((function(t,n){return _(n,e)}))}function Q(e){return r((function(t,n){return k(n,e)}))}function J(e){if(b(e))return r((function(t,n){var r=e._(t,n);return r.index=n,r.value="",r}));if("string"==typeof e)return J($(e));if(e instanceof RegExp)return J(Y(e));throw new Error("not a string, regexp, or parser: "+e)}function X(e){return x(e),r((function(t,n){var r=e._(t,n),o=t.slice(n,r.index);return r.status?k(n,'not "'+o+'"'):_(n,null)}))}function ee(e){return M(e),r((function(t,n){var r=O(t,n);return n<t.length&&e(r)?_(n+1,r):k(n,"a character/byte matching "+e)}))}function te(e,t){arguments.length<2&&(t=e,e=void 0);var n=r((function(e,r){return n._=t()._,n._(e,r)}));return e?n.desc(e):n}function ne(){return Q("fantasy-land/empty")}o.parse=function(e){if("string"!=typeof e&&!w(e))throw new Error(".parse must be called with a string or Buffer as its argument");var t,n=this.skip(ie)._(e,0);return t=n.status?{status:!0,value:n.value}:{status:!1,index:I(e,n.furthest),expected:n.expected},delete E[e],t},o.tryParse=function(e){var t=this.parse(e);if(t.status)return t.value;var n=z(e,t),r=new Error(n);throw r.type="ParsimmonError",r.result=t,r},o.assert=function(e,t){return this.chain((function(n){return e(n)?Z(n):Q(t)}))},o.or=function(e){return H(this,e)},o.trim=function(e){return this.wrap(e,e)},o.wrap=function(e,t){return V(e,this,t,(function(e,t){return t}))},o.thru=function(e){return e(this)},o.then=function(e){return x(e),G(this,e).map((function(e){return e[1]}))},o.many=function(){var e=this;return r((function(t,n){for(var r=[],o=void 0;;){if(!(o=C(e._(t,n),o)).status)return C(_(n,r),o);if(n===o.index)throw new Error("infinite loop detected in .many() parser --- calling .many() on a parser which can accept zero characters is usually the cause");n=o.index,r.push(o.value)}}))},o.tieWith=function(e){return P(e),this.map((function(t){if(function(e){if(!y(e))throw new Error("not an array: "+e)}(t),t.length){P(t[0]);for(var n=t[0],r=1;r<t.length;r++)P(t[r]),n+=e+t[r];return n}return""}))},o.tie=function(){return this.tieWith("")},o.times=function(e,t){var n=this;return arguments.length<2&&(t=e),A(e),A(t),r((function(r,o){for(var a=[],i=void 0,s=void 0,c=0;c<e;c+=1){if(s=C(i=n._(r,o),s),!i.status)return s;o=i.index,a.push(i.value)}for(;c<t&&(s=C(i=n._(r,o),s),i.status);c+=1)o=i.index,a.push(i.value);return C(_(o,a),s)}))},o.result=function(e){return this.map((function(){return e}))},o.atMost=function(e){return this.times(0,e)},o.atLeast=function(e){return V(this.times(e),this.many(),(function(e,t){return e.concat(t)}))},o.map=function(e){M(e);var t=this;return r((function(n,r){var o=t._(n,r);return o.status?C(_(o.index,e(o.value)),o):o}))},o.contramap=function(e){M(e);var t=this;return r((function(n,r){var o=t.parse(e(n.slice(r)));return o.status?_(r+n.length,o.value):o}))},o.promap=function(e,t){return M(e),M(t),this.contramap(e).map(t)},o.skip=function(e){return G(this,e).map((function(e){return e[0]}))},o.mark=function(){return V(re,this,re,(function(e,t,n){return{start:e,value:t,end:n}}))},o.node=function(e){return V(re,this,re,(function(t,n,r){return{name:e,value:n,start:t,end:r}}))},o.sepBy=function(e){return K(this,e)},o.sepBy1=function(e){return W(this,e)},o.lookahead=function(e){return this.skip(J(e))},o.notFollowedBy=function(e){return this.skip(X(e))},o.desc=function(e){y(e)||(e=[e]);var t=this;return r((function(n,r){var o=t._(n,r);return o.status||(o.expected=e),o}))},o.fallback=function(e){return this.or(Z(e))},o.ap=function(e){return V(e,this,(function(e,t){return e(t)}))},o.chain=function(e){var t=this;return r((function(n,r){var o=t._(n,r);return o.status?C(e(o.value)._(n,o.index),o):o}))},o.concat=o.or,o.empty=ne,o.of=Z,o["fantasy-land/ap"]=o.ap,o["fantasy-land/chain"]=o.chain,o["fantasy-land/concat"]=o.concat,o["fantasy-land/empty"]=o.empty,o["fantasy-land/of"]=o.of,o["fantasy-land/map"]=o.map;var re=r((function(e,t){return _(t,I(e,t))})),oe=r((function(e,t){return t>=e.length?k(t,"any character/byte"):_(t+1,O(e,t))})),ae=r((function(e,t){return _(e.length,e.slice(t))})),ie=r((function(e,t){return t<e.length?k(t,"EOF"):_(t,null)})),se=Y(/[0-9]/).desc("a digit"),ce=Y(/[0-9]*/).desc("optional digits"),ue=Y(/[a-z]/i).desc("a letter"),le=Y(/[a-z]*/i).desc("optional letters"),de=Y(/\s*/).desc("optional whitespace"),fe=Y(/\s+/).desc("whitespace"),pe=$("\r"),me=$("\n"),ve=$("\r\n"),he=H(ve,me,pe).desc("newline"),ge=H(he,ie);r.all=ae,r.alt=H,r.any=oe,r.cr=pe,r.createLanguage=function(e){var t={};for(var n in e)({}).hasOwnProperty.call(e,n)&&function(n){t[n]=te((function(){return e[n](t)}))}(n);return t},r.crlf=ve,r.custom=function(e){return r(e(_,k))},r.digit=se,r.digits=ce,r.empty=ne,r.end=ge,r.eof=ie,r.fail=Q,r.formatError=z,r.index=re,r.isParser=b,r.lazy=te,r.letter=ue,r.letters=le,r.lf=me,r.lookahead=J,r.makeFailure=k,r.makeSuccess=_,r.newline=he,r.noneOf=function(e){return ee((function(t){return e.indexOf(t)<0})).desc("none of '"+e+"'")},r.notFollowedBy=X,r.of=Z,r.oneOf=function(e){for(var t=e.split(""),n=0;n<t.length;n++)t[n]="'"+t[n]+"'";return ee((function(t){return e.indexOf(t)>=0})).desc(t)},r.optWhitespace=de,r.Parser=r,r.range=function(e,t){return ee((function(n){return e<=n&&n<=t})).desc(e+"-"+t)},r.regex=Y,r.regexp=Y,r.sepBy=K,r.sepBy1=W,r.seq=G,r.seqMap=V,r.seqObj=function(){for(var e,t={},n=0,o=(e=arguments,Array.prototype.slice.call(e)),a=o.length,i=0;i<a;i+=1){var s=o[i];if(!b(s)){if(y(s)&&2===s.length&&"string"==typeof s[0]&&b(s[1])){var c=s[0];if(Object.prototype.hasOwnProperty.call(t,c))throw new Error("seqObj: duplicate key "+c);t[c]=!0,n++;continue}throw new Error("seqObj arguments must be parsers or [string, parser] array pairs.")}}if(0===n)throw new Error("seqObj expects at least one named parser, found zero");return r((function(e,t){for(var n,r={},i=0;i<a;i+=1){var s,c;if(y(o[i])?(s=o[i][0],c=o[i][1]):(s=null,c=o[i]),!(n=C(c._(e,t),n)).status)return n;s&&(r[s]=n.value),t=n.index}return C(_(t,r),n)}))},r.string=$,r.succeed=Z,r.takeWhile=function(e){return M(e),r((function(t,n){for(var r=n;r<t.length&&e(O(t,r));)r++;return _(r,t.slice(n,r))}))},r.test=ee,r.whitespace=fe,r["fantasy-land/empty"]=ne,r["fantasy-land/of"]=Z,r.Binary={bitSeq:d,bitSeqObj:function(e){l();var t={},n=0,r=s((function(e){if(y(e)){var r=e;if(2!==r.length)throw new Error("["+r.join(", ")+"] should be length 2, got length "+r.length);if(P(r[0]),A(r[1]),Object.prototype.hasOwnProperty.call(t,r[0]))throw new Error("duplicate key in bitSeqObj: "+r[0]);return t[r[0]]=!0,n++,r}return A(e),[null,e]}),e);if(n<1)throw new Error("bitSeqObj expects at least one named pair, got ["+e.join(", ")+"]");var o=s((function(e){return e[0]}),r);return d(s((function(e){return e[1]}),r)).map((function(e){return i((function(e,t){return null!==t[0]&&(e[t[0]]=t[1]),e}),{},s((function(t,n){return[t,e[n]]}),o))}))},byte:function(e){if(l(),A(e),e>255)throw new Error("Value specified to byte constructor ("+e+"=0x"+e.toString(16)+") is larger in value than a single byte.");var t=(e>15?"0x":"0x0")+e.toString(16);return r((function(n,r){var o=O(n,r);return o===e?_(r+1,o):k(r,t)}))},buffer:function(e){return f("buffer",e).map((function(e){return Buffer.from(e)}))},encodedString:function(e,t){return f("string",t).map((function(t){return t.toString(e)}))},uintBE:m,uint8BE:m(1),uint16BE:m(2),uint32BE:m(4),uintLE:v,uint8LE:v(1),uint16LE:v(2),uint32LE:v(4),intBE:h,int8BE:h(1),int16BE:h(2),int32BE:h(4),intLE:g,int8LE:g(1),int16LE:g(2),int32LE:g(4),floatBE:f("floatBE",4).map((function(e){return e.readFloatBE(0)})),floatLE:f("floatLE",4).map((function(e){return e.readFloatLE(0)})),doubleBE:f("doubleBE",8).map((function(e){return e.readDoubleBE(0)})),doubleLE:f("doubleLE",8).map((function(e){return e.readDoubleLE(0)}))},e.exports=r}])},784970:(e,t,n)=>{"use strict";n.d(t,{usePrevious:()=>v,useDidUpdate:()=>h,useDebounced:()=>g,useOnline:()=>b,OnlinesProvider:()=>w,useDispatch:()=>_,DispatchProvider:()=>C,useUserSettings:()=>E,UserSettingsProvider:()=>x,useHelpHints:()=>O,HelpHintsProvider:()=>M,useTypings:()=>P,TypingsProvider:()=>j,usePixelDensity:()=>N,useNow:()=>L,usePeers:()=>D,PeersProvider:()=>T,useConvos:()=>U,ConvosProvider:()=>q,useFeatureFlags:()=>z,FeatureFlagsProvider:()=>G,useOwner:()=>V,OwnerProvider:()=>K,useViewer:()=>W,ViewerProvider:()=>Y,useBrowserEnv:()=>Z,BrowserEnvProvider:()=>J,useViewport:()=>X,useRead:()=>te,useCombinedRefs:()=>ne,InsertIntoCacheProvider:()=>oe,useInsertIntoCache:()=>ae,ConvosSearchIndexProvider:()=>se,useConvosSearchIndex:()=>ce});var r=n(322559),o=n(975066),a=n(667294),i=n(254632),s=n(314432),c=n(233600),u=n(21705),l=n(837021);function d(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return f(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return f(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function f(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=(0,a.useRef)();return(0,a.useEffect)((function(){t.current=e}),[e]),t.current}function h(e,t){var n=(0,a.useRef)(!1);(0,a.useEffect)((function(){if(n.current)return e()}),t),(0,a.useEffect)((function(){n.current=!0}),[])}function g(e,t){var n=(0,a.useState)({debounced:e,debouncedUpdatesCount:0}),r=(0,o.default)(n,2),i=r[0],s=r[1];return(0,a.useLayoutEffect)((function(){if(0!==t){var n=setTimeout((function(){s((function(t){var n=t.debouncedUpdatesCount;return{debounced:e,debouncedUpdatesCount:n+1}}))}),t);return function(){clearTimeout(n)}}s((function(t){return m(m({},t),{},{debounced:e})}))}),[e,t]),i}function b(e){var t=(0,a.useContext)(y);return!!s.isUserPeerId(e)&&t.has(e)}var y=a.createContext(new Set),w=y.Provider;function _(){var e=(0,a.useContext)(k);if(!e)throw new Error("DispatchProvider не добавлен в дерево Реакта!");return e}var k=a.createContext(null),C=k.Provider;function E(){var e=(0,a.useContext)(I);if(!e)throw new Error("UserSettingsProvider не добавлен в дерево Реакта!");return e}var I=a.createContext(null),x=I.Provider;function O(){var e=(0,a.useContext)(A);if(void 0===e)throw new Error("HelpHintsProvider не добавлен в дерево Реакта!");return e}var A=a.createContext(null),M=A.Provider;function P(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"full",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:3,r=(0,a.useContext)(S),o=D(),i=Z(),c=i.lang,u=r.get(e);if(u){var f,p=[],m=new Set,v=d(l.TypingVariants);try{for(v.s();!(f=v.n()).done;){var h=f.value,g=u[h];g&&(p.push(h),g.peerIds.forEach((function(e){return m.add(e)})))}}catch(e){v.e(e)}finally{v.f()}var b=p.length>1?"text":p[0]||"text";if(0===n)return{text:c.use("me_typing_".concat(b)),type:b};var y,w,_=[],k=d(m);try{for(k.s();!(y=k.n()).done;){var C=y.value,E=o.get(C);if(E&&(_.push(E),_.length===n))break}}catch(e){k.e(e)}finally{k.f()}var I=", ",x=m.size-_.length;switch(!0){case 0===_.length&&x>0:w=c.use("me_typing_people",{num:x});break;case x>0:w=_.map(s.shortName).join(I),w=c.use("me_typing_names_lots",{num:x,values:{names:w}});break;case _.length>1:var O=_.length>n-1?_.slice(0,n-1).map(s.shortName).join(I):_[0]?s.shortName(_[0]):"",A=_[_.length-1],M=A?s.shortName(A):"";w=c.use("me_typing_names_couple",{values:{before:O,after:M}});break;case 1===_.length:w=_[0]?s.shortName(_[0]):"";break;default:w=""}var P="compact"===t?w:c.use("me_typing_".concat(b,"_named"),{num:_.length,values:{names:w}});return{text:P,type:b}}}var S=a.createContext(new Map),j=S.Provider;function N(){var e=(0,a.useState)(!1),t=(0,o.default)(e,2),n=t[0],r=t[1];return(0,a.useEffect)((function(){var e=function(){r(window.devicePixelRatio>1.3)};e();var t=matchMedia("(resolution: ".concat(window.devicePixelRatio,"dppx)"));try{return t.addEventListener("change",e),function(){t.removeEventListener("change",e)}}catch(n){return t.addListener(e),function(){t.removeListener(e)}}}),[]),n}function L(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:6e4,t=(0,a.useState)(0),n=(0,o.default)(t,2),r=n[0],i=n[1];return(0,a.useLayoutEffect)((function(){i(Date.now());var t=setInterval((function(){i(Date.now())}),e);return function(){return clearInterval(t)}}),[e]),r}function D(){return(0,a.useContext)(R)}var R=a.createContext(new Map),T=R.Provider;function U(){return(0,a.useContext)(B)}var B=a.createContext(new Map),q=B.Provider;function z(){var e=(0,a.useContext)(F);if(!e)throw new Error("FeatureFlagsProvider не добавлен в дерево Реакта!");return e}var F=a.createContext(null),G=F.Provider;function V(){var e=(0,a.useContext)(H);if(!e)throw new Error("OwnerProvider не добавлен в дерево Реакта!");return e}var H=a.createContext(null),K=H.Provider;function W(){var e=(0,a.useContext)($);if(!e)throw new Error("ViewerProvider не добавлен в дерево Реакта!");return e}var $=a.createContext(null),Y=$.Provider;function Z(){var e=(0,a.useContext)(Q);if(!e)throw new Error("BrowserEnvProvider не добавлен в дерево Реакта!");return e}var Q=a.createContext(null),J=Q.Provider;function X(e){var t=e.debounced,n=void 0!==t&&t,r=(0,a.useState)(ee()),i=(0,o.default)(r,2),s=i[0],c=i[1],l=(0,a.useRef)((0,u.debounce)(c,300,!1));return(0,a.useLayoutEffect)((function(){var e=l.current,t=function(){n?e(ee()):c(ee())};return t(),window.addEventListener("resize",t),function(){window.removeEventListener("resize",t),n&&e.cancel()}}),[n]),s}function ee(){return"undefined"==typeof window?[0,0]:[document.documentElement.clientWidth,document.documentElement.clientHeight]}function te(e,t){var n=t.isUnread,r=t.onRead,o=Z().idle,s=(0,i.useInView)({threshold:.01,triggerOnce:!0,delay:500}),c=s.ref,u=s.inView,l=(0,a.useMemo)((function(){return function(e){return function(t){c(t),e&&("function"==typeof e?e(t):e.current=t)}}}),[c]);return(0,a.useEffect)((function(){if(u&&n&&!e.isOut)return o.isIdle()?o.subscribe((function(t){t||setTimeout((function(){return r(e.cmid)}),1e3)})):void r(e.cmid)}),[u,n,e,r,o]),l}function ne(){for(var e=arguments.length,t=new Array(e),n=0;n<e;n++)t[n]=arguments[n];var r=(0,a.useRef)(null);return a.useEffect((function(){t.forEach((function(e){e&&("function"==typeof e?e(r.current):e.current=r.current)}))}),[t]),r}var re=a.createContext(null),oe=re.Provider;function ae(){var e=(0,a.useContext)(re);if(!e)throw new Error("InsertIntoCacheProvider не добавлен в дерево Реакта!");return e}var ie=a.createContext(c.create()),se=ie.Provider;function ce(){return(0,a.useContext)(ie)}},659309:(e,t,n)=>{"use strict";n.d(t,{useConvoAttaches:()=>v});var r=n(322559),o=n(467846),a=n(975066),i=n(343883),s=n.n(i),c=n(784970),u=n(303460),l=n(667294),d=n(21705),f=n(837021);function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e){var t=(0,l.useState)(null),n=(0,a.default)(t,2),r=n[0],i=n[1],u=(0,c.useBrowserEnv)().api,d=(0,c.useOwner)(),f=(0,l.useCallback)(function(){var t=(0,o.default)(s().mark((function t(n){var o,a,c,l,f;return s().wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(null!==(o=(l=r||{})[n])&&void 0!==o&&o.isLoading||null!==(a=l[n])&&void 0!==a&&a.isAllLoaded)){t.next=3;break}return t.abrupt("return");case 3:return y(l,!0,n),i(m({},l)),t.next=7,h(u,e,d.id,n,(null===(c=l[n])||void 0===c?void 0:c.cursorNextLoad)||void 0);case 7:f=t.sent,w(l,f),y(l,!1,n),i(m({},l));case 11:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),[u,r,d.id,e]);return{attaches:r,getNextPage:f}}function h(e,t,n,r,o){return g.apply(this,arguments)}function g(){return(g=(0,o.default)(s().mark((function e(t,n,o,a,i){var c,l;return s().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,t.fetch("messages.getHistoryAttachments",{peer_id:n,media_type:b(a),count:30,start_from:i,group_id:(0,f.getOwnerGroupId)(o)},{retries:5});case 3:if((c=e.sent).items&&0!==c.items.length){e.next=6;break}return e.abrupt("return",(0,r.default)({},a,{items:[],isAllLoaded:!0,cursorNextLoad:null}));case 6:return l=(0,u.fromApiConvoAttach)(c.items)[a]||[],e.abrupt("return",(0,r.default)({},a,{items:l,isAllLoaded:0===l.length||l.length<30,cursorNextLoad:c.next_from}));case 10:return e.prev=10,e.t0=e.catch(0),e.abrupt("return",{});case 13:case"end":return e.stop()}}),e,null,[[0,10]])})))).apply(this,arguments)}var b=function(e){return{audios:"audio",videos:"video",docs:"doc",links:"link",photos:"photo"}[e]};function y(e,t,n){e[n]||function(e,t){switch(t){case"audios":case"videos":case"docs":case"links":case"photos":e[t]={items:[],cursorNextLoad:null,isAllLoaded:!1};break;default:(0,d.exhaustivenessCheck)(t)}}(e,n);var r=e[n];r&&(r.isLoading=t)}function w(e,t){var n,r,o,a,i;t.audios&&(e.audios={items:((null===(n=e.audios)||void 0===n?void 0:n.items)||[]).concat(t.audios.items),cursorNextLoad:t.audios.cursorNextLoad||null,isAllLoaded:t.audios.isAllLoaded});t.docs&&(e.docs={items:((null===(r=e.docs)||void 0===r?void 0:r.items)||[]).concat(t.docs.items),cursorNextLoad:t.docs.cursorNextLoad||null,isAllLoaded:t.docs.isAllLoaded});t.links&&(e.links={items:((null===(o=e.links)||void 0===o?void 0:o.items)||[]).concat(t.links.items),cursorNextLoad:t.links.cursorNextLoad||null,isAllLoaded:t.links.isAllLoaded});t.photos&&(e.photos={items:((null===(a=e.photos)||void 0===a?void 0:a.items)||[]).concat(t.photos.items),cursorNextLoad:t.photos.cursorNextLoad||null,isAllLoaded:t.photos.isAllLoaded});t.videos&&(e.videos={items:((null===(i=e.videos)||void 0===i?void 0:i.items)||[]).concat(t.videos.items),cursorNextLoad:t.videos.cursorNextLoad||null,isAllLoaded:t.videos.isAllLoaded})}},48521:(e,t,n)=>{"use strict";n.d(t,{useModuleKeyBoardHandlers:()=>u,useGlobalKeyBoardHandlers:()=>l,KeyBoardHandlersProvider:()=>d});var r=n(621094),o=n(975066),a=n(608994),i=n(667294),s=n(812869),c=(0,i.createContext)(null),u=function(e){var t=e.moduleName,n=e.activateOnFirstRender,r=void 0===n||n,o=e.activateOnFocusInRef,s=e.blockGlobalHandlersWhileActive,u=void 0!==s&&s,l=(0,i.useContext)(c);if(!l)throw new Error("KeyBoardHandlersContext не добавлен в дерево Реакта!");var d=(0,i.useRef)("".concat(t,"_").concat((0,a.nanoid)(7))),f=l.activeModule,p=l.activateModule,m=l.removeModuleFromActiveStack,v=l.subscribeModuleKeyDown,h=l.isGlobalHandlersBlocked,g=l.blockGlobalHandlers,b=l.unblockGlobalHandlers,y=(0,i.useCallback)((function(){p(d.current),u&&g()}),[p,g,u,d]),w=(0,i.useCallback)((function(){m(d.current),f===d.current&&u&&b()}),[f,m,b,u]),_=(0,i.useCallback)((function(e){return v(d.current,e)}),[v]);return(0,i.useLayoutEffect)((function(){return r&&y(),function(){w()}}),[]),(0,i.useLayoutEffect)((function(){var e,t=null==o?void 0:o.current;if(t)return t.tabIndex=null!==(e=t.tabIndex)&&void 0!==e?e:-1,t.addEventListener("focusin",y,!0),t.addEventListener("focusout",w,!0),function(){t.removeEventListener("focusin",y,!0),t.removeEventListener("focusout",w,!0)}}),[o,y,w]),(0,i.useEffect)((function(){if(d.current===f)return!h&&u&&g(),h&&!u&&b(),function(){u&&b()}}),[d,f,h,u,g,b]),{activateModule:y,removeModuleFromActiveStack:w,subscribeKeyDown:_,blockGlobalHandlers:g,unblockGlobalHandlers:b}},l=function(){var e=(0,i.useContext)(c);if(!e)throw new Error("KeyBoardHandlersContext не добавлен в дерево Реакта!");return{blockGlobalHandlers:e.blockGlobalHandlers,unblockGlobalHandlers:e.unblockGlobalHandlers,subscribeGlobalKeyDown:e.subscribeGlobalKeyDown}},d=function(e){var t=e.children,n=(0,i.useState)([]),u=(0,o.default)(n,2),l=u[0],d=u[1],m=(0,i.useState)(),v=(0,o.default)(m,2),h=v[0],g=v[1],b=(0,i.useRef)((0,a.nanoid)(7)),y=(0,i.useRef)(new Map);(0,i.useEffect)((function(){g((function(){return l[l.length-1]})),f(b.current)}),[l]);var w=(0,i.useCallback)((function(e,t){if(y.current.has(e))throw new Error("Module ".concat(e," is already subscribed. Unsubscribe it first."));return y.current.set(e,t),function(){y.current.delete(e)}}),[]),_=(0,i.useCallback)((function(e,t){var n=(0,r.default)(e),o=n.indexOf(t);return-1!==o&&n.splice(o,1),n}),[]),k=(0,i.useCallback)((function(e){d((function(t){return _(t,e)}))}),[_]),C=(0,i.useCallback)((function(e){d((function(t){var n=_(t,e);return[].concat((0,r.default)(n),[e])}))}),[_]),E=(0,i.useRef)(new Map),I=(0,i.useRef)(!1),x=(0,i.useCallback)((function(e,t){if(E.current.has(e))throw new Error("Global keyCombo ".concat(e," is already subscribed. Unsubscribe it first"));return E.current.set(e,t),function(){E.current.delete(e)}}),[]),O=(0,i.useCallback)((function(){I.current=!0}),[]),A=(0,i.useCallback)((function(){I.current=!1}),[]),M=(0,i.useCallback)((function(e,t){if(void 0!==h&&p(b.current)){var n=y.current.get(h);n&&n(e,t)}}),[h]),P=(0,i.useCallback)((function(e,t){if(I.current)t();else{var n=E.current.get(e);n&&(!1!==n.autoPreventDefault?(t(),n.handler()):n.handler(t))}}),[]),S=(0,i.useCallback)((function(e){var t=(0,s.getKeyCombo)(e),n=e.preventDefault.bind(e);(0,s.isGlobalKeyCombo)(t)?P(t,n):(0,s.isModuleKeyCombo)(t)&&M(t,n)}),[M,P]);(0,i.useEffect)((function(){return document.addEventListener("keydown",S),function(){document.removeEventListener("keydown",S)}}),[S]);var j=(0,i.useMemo)((function(){return{activeModule:h,subscribeGlobalKeyDown:x,subscribeModuleKeyDown:w,activateModule:C,removeModuleFromActiveStack:k,isGlobalHandlersBlocked:I.current,blockGlobalHandlers:O,unblockGlobalHandlers:A}}),[h,x,w,C,k,O,A]);return i.createElement(c.Provider,{value:j},t)},f=function(e){window.sessionStorage.setItem("active_key_board_handling_context",e)},p=function(e){var t=window.sessionStorage.getItem("active_key_board_handling_context");return null===t||e===t}},131330:(e,t,n)=>{"use strict";n.d(t,{useMessageDraft:()=>a,MessagesDraftsContext:()=>i});var r=n(667294),o=n(911615);function a(e){var t,n=(0,r.useContext)(i);if(!n)throw new Error("SaveMessageDraftProvider не добавлен в дерево Реакта!");return null!==(t=n[e])&&void 0!==t?t:o.DEFAULT_DRAFT}var i=r.createContext({})},368455:(e,t,n)=>{"use strict";n.d(t,{ActionsMenu:()=>p,ActionsMenuAction:()=>m,ActionsMenuDropdownAction:()=>v,ActionsMenuSeparator:()=>h});var r=n(975066),o=n(314957),a=n(278765),i=(n(47861),n(667294)),s=n(20700),c=n.n(s),u=n(710409),l=n(760562),d=["leftIcon","rightIcon","title","type","className","children","onClick"],f=["children","icon"],p=function(e){var t=e.className,n=e.children;return i.createElement("div",{className:c()("ActionsMenu",t)},n)},m=function(e){var t=e.leftIcon,n=e.rightIcon,r=e.title,s=e.type,u=void 0===s?"primary":s,l=e.className,f=(e.children,e.onClick),p=(0,a.default)(e,d);return i.createElement("button",(0,o.default)({},p,{className:c()("ActionsMenuAction",u&&"ActionsMenuAction--".concat(u),l),onClick:f}),t&&i.createElement("i",{className:"ActionsMenuAction__icon"},t),i.createElement("span",{className:"ActionsMenuAction__title"},r),n&&i.createElement("i",{className:"ActionsMenuAction__icon"},n))},v=function(e){var t=e.children,n=e.icon,s=(0,a.default)(e,f),c=(0,i.useState)(!1),d=(0,r.default)(c,2),v=d[0],h=d[1];return i.createElement(l.Dropdown,{content:i.createElement(p,{className:"ActionsMenu--dropdown"},t),position:"right",align:"left",onOpen:function(){return h(!0)},onClose:function(){return h(!1)},hideOnClick:!0},i.createElement(m,(0,o.default)({},s,{className:v&&"ActionsMenuAction--active",leftIcon:n,rightIcon:i.createElement(u.default,null)})))},h=function(e){var t=e.className;return i.createElement("div",{role:"separator",className:c()("ActionsMenuAction__separator",t)})}},14646:(e,t,n)=>{"use strict";n.d(t,{AttachAudio:()=>f});var r=n(322559),o=n(975066),a=(n(998899),n(667294)),i=n(20700),s=n.n(i),c=n(21705),u=n(784970);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function d(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var f=a.memo((function(e){var t=e.peerId,n=e.audio,r=(0,u.useBrowserEnv)().player,i=(0,a.useState)(!1),l=(0,o.default)(i,2),f=l[0],m=l[1],v=(0,a.useState)("stopped"),h=(0,o.default)(v,2),g=h[0],b=h[1],y=(0,a.useState)(0),w=(0,o.default)(y,2),_=w[0],k=w[1];(0,a.useEffect)((function(){var e=r.subscribe((function(e){var t=e.currentTrack&&"Audio"===e.currentTrack.kind&&e.currentTrack.id===n.id&&"ended"!==e.status;m(t||!1),b(t?e.status:"stopped"),k(t?e.progress:0)}));return function(){return e()}}),[n,r]);var C=(0,a.useCallback)((function(e){e.stopPropagation();var o=function(e,t){if(!t.url)return null;return d(d({url:t.url},t),{},{peerId:e})}(t,n);o&&(f&&"playing"===g?r.pause():f?r.resume():r.play(o,_),e.preventDefault())}),[t,n,f,g,r,_]);return a.createElement("div",{className:s()("AttachAudio",{"AttachAudio--active":"playing"===g||"paused"===g,"AttachAudio--playing":"playing"===g})},a.createElement("button",{className:"AttachAudio__play",onClick:C},a.createElement("svg",{xmlns:"http://www.w3.org/2000/svg",className:"AttachAudio__playIcon",width:8,height:10,fill:"currentColor"},"playing"!==g&&a.createElement("path",{d:"M1.54 9.4A1 1 0 010 8.58V1.43A1 1 0 011.54.59l5.9 3.82a.7.7 0 010 1.18L1.54 9.4z"}),"playing"===g&&a.createElement("path",{d:"M.6 0a.6.6 0 00-.6.6v8.8c0 .33.27.6.6.6h1.8a.6.6 0 00.6-.6V.6a.6.6 0 00-.6-.6H.6zm5 0a.6.6 0 00-.6.6v8.8c0 .33.27.6.6.6h1.8a.6.6 0 00.6-.6V.6a.6.6 0 00-.6-.6H5.6z"}))),a.createElement("div",{className:"AttachAudio__title"},n.title),a.createElement("div",{className:"AttachAudio__artist"},n.artist),a.createElement("div",{className:"AttachAudio__duration","data-filler":p(n.duration)},a.createElement("div",{className:"AttachAudio__durationIn"},"playing"===g||"paused"===g?r.timeLeft(!1):(0,c.formatDuration)(n.duration))))}));function p(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=t?"-":"";return n+Math.floor(e/60).toString().split("").fill("0").join("")+":00"}},55011:(e,t,n)=>{"use strict";n.d(t,{AttachDoc:()=>l});n(153249);var r=n(667294),o=n(333102),a=n(774877),i=n(940637),s=n(21705),c=n(20700),u=n.n(c),l=function(e){var t=e.doc,n=e.withoutPreview,c=void 0!==n&&n,l=e.isInBubble,d=void 0!==l&&l,f=e.forwardLevel,p=void 0===f?0:f,m=e.isOut,v=void 0!==m&&m,h=t.ext.toUpperCase()+" · "+(0,s.formatFileSize)(t.size);return!c&&t.image?r.createElement(o.AttachDocPreview,{doc:t,meta:h,isInBubble:d,forwardLevel:p}):r.createElement(i.Link,{href:t.url,className:"AttachDoc",download:!0},r.createElement("figure",{className:u()("AttachDoc__icon",{"AttachDoc__icon--isOut":v})},r.createElement(a.default,null)),r.createElement("div",{className:"AttachDoc__title"},t.title),r.createElement("div",{className:"AttachDoc__meta"},h))}},333102:(e,t,n)=>{"use strict";n.d(t,{AttachDocPreview:()=>d});var r=n(975066),o=(n(849204),n(667294)),a=n(151225),i=n(940637),s=n(227998),c=n(354629),u=n(784970),l=n(887075),d=function(e){var t=e.doc,n=e.meta,d=e.isInBubble,f=void 0!==d&&d,p=e.forwardLevel,m=void 0===p?0:p,v=(0,o.useState)(!1),h=(0,r.default)(v,2),g=h[0],b=h[1],y=(0,u.usePixelDensity)(),w="gif"===t.ext,_=(0,l.getExpectedAttachWidth)(y,f,m,232),k=(0,r.default)(_,2),C=k[0],E=k[1],I=a.preview(t,E);if(!I)return null;var x=Math.min(I.width,C),O=Math.ceil(I.height/I.width*x);return o.createElement(i.Link,{href:t.url,className:"AttachDocPreview",style:{width:x,height:O},download:!w,onClick:w?function(e){b((function(e){return!e})),e.preventDefault()}:void 0},w&&!g&&o.createElement("div",{className:"AttachDocPreview__play"},o.createElement(c.default,null)),o.createElement("img",{src:g?t.url:I.url,alt:t.title}),o.createElement(s.AttachDocPreviewMeta,{rounded:!0,top:!0,left:!0},n))}},227998:(e,t,n)=>{"use strict";n.d(t,{AttachDocPreviewMeta:()=>u});var r=n(322559),o=(n(712433),n(667294)),a=n(20700),i=n.n(a);function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u=function(e){var t=e.children,n=e.rounded,r=e.offsetLength,a=void 0===r?5:r,s=e.top,u=e.right,l=e.bottom,d=e.left,f=["AttachDocPreviewMeta",{"AttachDocPreviewMeta--rounded":n}],p=a+"px",m=c(c(c(c({},s&&{top:p}),u&&{right:p}),l&&{bottom:p}),d&&{left:p});return o.createElement("div",{className:i()(f),style:m},t)}},995627:(e,t,n)=>{"use strict";n.d(t,{ConvoAttachAudioActionsMenu:()=>u});var r=n(667294),o=n(368455),a=n(21705),i=n(784970),s=n(150591),c=n(84343),u=function(e){e.audio;var t=e.goToMessage,n=(0,i.useBrowserEnv)().lang,u=(0,r.useCallback)((function(e){switch(e){case"share":return;case"go_to_message":return void t();default:return(0,a.exhaustivenessCheck)(e)}}),[t]);return r.createElement(o.ActionsMenu,null,r.createElement(o.ActionsMenuAction,{onClick:function(){return u("share")},title:n.use("me_attach_action_share"),leftIcon:r.createElement(s.default,null),type:"primary"}),r.createElement(o.ActionsMenuAction,{onClick:function(){return u("go_to_message")},title:n.use("me_attach_action_go_to_message"),leftIcon:r.createElement(c.default,null),type:"primary"}))}},941801:(e,t,n)=>{"use strict";n.d(t,{ConvoAttachDocActionsMenu:()=>u});var r=n(667294),o=n(368455),a=n(150591),i=n(84343),s=n(784970),c=n(21705),u=function(e){e.document;var t=e.goToMessage,n=(0,s.useBrowserEnv)().lang,u=(0,r.useCallback)((function(e){switch(e){case"share":return;case"go_to_message":return void t();default:return(0,c.exhaustivenessCheck)(e)}}),[t]);return r.createElement(o.ActionsMenu,null,r.createElement(o.ActionsMenuAction,{title:n.use("me_attach_action_share"),leftIcon:r.createElement(a.default,null),onClick:function(){return u("share")},type:"primary"}),r.createElement(o.ActionsMenuAction,{title:n.use("me_attach_action_go_to_message"),leftIcon:r.createElement(i.default,null),onClick:function(){return u("go_to_message")},type:"primary"}))}},773459:(e,t,n)=>{"use strict";n.d(t,{ConvoAttachesLinks:()=>u});var r=n(667294),o=n(151225),a=n(708787),i=n(671269),s=n(784970),c=n(940637),u=(n(966773),function(e){var t,n=e.links,u=e.tailWatchBind,l=(0,s.useBrowserEnv)().lang;return t=new Set,r.createElement("ul",null,n.map((function(e,s){var d=s===n.length-1,f="".concat(e.cmid,"_").concat(e.attach.url),p=t.has(f)?"".concat(f,"_").concat(s):f;return t.add(f),r.createElement("li",{key:p},d&&u&&r.createElement("div",{ref:u}),r.createElement(c.Link,{href:e.attach.url,target:"_blank",className:"ConvoAttachesLink"},r.createElement("div",null,r.createElement("div",{className:"ConvoAttachesLink__image-container"},function(e){var t="";if(e.image){var n=(0,o.preview)(e,48,48,!0);n&&(t=n.url)}return t?r.createElement("img",{src:t,className:"ConvoAttachesLink__image"}):r.createElement("div",{className:"ConvoAttachesLink__image"})}(e.attach))),r.createElement("div",{className:"ConvoAttachesLink__content"},r.createElement("div",{className:"ConvoAttachesLink__name"},e.attach.title),r.createElement("div",{className:"ConvoAttachesLink__url"},e.attach.url)),r.createElement("div",{className:"ConvoAttachesLink__actions"},r.createElement(a.Tooltip,{content:l.use("me_convo_attaches_to_message"),position:"top",align:"center",delay:500},r.createElement("div",{className:"ConvoAttachesLink__button"},r.createElement(i.default,null))))))})))})},796595:(e,t,n)=>{"use strict";n.d(t,{ConvoAttachesPhotos:()=>b});var r=n(314957),o=n(621094),a=n(975066),i=(n(202532),n(667294)),s=n(151225),c=n(940637),u=n(760562),l=n(986818),d=n(594941),f=n(585561),p=n(650485),m=n(784970),v=n(86894),h=n(21705),g=n(368455),b=function(e){var t=e.photos,n=e.tailWatchBind,r=(e.goToMessage,e.isCasper),c=(0,m.useBrowserEnv)().api,u=(0,i.useState)(0),l=(0,a.default)(u,2),d=l[0],f=l[1],p=(0,i.useRef)(null),v=(0,i.useState)([]),g=(0,a.default)(v,2),b=g[0],w=g[1];(0,i.useLayoutEffect)((function(){if(window.IntersectionObserver&&0===d&&p.current){var e=new ResizeObserver((function(t){var n;t[0]&&f(t[0].contentRect.width),0===(null===(n=t[0])||void 0===n?void 0:n.contentRect.width)&&e.disconnect()}));e.observe(p.current)}}));var _=(0,i.useCallback)((function(e,t){switch(e){case"set_as_avatar":case"go_to_message":case"copy_link":case"download":case"tag_item":case"tag_service":break;case"delete":c.fetch("photos.delete",{photo_id:t.attach.id,owner_id:t.attach.ownerId}).then((function(){w([].concat((0,o.default)(b),[t.attach.id]))}));break;case"restore":c.fetch("photos.restore",{photo_id:t.attach.id,owner_id:t.attach.ownerId}).then((function(){w(b.filter((function(e){return e!==t.attach.id})))}));break;default:(0,h.exhaustivenessCheck)(e)}}),[c,b]);return i.createElement("ul",{className:"ConvoAttachesPhotos"},t.map((function(e,t,o){var a=0===t,c=t===o.length-1,u=0!==d?function(e,t){var n=s.preview(e,t,t,!1),r=s.preview(e,2*t,2*t,!1);if(!n&&!r)return null;if(!n||!r)return{src:n?n.url:r?r.url:""};return{srcSet:"".concat(n.url,", ").concat(r.url," 2x"),src:r.url}}(e.attach,d):void 0;return i.createElement(y,{key:"".concat(e.cmid,"-").concat(e.attach.id),isDeleted:b.includes(e.attach.id),isCasper:r,photo:e,photoSource:u||void 0,tailWatchBind:c?n:void 0,measuredElRef:a?p:void 0,onActionClick:_})})))},y=function(e){var t=e.photo,n=e.isCasper,o=e.measuredElRef,a=e.tailWatchBind,h=e.photoSource,b=e.isDeleted,y=e.onActionClick,w=(0,m.useBrowserEnv)().lang,_=(0,i.useMemo)((function(){return i.createElement(i.Fragment,null,!n&&i.createElement(g.ActionsMenuAction,{key:"action_set_as_avatar",onClick:function(){return y("set_as_avatar",t)},title:w.use("me_attach_action_set_as_avatar"),leftIcon:i.createElement(l.default,null),type:"primary"}),i.createElement(g.ActionsMenuAction,{key:"action_go_to_message",onClick:function(){return y("go_to_message",t)},title:w.use("me_attach_action_go_to_message"),leftIcon:i.createElement(d.default,null),type:"primary"}),i.createElement(g.ActionsMenuAction,{key:"action_delete",onClick:function(){return y("delete",t)},title:w.use("me_attach_action_delete_photo"),leftIcon:i.createElement(f.default,null),type:"danger"}))}),[w,t,n,y]);return i.createElement("li",{className:"ConvoAttachesPhotos__item",ref:o},a&&i.createElement("div",{className:"ConvoAttachesPhotos__tail",ref:a}),h&&!b&&i.createElement(i.Fragment,null,i.createElement(c.Link,{href:s.link(t.attach),payload:{kind:"attach",attach:t.attach},target:"_blank",rel:"noreferrer",key:t.attach.id,className:"ConvoAttachesPhotos__link"},i.createElement("img",(0,r.default)({},h,{alt:"",className:"ConvoAttachPhoto__img"}))),i.createElement(u.Dropdown,{classNames:{wrapper:"ConvoAttachPhoto__dropdown"},content:i.createElement(g.ActionsMenu,{className:"ConvoActionsMenu"},_),align:"center",position:"left",hideOnClick:!0},i.createElement("button",{className:"ConvoAttachPhoto__action","aria-label":w.use("me_actions_more")},i.createElement(p.default,null)))),h&&b&&i.createElement("div",{className:"ConvoAttachesPhotos__restore"},i.createElement(v.Button,{size:"m",mode:"outline",onClick:function(){return y("restore",t)}},w.use("me_attach_action_restore_photo"))))}},871486:(e,t,n)=>{"use strict";n.d(t,{ConvoAttachesVideos:()=>y});var r=n(314957),o=n(621094),a=n(975066),i=(n(556750),n(667294)),s=n(151225),c=n(21705),u=n(784970),l=n(760562),d=n(594941),f=n(714226),p=n(650485),m=n(940637),v=n(86894),h=n(368455),g=n(20700),b=n.n(g),y=function(e){var t=e.videos,n=e.tailWatchBind,r=(e.goToMessage,(0,i.useState)(0)),l=(0,a.default)(r,2),d=l[0],f=l[1],p=(0,u.useBrowserEnv)().api,m=(0,i.useRef)(null),v=(0,i.useState)([]),h=(0,a.default)(v,2),g=h[0],b=h[1],y=(0,u.useViewer)();(0,i.useLayoutEffect)((function(){if(window.IntersectionObserver&&0===d&&m.current){var e=new ResizeObserver((function(t){var n;t[0]&&f(t[0].contentRect.width),0===(null===(n=t[0])||void 0===n?void 0:n.contentRect.width)&&e.disconnect()}));e.observe(m.current)}}));var _=(0,i.useCallback)((function(e,t){switch(e){case"go_to_message":case"copy_link":case"download":case"report":case"share":case"add":case"add_to_playlist":break;case"delete_from_own":p.fetch("video.delete",{video_id:t.attach.id,owner_id:t.attach.ownerId,target_id:y.id}).then((function(){b([].concat((0,o.default)(g),[t.attach.id]))}));break;case"restore":p.fetch("video.restore",{video_id:t.attach.id,owner_id:t.attach.ownerId}).then((function(){b(g.filter((function(e){return e!==t.attach.id})))}));break;default:(0,c.exhaustivenessCheck)(e)}}),[p,g,y.id]);return i.createElement("ul",{className:"ConvoAttachesVideos"},t.map((function(e,t,r){var o,a=0===t,c=t===r.length-1,u=0!==d?function(e,t){var n=s.preview(e,t),r=s.preview(e,2*t);if(!n&&!r)return null;if(!n||!r)return{src:n?n.url:r?r.url:""};return{srcSet:"".concat(n.url,", ").concat(r.url," 2x"),src:r.url}}(e.attach,d):void 0,l=1===(null===(o=e.attach.restriction)||void 0===o?void 0:o.blur);return i.createElement(w,{key:"".concat(e.cmid,"-").concat(e.attach.id),measuredElRef:a?m:void 0,tailWatchBind:c?n:void 0,isDeleted:g.includes(e.attach.id),onActionClick:_,video:e,isBlur:l,videoSource:u||void 0})})))},w=function(e){var t,n,o,a,g=e.video,y=e.tailWatchBind,w=e.videoSource,_=e.isDeleted,k=e.measuredElRef,C=e.isBlur,E=e.onActionClick,I=(0,u.useBrowserEnv)().lang,x=g.attach,O=x.duration,A=x.id,M=x.title,P=x.views,S=(0,i.useMemo)((function(){return i.createElement(i.Fragment,null,i.createElement(h.ActionsMenuAction,{key:"action_go_to_message",onClick:function(){return E("go_to_message",g)},title:I.use("me_attach_action_go_to_message"),leftIcon:i.createElement(d.default,null),type:"primary"}),i.createElement(h.ActionsMenuAction,{key:"action_delete_from_own",onClick:function(){return E("delete_from_own",g)},title:I.use("me_attach_action_delete_video_from_own"),leftIcon:i.createElement(f.default,null),type:"danger"}))}),[I,g,E]);return i.createElement("li",{className:"ConvoAttachesVideos__item",ref:k},y&&i.createElement("div",{className:"ConvoAttachesVideos__tail",ref:y}),i.createElement("div",{className:"ConvoAttachesVideos__preview"},w&&!_&&i.createElement(i.Fragment,null,i.createElement(m.Link,{href:s.link(g.attach),payload:{kind:"attach",attach:g.attach},target:"_blank",rel:"noreferrer",key:A,className:"ConvoAttachesVideo__link"},i.createElement("img",(0,r.default)({},w,{alt:"",className:b()("ConvoAttachesVideo__img",{"ConvoAttachesVideo__img--restriction":C})})),C&&i.createElement("div",{className:"ConvoAttachVideoResctrictionWrap"},i.createElement("div",{className:"ConvoAttachVideoIconRestriction",style:{backgroundImage:"url('".concat(null===(t=g.attach.restriction)||void 0===t||null===(n=t.card_icon)||void 0===n||null===(o=n.slice(-1).pop())||void 0===o?void 0:o.url,"')"),filter:"invert(100%)"}}),void 0!==(null===(a=g.attach.restriction)||void 0===a?void 0:a.title)&&i.createElement("div",null,g.attach.restriction.title))),i.createElement(l.Dropdown,{classNames:{wrapper:"ConvoAttachVideo__dropdown"},content:i.createElement(h.ActionsMenu,{className:"ConvoActionsMenu"},S),align:"center",position:"left",hideOnClick:!0},i.createElement("button",{className:"ConvoAttachVideo__action","aria-label":I.use("me_actions_more")},i.createElement(p.default,null)))),w&&_&&i.createElement("div",{className:"ConvoAttachesVideos__restore"},i.createElement(v.Button,{size:"m",mode:"outline",onClick:function(){E("restore",g)}},I.use("me_attach_action_restore_video"))),O&&i.createElement("div",{className:"ConvoAttachesVideos__duration"},(0,c.formatDuration)(O))),i.createElement("div",{className:"ConvoAttachesVideo__title"},M),i.createElement("div",{className:"ConvoAttachesVideo__views"},I.use("me_convo_attaches_video_views",{num:P,values:{count:I.formatNumber(P,"short")}})))}},162667:(e,t,n)=>{"use strict";n.d(t,{ConvoAttachments:()=>E});var r=n(467846),o=n(975066),a=n(343883),i=n.n(a),s=(n(603709),n(667294)),c=n(86894),u=n(14646),l=n(55011),d=n(509727),f=n(838851),p=n(659309),m=n(784970),v=n(796595),h=n(871486),g=n(760562),b=n(941801),y=n(650485),w=n(995627),_=n(773459),k=n(20700),C=n.n(k),E=function(e){var t=e.convo,n=e.goToMessage,a=e.className,k=(0,s.useState)("photos"),E=(0,o.default)(k,2),I=E[0],x=E[1],O=(0,p.useConvoAttaches)(t.peerId),A=O.attaches,M=O.getNextPage,P=(0,s.useRef)(),S=(0,m.useBrowserEnv)().lang,j=(0,s.useCallback)((function(e){if(e)return P.current=new IntersectionObserver(function(){var e=(0,r.default)(i().mark((function e(t){var n;return i().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(null===(n=t[0])||void 0===n||!n.isIntersecting){e.next=3;break}return e.next=3,M(I);case 3:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}()),P.current.observe(e),function(){var e;return null===(e=P.current)||void 0===e?void 0:e.disconnect()}}),[I,M]),N=function(e){e!==I&&(A&&!A[e]&&M(e),x(e))};if((0,s.useEffect)((function(){null===A&&M(I)})),!A)return null;var L=A[I];return s.createElement("div",{className:C()("ConvoAttachments",a)},s.createElement(c.Tabs,null,s.createElement(c.TabsItem,{onClick:function(){return N("photos")},selected:"photos"===I},S.use("me_convo_attaches_type_photo")),s.createElement(c.TabsItem,{onClick:function(){return N("videos")},selected:"videos"===I},S.use("me_convo_attaches_type_video")),s.createElement(c.TabsItem,{onClick:function(){return N("audios")},selected:"audios"===I},S.use("me_convo_attaches_type_music")),s.createElement(c.TabsItem,{onClick:function(){return N("docs")},selected:"docs"===I},S.use("me_convo_attaches_type_doc")),s.createElement(c.TabsItem,{onClick:function(){return N("links")},selected:"links"===I},S.use("me_convo_attaches_type_links"))),A&&s.createElement("div",{className:"ConvoAttachments__block"},function(){var e,r;if(null==L||!L.items||0===(null==L?void 0:L.items.length))return null;switch(I){case"audios":return s.createElement("ul",{className:"ConvoAttachments__list"},null==L?void 0:L.items.map((function(e,n,r){var o=e.attach,a=r.length===n+1&&!(null!=L&&L.isLoading)&&!(null!=L&&L.isAllLoaded);return"Audio"!==o.kind?null:s.createElement("li",{key:"".concat(e.cmid,"-").concat(o.id)},a&&s.createElement("div",{ref:j}),s.createElement("div",{className:"ConvoAttachments__itemContainer"},s.createElement("div",{className:"ConvoAttachments__item"},s.createElement(u.AttachAudio,{peerId:t.peerId,audio:o})),s.createElement(g.Dropdown,{hideOnClick:!0,content:s.createElement(w.ConvoAttachAudioActionsMenu,{audio:o,goToMessage:function(){}}),align:"right",position:"bottom"},s.createElement("button",{className:"ConvoAttachments__itemMenuButton"},s.createElement(y.default,null)))))})));case"docs":return s.createElement("ul",{className:"ConvoAttachments__list"},null==L?void 0:L.items.map((function(e,t,n){var r=e.attach,o=n.length===t+1&&!(null!=L&&L.isLoading)&&!(null!=L&&L.isAllLoaded);return"Doc"!==r.kind?null:s.createElement("li",{className:"ConvoAttachments__listItem ConvoAtachments__docItem",key:"".concat(e.cmid,"-").concat(r.id)},o&&s.createElement("div",{ref:j}),s.createElement("div",{className:"ConvoAttachments__itemContainer"},s.createElement("div",{className:"ConvoAttachments__item"},s.createElement(l.AttachDoc,{doc:r,withoutPreview:!0})),s.createElement(g.Dropdown,{hideOnClick:!0,content:s.createElement(b.ConvoAttachDocActionsMenu,{document:r,goToMessage:function(){}}),align:"center",position:"left"},s.createElement("button",{className:"ConvoAttachments__itemMenuButton"},s.createElement(y.default,null)))))})));case"links":var o=A[I];if(!o)return null;var a=!o.isAllLoaded&&!o.isLoading;return s.createElement(_.ConvoAttachesLinks,{links:o.items,tailWatchBind:a?j:void 0});case"photos":var i=null===(e=A[I])||void 0===e?void 0:e.items;if(!i)return null;var c=!(null!=L&&L.isLoading||null!=L&&L.isAllLoaded);return s.createElement(v.ConvoAttachesPhotos,{photos:i,tailWatchBind:c?j:void 0,isCasper:d.isCasper(t),goToMessage:n},s.createElement("div",{ref:j}));case"videos":var f=null===(r=A[I])||void 0===r?void 0:r.items;if(!f)return null;var p=!(null!=L&&L.isLoading||null!=L&&L.isAllLoaded);return s.createElement(h.ConvoAttachesVideos,{videos:f,tailWatchBind:p?j:void 0,goToMessage:n},s.createElement("div",{ref:j}));default:return null}}(),(!L||L.isLoading)&&s.createElement(f.OptimizedSpinner,{className:"ConvoAttachments__loader"}),L&&!L.isLoading&&0===L.items.length&&s.createElement("div",{className:"ConvoAttachments__empty"},S.use("me_convo_attaches_empty_type"))))}},760562:(e,t,n)=>{"use strict";n.d(t,{Dropdown:()=>m});var r=n(314957),o=n(322559),a=n(975066),i=n(278765),s=(n(779961),n(667294)),c=n(321039),u=n(39143),l=n(20700),d=n.n(l),f=n(21705),p=["openType","classNames","content","children","hideOnClick","open","onOpen","onClose"],m=function(e){var t,n=e.openType,l=void 0===n?"hover":n,m=e.classNames,v=void 0===m?{}:m,h=e.content,g=e.children,b=e.hideOnClick,y=e.open,w=void 0!==y&&y,_=e.onOpen,k=e.onClose,C=(0,i.default)(e,p),E=(0,s.useState)("closed"),I=(0,a.default)(E,2),x=I[0],O=I[1],A=(0,s.useState)(h),M=(0,a.default)(A,2),P=M[0],S=M[1],j=(0,s.useRef)(null);(0,s.useEffect)((function(){w||"closed"===x?w&&"opened"!==x&&O("opening"):O("closing")}),[w]),(0,s.useEffect)((function(){var e=function(e){e.stopPropagation(),"click"===l&&j.current&&e.target instanceof Node&&!j.current.contains(e.target)&&R()};return document.addEventListener("mousedown",e),function(){return document.removeEventListener("mousedown",e)}}),[j]);var N=(0,s.useCallback)((function(e){"hover"===l&&O((function(e){return"closing"===e?"opened":"opening"})),e.stopPropagation()}),[l]),L=(0,s.useCallback)((function(e){"hover"===l&&"closed"===x&&O("opening"),e.stopPropagation()}),[l,x]),D=(0,s.useCallback)((function(){"hover"===l&&O((function(e){return"opening"===e?"closed":"closing"}))}),[l]),R=(0,s.useCallback)((function(){"click"===l&&O((function(e){switch(e){case"opening":return"closed";case"closed":return"opening";case"opened":case"closing":return"closing";default:return(0,f.exhaustivenessCheck)(e)}}))}),[l]),T=(0,s.useCallback)((function(e){e.preventDefault(),e.stopPropagation(),b&&("hover"===l?D():R())}),[b,R,D,l]),U=(0,s.useCallback)((function(){O("opened")}),[]),B=(0,s.useCallback)((function(){O("closed")}),[]);return(0,s.useEffect)((function(){"opened"===x&&(null==_||_()),"closed"===x&&(null==k||k())}),[x,k,_]),(0,s.useEffect)((function(){"closing"!==x&&"opening"!==x&&S(h)}),[h,x]),s.createElement("div",{className:d()("DropdownReforged",v.wrapper,(t={},(0,o.default)(t,v.wrapperOpened||"DropdownReforged--opened","opened"===x),(0,o.default)(t,v.wrapperClosed||"DropdownReforged--closed","closed"===x),t))},s.createElement(u.Popper,(0,r.default)({},C,{portalClassName:v.portal,onMouseEnter:N,onMouseLeave:D,open:"closed"!==x,content:s.createElement(c.default,{nodeRef:j,in:"opening"===x||"opened"===x,addEndListener:function(e){var t;return null===(t=j.current)||void 0===t?void 0:t.addEventListener("transitionend",e,!1)},mountOnEnter:!0,unmountOnExit:!0,appear:!0,classNames:"".concat(v.contentWrapper||"DropdownReforged__contentWrapper","-"),onEntered:U,onExited:B},s.createElement("div",{ref:j,className:v.contentWrapper||"DropdownReforged__contentWrapper",onClick:T},P))}),s.createElement("div",{className:"DropdownReforged__trigger",onMouseEnter:N,onMouseOver:L,onMouseLeave:D,onClick:R},g)))}},656151:(e,t,n)=>{"use strict";n.d(t,{LayerProvider:()=>a,useLayer:()=>i});var r=n(667294),o=(n(973935),(0,r.createContext)({})),a=function(e){var t=e.layer,n=e.children;return r.createElement(o.Provider,{value:{layer:t}},n)},i=function(){return(0,r.useContext)(o).layer||void 0}},940637:(e,t,n)=>{"use strict";n.d(t,{Link:()=>c});var r=n(314957),o=n(278765),a=n(667294),i=n(784970),s=["children","href","payload","download","target","rel"],c=(0,a.forwardRef)((function(e,t){var n=e.children,c=e.href,f=e.payload,p=e.download,m=e.target,v=e.rel,h=(0,o.default)(e,s),g=(0,i.useBrowserEnv)(),b=g.navigate,y=function(e,t){var n=e.replace(".","\\."),r=l(t);if(/^\/[^/]/.test(r)||new RegExp("^(https?:\\/\\/)?([a-z0-9_\\-.]+\\.)?(".concat(n,"|vk\\.me|vk\\.cc)(\\/.*)?")).test(r)){var o=!/^(https?:\/\/)?([a-z0-9_\-.]+\.)?(vk\.me|vk\.cc)(\/.*)?/.test(r),a=o?"_self":"_blank";return{url:t,shouldNavigate:o,target:a,rel:"_blank"===a?"noopener noreferrer":void 0}}return{url:d(t)?t:u(t,e),shouldNavigate:!1,target:"_blank",rel:"noopener noreferrer"}}(g.vkDomain,c);return a.createElement("a",(0,r.default)({},h,{href:y.url,target:m||y.target,rel:v||y.rel,ref:t},p?{onClick:function(e){return e.stopPropagation()}}:{onClick:function(e){e.stopPropagation(),h.onClick?h.onClick(e):y.shouldNavigate&&b.openLink(c,f||null,e)}}),n)}));function u(e,t){return"https://".concat(t,"/away.php?to=").concat(encodeURIComponent(l(e)),"&utf=1")}function l(e){try{return decodeURIComponent(e)}catch(t){return e}}function d(e){return/^mailto:/.test(e)}},707731:(e,t,n)=>{"use strict";n.d(t,{ModalContext:()=>i,ModalsProvider:()=>s});var r=n(621094),o=n(975066),a=n(667294),i=(0,a.createContext)({}),s=function(e){var t=e.children,n=e.modals,s=e.modalsStack,c=(0,a.useCallback)((function(e){var t=s.currentElement,n=0;if((null==t?void 0:t.groupId)!==e)throw Error("Пытаетесь закрыть группу модалок, которая закрыта");for(;(null===(r=s.currentElement)||void 0===r?void 0:r.groupId)===e;){var r;n+=1,s.goBack()}s.pop(n)}),[s]),u=(0,a.useCallback)((function(e){var t=n.getModalParams(e),r=t.groupId,o=t.isSubModal;s.push({modalId:e,groupId:r,isSubModal:o})}),[s,n]),l=(0,a.useCallback)((function(e){var t=s.currentElement;if((null==t?void 0:t.modalId)!==e)throw Error("Пытаетесь закрыть модалку, которая закрыта");s.pop()}),[s]),d=(0,a.useState)([]),f=(0,o.default)(d,2),p=f[0],m=f[1];return(0,a.useLayoutEffect)((function(){return s.subscribe((function(e){var t=e.action,n=e.payload;"add"===t&&(e.payload.isSubModal?m([].concat((0,r.default)(p),[n.modalId])):m([n.modalId])),"remove"===t&&m(p.filter((function(e){return!n.find((function(t){return e===t.modalId}))})))}))}),[s,p]),a.createElement(i.Provider,{value:{openedModals:p,openModal:u,closeModal:l,closeGroup:c,getModalGroup:n.getModalGroup,createModal:n.createModal,createGroup:n.createGroup}},t)}},838851:(e,t,n)=>{"use strict";n.d(t,{OptimizedSpinner:()=>d});var r=n(322559),o=(n(410131),n(667294)),a=n(20700),i=n.n(a),s=n(86894),c=n(254632);function u(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function l(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?u(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):u(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var d=function(e){var t=e.className,n=e.size,r=void 0===n?"small":n,a=e.intersectionOptions,u=e.onIntersection,d=(0,c.useInView)(l(l({},a),{},{threshold:.01})),f=d.ref,p=d.inView;return(0,o.useEffect)((function(){p&&u&&u()}),[p]),o.createElement("div",{ref:f,className:i()("OptimizedSpinner",t)},p&&o.createElement(s.Spinner,{size:r}))}},39143:(e,t,n)=>{"use strict";n.d(t,{Popper:()=>g});var r=n(314957),o=n(322559),a=n(975066),i=n(278765),s=(n(606143),n(667294)),c=n(20700),u=n.n(c),l=n(826954),d=n(784970),f=n(887075),p=n(656151),m=["open","position","mode","align","adaptation","content","portalClassName","children","portalTarget"];function v(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function h(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?v(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):v(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var g=s.forwardRef((function(e,t){var n,o=e.open,c=void 0===o||o,v=e.position,g=void 0===v?"auto":v,b=e.mode,y=void 0===b?"side":b,w=e.align,_=void 0===w?"auto":w,k=e.adaptation,C=e.content,E=e.portalClassName,I=e.children,x=e.portalTarget,O=(0,i.default)(e,m),A=(0,p.useLayer)(),M=(0,s.useState)(null),P=(0,a.default)(M,2),S=P[0],j=P[1],N=(0,d.useCombinedRefs)(t),L=(0,s.useState)(null),D=(0,a.default)(L,2),R=D[0],T=D[1],U=(0,s.useState)(null),B=(0,a.default)(U,2),q=B[0],z=B[1],F=(0,s.useState)(null),G=(0,a.default)(F,2),V=G[0],H=G[1],K=h(h({},I.props),{},{ref:N}),W=(0,s.useCallback)((function(e){e&&j(e)}),[]);return(0,s.useEffect)((function(){if(N.current){var e=function(e,t,n,r,o,a,i,s){if(!a)return[null,null,null];var c="auto",u=["top","bottom"],l=["left","right"],d="fixed";if(!e)return[{top:0,left:0,width:0,height:0,position:d},o===c?"left":o,r===c?"bottom":r];var p=e.getBoundingClientRect(),m=window,v=m.innerWidth,g=m.innerHeight,b=window.scrollY||document.documentElement.scrollTop,y=window.scrollX||document.documentElement.scrollLeft;s&&(p=(0,f.getOffsetRect)(e,s),v=s.clientWidth,g=s.clientHeight,b=s.scrollTop,y=s.scrollLeft,d="absolute");var w=null==t?void 0:t.getBoundingClientRect(),_=(null==w?void 0:w.width)||0,k=(null==w?void 0:w.height)||0,C=_?Math.max(p.width,_):void 0,E=k?Math.max(p.height,k):void 0;if(r===c){var I=p.top-b;r=b+g-p.top-p.height>I?"bottom":"top"}if(o===c){var x=p.left+.5*p.width,O=y+2*v/3;o=x>=y+v/3&&x<=O?"center":x>O?"right":"left"}var A=p.left,M=p.top,P=A+p.width,S=M+p.height,j=.5*p.width,N=.5*_,L=.5*p.height,D=.5*k,R=p.width<_,T=p.height<k,U=M<k,B=S+k>g+b,q=S<k,z=M+L<D,F=M+k>g+b,G=M+L+D>g+b,V=P<_,H=P+_>v+y,K=A+j<N,W=A+j+N>v+y,$="horizontal"===i,Y="vertical"===i;k&&_&&(Y||(("top"===r&&U||"center"===o&&z||l.includes(o)&&q)&&(r="bottom"),("bottom"===r&&B||"center"===o&&G||l.includes(o)&&F)&&(r="top")),$||(u.includes(r)&&(l.includes(o)&&(V&&(o="left"),H&&(o="right")),"center"===o&&(W&&(o="right"),K&&(o="left"))),l.includes(r)&&(V&&(r="right",o="center"===o?o:"left"),H&&(r="left",o="center"===o?o:"right"))));if("side"===n){var Z={};switch(r){case"top":Z={width:C,top:M-k};break;case"bottom":Z={width:C,top:S};break;case"left":Z={height:E,left:A-_};break;case"right":Z={height:E,left:P}}return u.includes(r)&&R&&("right"===o&&(Z.left=P-_),"center"===o&&(Z.left=A+j-N),$&&(("center"===o&&K||"right"===o&&V)&&(Z.left=0),("center"===o&&W||"left"===o&&H)&&(Z.left=v-_+y))),l.includes(r)&&T&&("center"===o&&(Z.top=M+L-D),Y&&(("center"===o&&z||l.includes(o)&&q)&&(Z.top=0),("center"===o&&G||l.includes(o)&&F)&&(Z.top=g-k+b))),[h(h({top:M,left:A},Z),{},{position:d}),o,r]}switch(r){case"top":A+=.5*p.width;break;case"right":A+=p.width,M+=.5*p.height;break;case"bottom":A+=.5*p.width,M+=p.height;break;case"left":M+=.5*p.height}return[{top:M,left:A,width:_,height:k,position:d},o,r]}(N.current,S,y,g,_,c,k,null!=x&&x.current?x.current:void 0),t=(0,a.default)(e,3),n=t[0],r=t[1],o=t[2];T(n),z(r),H(o)}}),[C,y,g,_,N,c,S,x,k]),s.createElement(s.Fragment,null,s.cloneElement(I,K),c&&s.createElement(l.Portal,(0,r.default)({},O,{ref:W,className:u()("MEPopper","MEConfig",q&&"MEPopper--align".concat((n=q,n.length>0?n.slice(0,1).toUpperCase()+n.slice(1):"")),V&&"MEPopper--".concat(V)),"data-align":q,"data-position":V,portalClassName:E,style:R||void 0,portalTarget:(null==x?void 0:x.current)||A}),C))}))},826954:(e,t,n)=>{"use strict";n.d(t,{Portal:()=>d});var r=n(314957),o=n(621094),a=n(975066),i=n(278765),s=n(667294),c=n(973935),u=n(784970),l=["children","portalClassName","portalTarget"],d=(0,s.forwardRef)((function(e,t){var n=e.children,d=e.portalClassName,f=e.portalTarget,p=(0,i.default)(e,l),m=(0,s.useState)(null),v=(0,a.default)(m,2),h=v[0],g=v[1],b=(0,u.usePrevious)(d);return(0,s.useEffect)((function(){if(h){var e,t;if(b)(e=h.classList).remove.apply(e,(0,o.default)(b.split(" ")));if(d)(t=h.classList).add.apply(t,(0,o.default)(d.split(" ")))}}),[h,d,b]),(0,s.useLayoutEffect)((function(){if(null!==f){var e=function(e,t){var n,r=document.createElement("div");e&&(n=r.classList).add.apply(n,(0,o.default)(e.split(" ")));return(t||document.body).appendChild(r)}(d,f);return g(e),function(){e.remove()}}}),[f]),h?c.createPortal(s.createElement("div",(0,r.default)({},p,{ref:t}),n),h):null}))},635544:(e,t,n)=>{"use strict";n.d(t,{Provider:()=>d});var r=n(322559),o=n(667294),a=n(784970),i=n(707731),s=n(48521),c=n(124576),u=n(131330);function l(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}var d=function(e){var t=e.children,n=e.env,d=e.featureFlags,f=e.state,p=e.dispatch,m=e.owner,v=e.viewer,h=(0,o.useCallback)((function(e){p(function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?l(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):l(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({type:"CacheUpdateReceived"},e))}),[p]);return o.createElement(a.BrowserEnvProvider,{value:n},o.createElement(s.KeyBoardHandlersProvider,null,o.createElement(c.RouterProvider,null,o.createElement(i.ModalsProvider,{modals:n.modals.system,modalsStack:n.modals.stack},o.createElement(a.DispatchProvider,{value:p},o.createElement(a.FeatureFlagsProvider,{value:d},o.createElement(a.UserSettingsProvider,{value:f.userSettings},o.createElement(a.HelpHintsProvider,{value:f.helpHints},o.createElement(a.OnlinesProvider,{value:f.onlines},o.createElement(a.TypingsProvider,{value:f.typings},o.createElement(a.PeersProvider,{value:f.peers},o.createElement(a.OwnerProvider,{value:m},o.createElement(a.ConvosProvider,{value:f.convos},o.createElement(a.ConvosSearchIndexProvider,{value:f.convosSearchIndex},o.createElement(a.ViewerProvider,{value:v},o.createElement(a.InsertIntoCacheProvider,{value:h},o.createElement(u.MessagesDraftsContext.Provider,{value:f.messagesDrafts},t)))))))))))))))))}},124576:(e,t,n)=>{"use strict";n.d(t,{RouterProvider:()=>s,useRouter:()=>c,useConvoRoute:()=>u});var r=n(975066),o=n(784970),a=n(667294),i=(0,a.createContext)({}),s=function(e){var t=e.children,n=(0,o.useBrowserEnv)().router,s=(0,a.useState)(n.currentRoute),c=(0,r.default)(s,2),u=c[0],l=c[1];return(0,a.useLayoutEffect)((function(){var e=n.subscribe((function(e){l(e)}));return function(){return e()}}),[n]),a.createElement(i.Provider,{value:{router:n,route:u}},t)},c=function(){var e=(0,a.useContext)(i),t=e.route,n=e.router;return{route:t,navigate:n.push,back:n.back,forward:n.forward,replace:n.replace}},u=function(){var e=c().route;if("ConvoRoute"!==e.kind)throw Error("Используйте хук только внутри роута Convo");return e}},708787:(e,t,n)=>{"use strict";n.d(t,{Tooltip:()=>f});var r=n(314957),o=n(975066),a=n(278765),i=(n(581753),n(667294)),s=n(20700),c=n.n(s),u=n(39143),l=n(784970),d=["children","content","position","align","open","onOpen","onClose","delay","backgroundColor","pointerEvents"],f=function(e){var t=e.children,n=e.content,s=e.position,f=void 0===s?"auto":s,p=e.align,m=void 0===p?"auto":p,v=e.open,h=void 0!==v&&v,g=e.onOpen,b=e.onClose,y=e.delay,w=void 0===y?50:y,_=e.backgroundColor,k=void 0===_?"rgba(0, 0, 0, 0.72)":_,C=e.pointerEvents,E=void 0===C?"none":C,I=(0,a.default)(e,d),x=(0,l.useFeatureFlags)(),O=(0,i.useState)(h?"opened":"closed"),A=(0,o.default)(O,2),M=A[0],P=A[1],S=(0,i.useRef)(null),j=(0,i.useRef)(null),N=(0,i.useRef)(null),L=function(){j.current&&clearTimeout(j.current),N.current&&clearTimeout(N.current),j.current=N.current=null},D=(0,i.useCallback)((function(){P("closed"),b&&b()}),[b]),R=(0,i.useCallback)((function(){"opened"===M?(P("is_closing"),N.current=window.setTimeout(D,200)):D()}),[M,D]),T=(0,i.useCallback)((function(){L(),j.current=window.setTimeout((function(){P("opened"),g&&g()}),w)}),[w,g]),U=(0,i.useCallback)((function(){L(),j.current=window.setTimeout(R,0)}),[R]);(0,i.useEffect)((function(){var e=S.current;return e&&(e.addEventListener("mouseenter",T),e.addEventListener("mouseleave",U)),function(){e&&(e.removeEventListener("mouseenter",T),e.removeEventListener("mouseleave",U))}}),[T,U]),(0,i.useEffect)((function(){return L}),[]),(0,i.useEffect)((function(){h?T():U()}),[h]);var B=i.createElement("div",{className:c()("METooltip",{"METooltip--removed":"is_closing"===M}),style:{"--tooltip_dark_background":k,pointerEvents:E}},n);return x.me_fc_tooltips?i.createElement(u.Popper,(0,r.default)({content:B,position:f,align:m,open:"closed"!==M,ref:S,portalClassName:"MEConfig"},I),t):t}},812869:(e,t,n)=>{"use strict";n.d(t,{isModuleKeyCombo:()=>l,isGlobalKeyCombo:()=>f,getKeyCombo:()=>p});var r,o,a,i,s=n(322559),c=n(887075);!function(e){e.Mod="Mod",e.Alt="Alt",e.Shift="Shift",e.Meta="Meta"}(o||(o={})),function(e){e.ArrowLeft="ArrowLeft",e.ArrowRight="ArrowRight",e.ArrowDown="ArrowDown",e.ArrowUp="ArrowUp",e.Escape="Escape",e.Enter="Enter",e.Backspace="Backspace",e.Tab="Tab",e.Slash="/",e.PageDown="PageDown",e.PageUp="PageUp",e.Home="Home",e.End="End"}(a||(a={})),function(e){e.F="F"}(i||(i={}));var u=[o.Shift,a.ArrowDown,a.ArrowUp,a.Enter,a.Escape,a.Backspace,"".concat(o.Shift,"+").concat(a.Enter),"".concat(o.Mod,"+").concat(a.Enter),a.ArrowLeft,a.ArrowRight,a.Tab],l=function(e){return u.includes(e)},d=["".concat(o.Mod,"+").concat(i.F),"".concat(o.Mod,"+").concat(o.Shift,"+").concat(i.F),"".concat(o.Mod,"+").concat(a.Slash)],f=function(e){return d.includes(e)},p=function(e){var t=[];return Object.values(o).forEach((function(n){m[n](e)&&t.push(n)})),Object.values(a).forEach((function(n){return e.key===n&&t.push(n)})),Object.values(i).forEach((function(n){e.key.toUpperCase()!==n?e.code.slice(3)===n&&t.push(n):t.push(n)})),t.join("+")},m=(r={},(0,s.default)(r,o.Mod,(function(e){return c.isMac?e.metaKey:e.ctrlKey})),(0,s.default)(r,o.Alt,(function(e){return e.altKey})),(0,s.default)(r,o.Shift,(function(e){return e.shiftKey})),(0,s.default)(r,o.Meta,(function(e){return c.isMac?e.ctrlKey:e.metaKey})),r)},887075:(e,t,n)=>{"use strict";function r(e,t){if("undefined"==typeof window||!(e instanceof HTMLElement))return{top:0,left:0,width:0,height:0};var n=e.getBoundingClientRect(),r=null==t?void 0:t.getBoundingClientRect(),o=document.body,a=document.documentElement,i=(t?t.scrollTop:window.pageYOffset)||a.scrollTop||o.scrollTop,s=(t?t.scrollLeft:window.pageXOffset)||a.scrollLeft||o.scrollLeft,c=a.clientTop||o.clientTop||0,u=a.clientLeft||o.clientLeft||0;return{top:n.top-((null==r?void 0:r.top)||0)+i-c,left:n.left-((null==r?void 0:r.left)||0)+s-u,width:n.width,height:n.height}}n.d(t,{getOffsetRect:()=>r,browser:()=>a,isMac:()=>i,getAttachForwardIndent:()=>s,getExpectedAttachWidth:()=>c});var o=navigator.userAgent.toLowerCase(),a={version:(o.match(/.+(?:me|ox|on|rv|it|era|opr|ie|edge)[/: ]([\d.]+)/)||[0,"0"])[1],safari:!/chrome/i.test(o)&&/webkit|safari|khtml/i.test(o),touch:window.matchMedia("(pointer: coarse)").matches,voiceRecordingSupported:Boolean(window.navigator.mediaDevices&&"getUserMedia"in window.navigator.mediaDevices&&(window.AudioContext||window.webkitAudioContext))},i=navigator.userAgent.includes("Macintosh;"),s=function(e){return e>0?22+10*(e-1):0};function c(e,t,n,r){var o=r+(t?0:8)-s(n);return[o,o*(e?"undefined"!=typeof window?window.devicePixelRatio:2:1)]}},190831:(e,t,n)=>{"use strict";n.d(t,{LANG_PACK_URL:()=>r,API_BASE_URL:()=>o,API_DEFAULT_TIMEOUT:()=>a,API_RATE_LIMIT:()=>i,API_RATE_LIMIT_WINDOW:()=>s,API_MIN_RETRY_TIMEOUT:()=>c,API_MAX_RETRY_TIMEOUT:()=>u,API_USER_FIELDS:()=>l,API_GROUP_FIELDS:()=>d,FEATURE_TOGGLE_REFETCH_INTERVAL:()=>f,CONVOS_PER_PAGE:()=>p,CHANNELS_PER_PAGE:()=>m,MESSAGES_PER_PAGE:()=>v,POSTS_PER_PAGE:()=>h,TYPING_EXPIRATION_TIME:()=>g,MAX_FORWARD_LEVEL:()=>b,VK_ADMIN_PEER_ID:()=>y,VK_PAY_APP_ID:()=>w,ATTACH_INVITE_LINK_URL_BASE:()=>_});var r="https://vk.com/js/lang-pack.js?name=me&format=json",o="https://api.vk.com",a=3e4,i=9,s=3e3,c=500,u=2e4,l=["id","first_name","first_name_gen","first_name_acc","last_name","last_name_gen","last_name_acc","sex","photo_50","photo_100","photo_200","contact_name","occupation","bdate","city","screen_name","online_info","verified","blacklisted","blacklisted_by_me","can_call","can_write_private_message","can_send_friend_request","can_invite_to_chats","friend_status","followers_count"],d=["id","name","screen_name","type","photo_50","photo_100","members_count","member_status","verified","is_closed","can_message","deactivated","activity","ban_info"],f=36e5,p=30,m=30,v=80,h=80,g=5e3,b=5,y=100,w=7131443,_="https://vk.me/join/"},151225:(e,t,n)=>{"use strict";n.d(t,{preview:()=>l,link:()=>d,ids:()=>f,last:()=>p,addAttach:()=>m,removeAttach:()=>v,isAttachInviteLink:()=>h,isInviteLink:()=>g,rearrangeAttaches:()=>b});var r=n(621094),o=n(975066),a=n(21705),i=n(314432),s=n(190831);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function l(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:0,a=arguments.length>3&&void 0!==arguments[3]&&arguments[3],i=["o","p","q","r"];if("Video"===e.kind||"Gift"===e.kind||"OptimisticVideo"===e.kind)return e.image.find((function(e){var t=e.width,o=e.height;return t>=n&&o>=r}))||e.image[e.image.length-1]||null;var s="Photo"===e.kind||"OptimisticPhoto"===e.kind?e.sizes:e.image;if(!s)return null;var c,u=s.get("local");return u||(a?(null===(c=Array.from(s.entries()).find((function(e){var t=(0,o.default)(e,2),a=t[0],s=t[1],c=s.width,u=s.height;return i.includes(a)&&c>=n&&u>=r})))||void 0===c?void 0:c[1])||s.get("r")||s.get("q")||s.get("p")||s.get("o")||null:(null===(t=Array.from(s.entries()).find((function(e){var t=(0,o.default)(e,2),a=t[0],s=t[1],c=s.width,u=s.height;return!i.includes(a)&&c>=n&&u>=r})))||void 0===t?void 0:t[1])||s.get("w")||s.get("z")||s.get("y")||s.get("x")||s.get("m")||s.get("s")||null)}function d(e){switch(e.kind){case"Photo":var t=e.accessKey?"/".concat(e.accessKey):"";return"/im?z=photo".concat(e.ownerId,"_").concat(e.id).concat(t);case"Video":var n=e.accessKey?"/".concat(e.accessKey):"";return"/im?z=video".concat(e.ownerId,"_").concat(e.id).concat(n);case"Audio":return"/audio".concat(e.ownerId,"_").concat(e.id);case"AudioPlaylist":var r=e.accessKey?"_".concat(e.accessKey):"";return"/music/".concat(e.type,"/").concat(e.ownerId,"_").concat(e.id).concat(r);case"Podcast":return"/im?z=podcast".concat(e.ownerId,"_").concat(e.id);case"Doc":return"/doc".concat(e.ownerId,"_").concat(e.id);case"Sticker":return"/stickers";case"Link":case"Article":return e.url;case"Voice":case"MoneyTransfer":case"MoneyRequest":case"Gift":case"Graffiti":case"MarketAlbum":case"Call":case"Geo":case"ActiveCall":return"";case"Market":return"/market".concat(e.ownerId,"?w=product").concat(e.ownerId,"_").concat(e.id);case"Poll":return"/im?w=poll".concat(e.ownerId,"_").concat(e.id);case"Story":return"/im?w=story".concat(e.ownerId,"_").concat(e.id);case"Wall":case"WallHistory":return"/wall".concat(e.ownerId,"_").concat(e.id);case"WallReply":return"/wall".concat(e.ownerId,"_").concat(e.postId,"?reply=").concat(e.id)+(e.parentsStack&&e.parentsStack.length>0?"&thread=".concat(e.parentsStack.join("_")):"");case"MiniApp":return"/im?w=".concat(e.appLink);case"DonutLink":return"/donut/club".concat(i.toRealId(e.ownerId));default:return(0,a.exhaustivenessCheck)(e)}}function f(e){var t,n=[],r=c(e.photos||[]);try{for(r.s();!(t=r.n()).done;){var o=t.value;n.push("photo".concat(o.ownerId,"_").concat(o.id))}}catch(e){r.e(e)}finally{r.f()}var a,i=c(e.videos||[]);try{for(i.s();!(a=i.n()).done;){var s=a.value;n.push("video".concat(s.ownerId,"_").concat(s.id))}}catch(e){i.e(e)}finally{i.f()}var u,l=c(e.audios||[]);try{for(l.s();!(u=l.n()).done;){var d=u.value;n.push("audio".concat(d.ownerId,"_").concat(d.id))}}catch(e){l.e(e)}finally{l.f()}var f,p=c(e.docs||[]);try{for(p.s();!(f=p.n()).done;){var m=f.value;n.push("doc".concat(m.ownerId,"_").concat(m.id))}}catch(e){p.e(e)}finally{p.f()}return e.voice&&n.push("doc".concat(e.voice.ownerId,"_").concat(e.voice.id)),n}function p(e){return 0===Object.keys(e).length?null:e.audios&&e.audios[e.audios.length-1]||e.voice||e.docs&&e.docs[e.docs.length-1]||e.story||e.market||e.link||e.videos&&e.videos[e.videos.length-1]||e.photos&&e.photos[e.photos.length-1]||e.sticker||e.poll||e.call||e.wall||e.gift||e.podcast||e.audioPlaylist||e.geo||e.moneyTransfer||e.moneyRequest||e.activeCall||e.graffiti||null}function m(e,t,n){var o=(0,a.toNonEmpty)(t);if(o)switch(n){case"photos":e.photos?e.photos=[].concat((0,r.default)(e.photos||[]),(0,r.default)(o)):e.photos=o;break;case"videos":e.videos?e.videos=[].concat((0,r.default)(e.videos||[]),(0,r.default)(o)):e.videos=o;break;case"audios":e.audios?e.audios=[].concat((0,r.default)(e.audios||[]),(0,r.default)(o)):e.audios=o;break;case"docs":e.docs?e.docs=[].concat((0,r.default)(e.docs||[]),(0,r.default)(o)):e.docs=o;break;default:(0,a.exhaustivenessCheck)(n)}}function v(e,t){switch(t.kind){case"Audio":if(!e.audios)break;var n=(0,a.toNonEmpty)(e.audios.filter((function(e){return e.id!==t.id})));n?e.audios=n:delete e.audios;break;case"Doc":if(!e.docs)break;var r=(0,a.toNonEmpty)(e.docs.filter((function(e){return e.id!==t.id})));r?e.docs=r:delete e.docs;break;case"Photo":if(!e.photos)break;var o=(0,a.toNonEmpty)(e.photos.filter((function(e){return e.id!==t.id})));o?e.photos=o:delete e.photos;break;case"Video":if(!e.videos)break;var i=(0,a.toNonEmpty)(e.videos.filter((function(e){return e.id!==t.id})));i?e.videos=i:delete e.videos;break;case"Voice":if(!e.voice)break;delete e.voice;break;default:(0,a.exhaustivenessCheck)(t)}}function h(e){return"Link"===e.kind&&g(e.url)}function g(e){return e.startsWith(s.ATTACH_INVITE_LINK_URL_BASE)}function b(e,t,n){var r=t.currentPosition,o=t.newPosition;switch(n){case"photos":var i=e[n];if(!i)return;var s=i[r];if(!s)return;i.splice(r,1),i.splice(o,0,s),e[n]=i;break;case"videos":var c=e[n];if(!c)return;var u=c[r];if(!u)return;c.splice(r,1),c.splice(o,0,u),e[n]=c;break;case"audios":var l=e[n];if(!l)return;var d=l[r];if(!d)return;l.splice(r,1),l.splice(o,0,d),e[n]=l;break;case"docs":var f=e[n];if(!f)return;var p=f[r];if(!p)return;f.splice(r,1),f.splice(o,0,p),e[n]=f;break;default:(0,a.exhaustivenessCheck)(n)}}},573974:(e,t,n)=>{"use strict";function r(e,t,n){return encodeURIComponent("".concat("app"+e+(n?"_"+n:""),"#").concat(t))}function o(e){return e}n.d(t,{createAppUrl:()=>r,resolveId:()=>o})},716352:(e,t,n)=>{"use strict";n.d(t,{resolveId:()=>a,isEmpty:()=>i,isUnread:()=>s,isHidden:()=>c,lastPost:()=>u,historyAround:()=>l,insertPosts:()=>d,safeGet:()=>f});var r=n(21705),o=n(30966);function a(e){return e>-189e7&&e<0||(e=0),e}function i(e){return 0===e.history.length}function s(e){return e.unreadCount>0}function c(e){return e.majorSortId<=0&&e.minorSortId<=0}function u(e){for(var t=e.history,n=t.length-1;n>=0;n--){var o=t[n];if(!o)throw new Error("item по индексу не существует");switch(o.kind){case"PostItem":return o.post;case"DeletedItem":break;case"GapItem":return;default:return(0,r.exhaustivenessCheck)(o)}}}function l(e,t){var n=e.history[0];if(n){var r,a=!1,i=0,s="GapItem"===n.kind?n:{kind:"GapItem",fromCmid:o.resolveCmid(0),toCmid:o.resolveCmid(0)};for(r=i;r<e.history.length;r++){var c=e.history[r];if(!c)throw new Error("item по индексу не существует");if("GapItem"===c.kind){if(s.toCmid<=t&&c.fromCmid>=t){a=!0;break}i=r,s=c}else if(r===e.history.length-1&&s.toCmid<=t){a=!0;break}}if(a)return e.history.slice(i,r+1).reduce((function(e,t){return"DeletedItem"!==t.kind&&e.push(t),e}),[])}}function d(e,t,n){var a=[],i=null,s=0,c=0,u=e.history[s],l=t[c];for(n&&!u&&l&&a.push({kind:"GapItem",fromCmid:o.resolveCmid(1),toCmid:o.resolveCmid(l.cmid-1)});s<e.history.length||c<t.length;)if(u=e.history[s],l=t[c],u&&l)switch(u.kind){case"PostItem":var d=l.cmid-u.post.cmid;d<=0&&(a.push({kind:"PostItem",post:l}),i="insert",c+=1,0===d&&(s+=1)),d>0&&(a.push(u),i="history",s+=1);continue;case"GapItem":if(l.cmid>u.toCmid&&null!==i&&n){a.push(u),i="history",s+=1;continue}for(u.fromCmid<l.cmid&&("history"===i||null===i&&n)&&(a.push({kind:"GapItem",fromCmid:u.fromCmid,toCmid:o.resolveCmid(l.cmid-1)}),i="history");l.cmid<=u.toCmid;){a.push({kind:"PostItem",post:l}),i="insert";var f=t[c+=1];if(!f)break;l=f}l.cmid<u.toCmid&&(a.push({kind:"GapItem",fromCmid:o.resolveCmid(l.cmid+1),toCmid:u.toCmid}),i="history"),s+=1;continue;case"DeletedItem":continue;default:(0,r.exhaustivenessCheck)(u)}else l&&(a.push({kind:"PostItem",post:l}),c+=1),u&&(a.push(u),s+=1);e.history=a}function f(e,t){var n=e.get(t);if(n)return n;if(r.isDev)throw new Error("Канал ".concat(t," не найден в кэше! Обрати внимание на то как загружаются недостающие данные в сторе."));return e.get(a(0))}},509727:(e,t,n)=>{"use strict";n.d(t,{CASPER_MESSAGE_DELETE_TTL:()=>g,hasGap:()=>b,isMuted:()=>y,isCasper:()=>w,isMR:()=>_,getMRSenderPeerId:()=>k,canForwardFrom:()=>C,canForwardTo:()=>E,length:()=>I,canShow:()=>x,isPinned:()=>O,canPin:()=>A,canDeleteMessageForAll:()=>M,isUnread:()=>P,isUnreadOut:()=>S,hasUnreadExpireables:()=>j,hasUnreadMentions:()=>N,isEmpty:()=>L,isNew:()=>D,head:()=>R,findMessageById:()=>T,allQueuedMessages:()=>U,getConvoFailedMessagesCount:()=>B,iterable:()=>q,isMessageUnread:()=>z,isCmidInIterator:()=>F,canReadMembers:()=>G,isHidden:()=>V,updatePush:()=>H,removeQueued:()=>K,appendMessage:()=>W,appendQueuedMessage:()=>$,replaceMessage:()=>Y,deleteMessage:()=>Z,restoreMessage:()=>Q,insertMessages:()=>J,cleanup:()=>X,markRead:()=>ee,readInUntil:()=>te,readOutUntil:()=>ne,updateSendingFail:()=>oe,changeQueuedMessageEntrypoint:()=>ae,updateSortId:()=>ie,updateIsNew:()=>se,updateFlags:()=>ce,updateMessageFlags:()=>ue,clearChatDataOnLeave:()=>le,addMember:()=>de,removeMember:()=>fe,replaceMembers:()=>pe,setChatPermissions:()=>me,replaceInviteLinks:()=>ve,pinMessage:()=>he,unpinMessage:()=>ge,updateActiveCall:()=>be,setConvoState:()=>ye,fromAcceptedMessageRequest:()=>we,restrictWrite:()=>_e,allowWrite:()=>ke,changeUserState:()=>Ce,safeGet:()=>Ee});var r=n(278765),o=n(621094),a=n(293209),i=n(322559),s=n(314432),c=n(980662),u=n(21705),l=n(190831),d=["isMarkedUnread","isArchived","DONT_USE_isMuted"],f=["inviterPeerId","canWrite"];function p(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function m(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?p(Object(n),!0).forEach((function(t){(0,i.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):p(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function v(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return h(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return h(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function h(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var g=144e5;function b(e){return void 0!==e.afterGapCmid}function y(e){return"everything"!==e.push.mode}function w(e){return("ChatConvo"===e.kind||"MessageRequestChatConvo"===e.kind)&&e.isCasper}function _(e){return"MessageRequestChatConvo"===e.kind||"MessageRequestUserConvo"===e.kind}function k(e){return"MessageRequestUserConvo"===e.kind?e.peerId:e.inviterPeerId}function C(e){return!w(e)}function E(e){return e.canWrite.allowed}function I(e){return{persisted:e.persisted.size,total:e.persisted.size+e.queued.size}}function x(e){var t=e.hasMore?e.unreadCount+1:e.unreadCount;return!(!b(e)&&e.persisted.size<t)}function O(e){return[4,5,6].some((function(t){return(e.majorSortId&1<<t)>0}))}function A(e){return!e.isArchived&&!L(e)&&"MessageRequestUserConvo"!==e.kind&&"MessageRequestChatConvo"!==e.kind&&!w(e)}function M(e,t,n){var r=s.isUserPeerId(t.authorId)||s.isGroupPeerId(t.authorId),o="ChatConvo"===e.kind&&e.adminIds.has(n),a=t.authorId===n,i=!(!r||"ChatConvo"!==e.kind)&&e.adminIds.has(t.authorId),c="ChatConvo"!==e.kind||"in"===e.state;switch(!0){case Date.now()-t.sentAt>864e5:case!e.canWrite.allowed:case!c:case e.peerId===n:return!1;case o&&!i:case a:return!0;default:return!1}}function P(e){return e.unreadCount>0||e.isMarkedUnread}function S(e){if("MessageRequestChatConvo"===e.kind)return!1;var t=R(e);return!!t&&(t.isOut&&z(e,t))}function j(e){return e.unreadExpireables.size>0}function N(e){switch(e.kind){case"UserConvo":case"GroupConvo":case"ContactConvo":case"MessageRequestChatConvo":case"MessageRequestUserConvo":return!1;case"ChatConvo":return e.unreadMentions.size>0;default:return(0,u.exhaustivenessCheck)(e)}}function L(e){return!e.hasMore&&0===e.persisted.size&&0===e.queued.size}function D(e){return e.isNew}function R(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.queued.get(e.queuedId);if(n)return n;for(var r=e.persistedCmid;r>=1;r--){var o=e.persisted.get(r);if(o){if(t)return o;if("MarkedDeleted"!==o.kind)return o}}}function T(e,t){var n,r=v(q(e));try{for(r.s();!(n=r.n()).done;){var o=n.value.message;if("id"in o&&o.id===t)return o}}catch(e){r.e(e)}finally{r.f()}}function U(e){var t,n=[],r=v(q(e));try{for(r.s();!(t=r.n()).done;){var o=t.value.message;"Queued"===o.kind&&n.push(o)}}catch(e){r.e(e)}finally{r.f()}return n.reverse()}function B(e){return U(e).filter((function(e){return e.hasFailed})).length}function q(e){return(0,i.default)({},Symbol.iterator,(function(){var t=void 0!==e.afterGapCmid?e.persisted.get(e.afterGapCmid):R(e);return{next:function(){var n=t;return n?"Queued"!==n.kind?{value:{message:n,older:t=e.persisted.get(n.olderCmid)}}:{value:{message:n,older:t=e.queued.get(n.olderId)||e.persisted.get(e.persistedCmid)}}:{done:!0,value:null}}}}))}function z(e,t){if(t.peerId!==e.peerId)throw new Error("Передано сообщение не принадлежащее беседе");return"Queued"===t.kind||(t.isOut?t.cmid>e.outReadBy:t.cmid>e.inReadBy)}function F(e,t){return e.persisted.has(t)&&(!e.afterGapCmid||t<=e.afterGapCmid)}function G(e){return e.canWrite.allowed||!e.canWrite.allowed&&"no_access"!==e.canWrite.reason}function V(e){return e.majorSortId<=0&&e.minorSortId<=0&&0===e.queued.size}function H(e,t){e.push=t}function K(e,t){var n=e.queued.get(t);if(n){e.queued.delete(n.randomId);var r=e.queued.get(n.olderId),o=e.queued.get(n.newerId);o&&(o.olderId=n.olderId),r&&(r.newerId=n.newerId),e.queuedId===n.randomId&&(e.queuedId=n.olderId)}}function W(e,t,n,r,o){if(t.peerId!==e.peerId)throw new Error("Передано сообщение не принадлежащее беседе");if(!(e.persistedCmid>=t.cmid)){if(!t.isOut&&z(e,t)&&e.unreadCount++,re(t.isOut,e),o){switch(o.kind){case"InputKeyboardUpsertEvent":e.currentKeyboard=o.keyboard;break;case"InputKeyboardDeleteEvent":delete e.currentKeyboard;break;default:return(0,u.exhaustivenessCheck)(o)}e.currentKeyboard="InputKeyboardUpsertEvent"===o.kind?o.keyboard:void 0}e.minorSortId=n,"ChatConvo"===e.kind&&r&&e.unreadMentions.add(t.cmid),"Normal"===t.kind&&t.expireTTL&&e.unreadExpireables.add(t.cmid),"Normal"===t.kind&&t.randomId&&(K(e,t.randomId),0===e.queued.size&&(e.queuedId=c.resolveRandomId()));var a=e.persisted.get(e.persistedCmid);a&&(a.newerCmid=t.cmid),e.persisted.set(t.cmid,m(m({},t),{},{newerCmid:c.resolveCmid(),olderCmid:e.persistedCmid})),e.persistedCmid=t.cmid}}function $(e,t){e.queued.set(t.randomId,m(m({},t),{},{newerId:c.resolveRandomId(),olderId:e.queuedId}));var n=e.queued.get(e.queuedId);n&&(n.newerId=t.randomId),e.queuedId=t.randomId,re(t.isOut,e)}function Y(e,t,n){"ChatConvo"===e.kind&&(e.unreadMentions.delete(t.cmid),n&&z(e,t)&&e.unreadMentions.add(t.cmid)),e.unreadExpireables.delete(t.cmid),("Normal"===t.kind&&t.expireTTL||"Expired"===t.kind)&&z(e,t)&&e.unreadExpireables.add(t.cmid);var r=e.persisted.get(t.cmid);r&&e.persisted.set(r.cmid,m(m({},t),{},{newerCmid:r.newerCmid,olderCmid:r.olderCmid}))}function Z(e,t){var n=e.persisted.get(t);if(n){!n.isOut&&z(e,n)&&(e.unreadCount=Math.max(0,e.unreadCount-1)),"ChatConvo"===e.kind&&e.unreadMentions.delete(n.cmid),e.unreadExpireables.delete(n.cmid);var r=e.persisted.get(n.newerCmid),o=e.persisted.get(n.olderCmid);o&&(o.newerCmid=n.newerCmid,e.persistedCmid===n.cmid&&(e.persistedCmid=o.cmid)),r&&(r.olderCmid=n.olderCmid),e.persisted.delete(n.cmid)}}function Q(e,t,n){if(e.persisted.has(t.cmid))Y(e,t,n);else{for(var r,o=t.cmid;o>=1&&!(r=e.persisted.get(o));o--);if(r&&(!(r.cmid<e.persistedCmid)||r.newerCmid)){r.cmid===e.afterGapCmid&&(e.afterGapCmid=t.cmid),r.cmid===e.persistedCmid&&(e.persistedCmid=t.cmid);var a=e.persisted.get(r.newerCmid);a&&(a.olderCmid=t.cmid),r.newerCmid=t.cmid,e.persisted.set(t.cmid,m(m({},t),{},{newerCmid:(null==a?void 0:a.cmid)||c.resolveCmid(),olderCmid:r.cmid})),!t.isOut&&z(e,t)&&(e.unreadCount+=1),"ChatConvo"===e.kind&&n&&e.unreadMentions.add(t.cmid),X(e)}}}function J(e,t,n){void 0!==n&&(e.hasMore=n);var r=t[0];if(r){var o=t=t.filter((function(t){return!(null!=e&&e.persisted.has(t.cmid))})),i=(0,a.default)(o),s=i[0],u=i.slice(1);if(s){var l,d=new Map,f=m(m({},s),{},{olderCmid:c.resolveCmid(),newerCmid:c.resolveCmid()}),p=f,h=v(u);try{for(h.s();!(l=h.n()).done;){var g=l.value;f.olderCmid=g.cmid,d.set(f.cmid,f),f=m(m({},g),{},{olderCmid:c.resolveCmid(),newerCmid:f.cmid})}}catch(e){h.e(e)}finally{h.f()}if(d.set(f.cmid,f),p&&f){for(var b,y=p.cmid;y<=e.persistedCmid&&!(b=e.persisted.get(y));y++);if(!b)return e.persistedCmid=p.cmid,void(e.persisted=d);var w=e.persisted.get(b.olderCmid),_=b.cmid>r.cmid+1;switch(!0){case!e.afterGapCmid&&_:e.afterGapCmid=p.cmid;break;case e.afterGapCmid&&r.id>e.afterGapCmid:e.afterGapCmid=_?p.cmid:void 0;break;case e.afterGapCmid&&!w&&_:return}b.olderCmid=p.cmid,p.newerCmid=b.cmid,w&&(f.olderCmid=w.cmid,w.newerCmid=f.cmid);var k,C=v(d.values());try{for(C.s();!(k=C.n()).done;){var E=k.value;e.persisted.set(E.cmid,E)}}catch(e){C.e(e)}finally{C.f()}}}}}function X(e){if(0===e.unreadCount&&b(e)&&function(e){if(e.afterGapCmid){var t,n=v(q(e));try{for(n.s();!(t=n.n()).done;){var r=t.value.message;"Queued"!==r.kind&&r.cmid<=e.afterGapCmid&&e.persisted.delete(r.cmid)}}catch(e){n.e(e)}finally{n.f()}delete e.afterGapCmid}}(e),!(e.unreadCount>0||b(e))){var t=l.MESSAGES_PER_PAGE;if(!(e.persisted.size<2*t)){for(var n=0,r=e.persisted.get(e.persistedCmid);r;){var o=e.persisted.get(r.olderCmid);n>=t&&(r.olderCmid=c.resolveCmid(),e.persisted.delete(r.cmid)),n++,r=o}e.hasMore=!0}}}function ee(e){e.isMarkedUnread=!1}function te(e,t,n){if(!(e.inReadBy>=t)){if("number"!=typeof n){var r=(0,o.default)(e.persisted.values()).filter((function(n){return!n.isOut&&z(e,n)&&n.cmid<=t})).length;n=Math.max(0,e.unreadCount-r)}switch(e.inReadBy=t,e.unreadCount=n,0===n&&(e.isMarkedUnread=!1),e.kind){case"UserConvo":case"GroupConvo":case"ContactConvo":case"MessageRequestUserConvo":case"MessageRequestChatConvo":break;case"ChatConvo":var a,i=v(e.unreadMentions);try{for(i.s();!(a=i.n()).done;){var s=a.value;s<=t&&e.unreadMentions.delete(s)}}catch(e){i.e(e)}finally{i.f()}break;default:(0,u.exhaustivenessCheck)(e)}var c,l=v(e.unreadExpireables);try{for(l.s();!(c=l.n()).done;){var d=c.value;d<=t&&e.unreadExpireables.delete(d)}}catch(e){l.e(e)}finally{l.f()}}}function ne(e,t){e.outReadBy>=t||(e.outReadBy=t)}function re(e,t){var n;e&&null!==(n=t.currentKeyboard)&&void 0!==n&&n.oneTime&&delete t.currentKeyboard}function oe(e,t,n){var r=e.queued.get(t);r&&c.updateFail(r,n)}function ae(e,t,n){var r=e.queued.get(t);r&&c.updateEntrypoint(r,n)}function ie(e,t){"majorSortId"in t?e.majorSortId=t.majorSortId:e.minorSortId=t.minorSortId}function se(e,t){e.isNew=t}function ce(e,t,n){var o,a=Ie({isMarkedUnread:e.isMarkedUnread,isArchived:e.isArchived});switch(t){case"unset":o=Ie(a&~n);break;case"replace":o=Ie(n);break;case"set":o=Ie(a|n);break;default:(0,u.exhaustivenessCheck)(t)}var i=o,s=i.isMarkedUnread,c=i.isArchived;i.DONT_USE_isMuted,(0,r.default)(i,d);e.isMarkedUnread=s,e.isArchived=c}function ue(e,t,n,r){var o=e.persisted.get(t);if(o){var a=c.updateFlags(o,n,r),i=a.isDeleted,s=a.isDeletedForAll,u=a.isSpam;((i||u)&&"MarkedDeleted"!==o.kind||s)&&Z(e,o.cmid)}}function le(e){e.membersCount=0,e.state="left",e.acl={canChangeInfo:!1,canChangeInviteLink:!1,canChangePin:!1,canInvite:!1,canPromoteUsers:!1,canSeeInviteLink:!1,canModerate:!1,canCopyChat:!1,canCall:!1,canUseMassMentions:!1,canChangeServiceType:!1,canChangeStyle:!1},e.adminIds=new Set,delete e.members,delete e.inviteLinks}function de(e,t){e.members&&(e.membersCount++,e.members.add(t))}function fe(e,t){var n;null!==(n=e.members)&&void 0!==n&&n.delete(t)&&e.membersCount--}function pe(e,t){e.membersCount=t.size,e.members=t}function me(e,t,n){e.permissions=t,e.isService=n}function ve(e,t){e.inviteLinks=t}function he(e,t){e.pinnedMessage=t}function ge(e){var t=e.pinnedMessage;return delete e.pinnedMessage,t}function be(e,t){e.activeCall=t}function ye(e,t){e.state=t}function we(e){if("MessageRequestUserConvo"===e.kind)return m(m({},e),{},{kind:"UserConvo"});e.inviterPeerId;var t=e.canWrite;return m(m({},(0,r.default)(e,f)),{},{kind:"ChatConvo",canWrite:!1===t.allowed&&"kicked"===t.reason?{allowed:!0}:t})}function _e(e,t){e.canWrite={allowed:!1,reason:t}}function ke(e){e.canWrite={allowed:!0}}function Ce(e,t){e.state=t}function Ee(e,t){var n=e.get(t);if(n)return n;if(u.isDev)throw new Error("Беседа ".concat(t," не найдена в кэше! Обрати внимание на то как загружаются недостающие данные в сторе."));return e.get(s.resolveId())}function Ie(e){var t={DONT_USE_isMuted:4,isMarkedUnread:20,isArchived:23};if("number"==typeof e){var n,r={},o=v(Object.keys(t));try{for(o.s();!(n=o.n()).done;){var a=n.value;r[a]=(e&1<<t[a])>0}}catch(e){o.e(e)}finally{o.f()}return r}var i,s=0,c=v(Object.keys(e));try{for(c.s();!(i=c.n()).done;){var u=i.value;e[u]&&(s|=1<<t[u])}}catch(e){c.e(e)}finally{c.f()}return s}},360202:(e,t,n)=>{"use strict";function r(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return o(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return o(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,a=function(){};return{s:a,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:a}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function o(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{resolveId:()=>a,isLoaded:()=>i,empty:()=>s,getLockId:()=>c,sorter:()=>u,push:()=>l,refresh:()=>d,deleteFolder:()=>f,setName:()=>p,removePeers:()=>m,addPeers:()=>v,replaceFolder:()=>h});function a(e){return e}function i(e){return e.boundaryMinorId!==1/0}function s(){return[]}function c(e){return"folder_".concat(e)}function u(e,t){var n=null==e?void 0:e.queued.get(e.queuedId),r=null==t?void 0:t.queued.get(t.queuedId);return n&&!r?-1:r&&!n?1:n&&r?r.sentAt-n.sentAt:t.minorSortId-e.minorSortId}function l(e,t,n,o){var a=e.find((function(e){return e.id===t}));if(a){var i,s=r(n);try{for(s.s();!(i=s.n()).done;){var c=i.value;c.folderIds.has(a.id)&&(a.boundaryMinorId>c.minorSortId&&(a.boundaryMinorId=c.minorSortId),d(e,c))}}catch(e){s.e(e)}finally{s.f()}a.hasMore=o,a.hasMore||(a.boundaryMinorId=0)}}function d(e,t){var n,o=r(e);try{for(o.s();!(n=o.n()).done;){var a=n.value;a.peerIds.delete(t.peerId),t.folderIds.has(a.id)&&t.minorSortId>=a.boundaryMinorId&&a.peerIds.add(t.peerId)}}catch(e){o.e(e)}finally{o.f()}}function f(e,t){var n=e.findIndex((function(e){return e.id===t}));-1!==n&&e.splice(n,1)}function p(e,t){e.name=t}function m(e,t,n){var o,a=[],i=r(t);try{for(i.s();!(o=i.n()).done;){var s=o.value,c=n.get(s);c&&(c.folderIds.delete(e),a.push(c))}}catch(e){i.e(e)}finally{i.f()}return a}function v(e,t,n){var o,a=[],i=r(t);try{for(i.s();!(o=i.n()).done;){var s=o.value,c=n.get(s);c&&(c.folderIds.add(e),a.push(c))}}catch(e){i.e(e)}finally{i.f()}return a}function h(e,t){var n=e.findIndex((function(e){return e.id===t.id}));-1!==n&&e.splice(n,1,t)}},980662:(e,t,n)=>{"use strict";n.d(t,{resolveId:()=>h,resolveCmid:()=>g,resolveRandomId:()=>b,getForeignRootCmid:()=>y,toPlainText:()=>w,link:()=>_,isEditable:()=>k,toPinned:()=>C,markDeleted:()=>E,restoreDeleted:()=>I,toForeign:()=>x,flow:()=>O,updateFail:()=>A,updateEntrypoint:()=>M,updateFlags:()=>P,newQueued:()=>S,convertFlags:()=>j,canChangeVoiceListenedStatus:()=>N,markVoiceListened:()=>L});var r=n(621094),o=n(278765),a=n(322559),i=n(641450),s=n(21705),c=["isSpam"],u=["message"],l=["kind","cmid","randomId","isOut","isImportant"],d=["isImportant","isSpam","isDeleted","isDeletedForAll","isVoiceListened","isOut","noPush","DONT_USE_ME_isStealth","DONT_USE_ME_isUnread","DONT_USE_ME_skipUnread"];function f(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return p(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return p(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function p(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e){return Number.isNaN(e)&&(e=0),!e||e<0?0:e}function g(e){return Number.isNaN(e)&&(e=0),!e||e<0?0:e}function b(e){return!e||e>0?0:e}function y(e){if("rootCmid"in e)return e.rootCmid}function w(e,t){return e.chunks.reduce((function(e,n){switch(n.kind){case"Text":return e+n.text;case"Mention":case"ClientMention":return e+"@"+n.screenName;case"NamedMention":case"MassMention":return e+n.displayName;case"AliasMention":return e+"@"+n.displayName;case"Email":return e+n.email;case"Url":return e+n.caption;case"Hashtag":return e+n.tag;case"LineBreak":return e+(t.multiline?"\n":" ");default:return(0,s.exhaustivenessCheck)(n)}}),"")}function _(e){var t="Normal"===e.kind&&e.id?"&msgid=".concat(e.id):"";return"/im?sel=".concat(e.peerId).concat(t)}function k(e,t){return e.isOut&&t-e.sentAt<864e5}function C(e){return{kind:"Pinned",id:e.id,cmid:e.cmid,peerId:e.peerId,authorId:e.authorId,chunks:e.chunks,sentAt:e.sentAt,forwardedMessages:e.forwardedMessages,replyMessage:e.replyMessage,attaches:e.attaches}}function E(e,t){return v(v({},e),{},{kind:"MarkedDeleted",isSpam:t})}function I(e){e.isSpam;return v(v({},(0,o.default)(e,c)),{},{kind:"Normal"})}function x(e){var t=e.message,n=(0,o.default)(e,u);t.kind,t.cmid,t.randomId,t.isOut,t.isImportant;return v(v({kind:"Foreign"},(0,o.default)(t,l)),n)}function O(e,t,n,r){var o=["gift","graffiti","call"],a=!(0,s.isSameDate)(e.sentAt,t.sentAt),i="Queued"!==e.kind&&"Queued"!==t.kind&&!t.isOut&&t.cmid>n&&(e.isOut?e.cmid<=r:e.cmid<=n),c=!("Normal"!==e.kind&&"MarkedDeleted"!==e.kind||"Normal"!==t.kind&&"MarkedDeleted"!==t.kind||e.authorId!==t.authorId||e.expireTTL||t.expireTTL||t.replyMessage||o.some((function(t){return void 0!==e.attaches[t]}))||o.some((function(e){return void 0!==t.attaches[e]}))),u="Expired"===e.kind&&"Expired"===t.kind;return!a&&!i&&t.sentAt-e.sentAt<=3e5&&(c||u)?{kind:"continue"}:{kind:"split",atUnread:i,atDate:a}}function A(e,t){e.hasFailed=t}function M(e,t){e.entrypoint=t}function P(e,t,n){var r,a,i,c,u,l={isOut:e.isOut,isSpam:!1,isDeleted:!1,isDeletedForAll:!1,noPush:!1};switch(e.kind){case"Normal":case"MarkedDeleted":c=j(v(v({},l),{},{isImportant:e.isImportant,isVoiceListened:!(null===(r=e.attaches)||void 0===r||null===(a=r.voice)||void 0===a||!a.isListened)}));break;case"Service":case"Expired":c=j(v(v({},l),{},{isImportant:!1,isVoiceListened:!1}));break;default:(0,s.exhaustivenessCheck)(e)}switch(t){case"unset":u=j(c&~n);break;case"replace":u=j(n);break;case"set":u=j(c|n);break;default:(0,s.exhaustivenessCheck)(t)}var f=u,p=f.isImportant,m=f.isSpam,h=f.isDeleted,g=f.isDeletedForAll,b=f.isVoiceListened,y=f.isOut;f.noPush,f.DONT_USE_ME_isStealth,f.DONT_USE_ME_isUnread,f.DONT_USE_ME_skipUnread,(0,o.default)(f,d);switch(e.kind){case"Normal":case"MarkedDeleted":e.isImportant=p,e.isOut=y,null!==(i=e.attaches)&&void 0!==i&&i.voice&&(e.attaches.voice.isListened=b);break;case"Service":case"Expired":break;default:(0,s.exhaustivenessCheck)(e)}return{isDeleted:h,isDeletedForAll:g,isSpam:m}}function S(e,t,n){var o=-Math.pow(2,31),a=b(-e.sentAt%Math.abs(o)),s=void 0!==t?x({message:t,rootPeerId:e.peerId,rootRandomId:a}):void 0,c=null==n?void 0:n.map((function(t){return x({message:t,rootPeerId:e.peerId,rootRandomId:a})}));return v(v({},e),{},{kind:"Queued",text:e.text,chunks:i.fromClientText(e.text),hasFailed:!1,randomId:a,replyMessage:s,forwardedMessages:null!=c&&c[0]?[c[0]].concat((0,r.default)(c.slice(1))):void 0})}function j(e){var t={DONT_USE_ME_isUnread:0,isOut:1,isImportant:3,isSpam:6,isDeleted:7,isVoiceListened:12,DONT_USE_ME_isStealth:16,isDeletedForAll:17,noPush:20,DONT_USE_ME_skipUnread:23};if("number"==typeof e){var n,r={},o=f(Object.keys(t));try{for(o.s();!(n=o.n()).done;){var a=n.value;r[a]=(e&1<<t[a])>0}}catch(e){o.e(e)}finally{o.f()}return r}var i,s=0,c=f(Object.keys(e));try{for(c.s();!(i=c.n()).done;){var u=i.value;e[u]&&(s|=1<<t[u])}}catch(e){c.e(e)}finally{c.f()}return s}function N(e){if(e.isOut)return!1;var t=e.attaches.voice;return!!t&&!t.isListened}function L(e){var t="Normal"===e.kind&&e.attaches.voice;return!!t&&(!!N(e)&&(t.isListened=!0,!0))}},911615:(e,t,n)=>{"use strict";n.d(t,{DEFAULT_DRAFT:()=>a,deleteDraftsWithoutKind:()=>i,isDraftEmpty:()=>s,getReply:()=>c,getEditingForwarded:()=>u,getForwarded:()=>l,getEditing:()=>d,getCommonDraftFields:()=>f});var r=n(975066),o=n(314432),a={kind:"Draft",text:"",attaches:{}};function i(e){return Object.entries(e).reduce((function(e,t){var n=(0,r.default)(t,2),a=n[0],i=n[1];"kind"in i&&(e[o.resolveId(+a)]=i);return e}),{})}function s(e,t){return("DraftWithForwarded"!==t.kind&&"Editing"!==t.kind||void 0===t.forwarded)&&(0===e.length&&0===Object.keys(t.attaches).length)}function c(e){if("DraftWithReply"===e.kind)return e.reply}function u(e){if("Editing"===e.kind)return e.forwarded}function l(e){if("DraftWithForwarded"===e.kind)return e.forwarded}function d(e){if("Editing"===e.kind)return e.editing}function f(e){return{text:e.text,attaches:e.attaches}}},314432:(e,t,n)=>{"use strict";n.r(t),n.d(t,{resolveId:()=>o,resolveAnyId:()=>a,isUserPeerId:()=>i,isContactPeerId:()=>s,isChatPeerId:()=>c,isGroupPeerId:()=>u,isAnonymPeerId:()=>l,toRealId:()=>d,resolveRealId:()=>f,name:()=>p,shortName:()=>m,firstName:()=>v,link:()=>h,safePeopleCount:()=>g,updateChatInfo:()=>b,clearChatDataOnLeave:()=>y,updateLastSeen:()=>w,updateMutualFriends:()=>_,updateFriendship:()=>k,updateMembership:()=>C,updateIsPeerBlacklistedByMe:()=>E,safeGet:()=>I});var r=n(21705);function o(e){if(Number.isNaN(e)&&(e=0),r.isDev&&0===e)throw new Error("Айди беседы никогда не должно быть равно 0! Читай комментарий к ошибке.");if(!e||!Number.isInteger(e))return 0;var t=e;return i(t)||u(t)||c(t)||s(t)?t:0}function a(e){if(!e||!Number.isInteger(e))return 0;var t=e;return i(t)||u(t)||c(t)||l(t)?t:0}function i(e){return e>0&&e<19e8}function s(e){return e>19e8&&e<2e9}function c(e){return e>2e9}function u(e){return e<0&&e>-189e7}function l(e){return e>-19e8&&e<-189e7}function d(e){return s(e)?e-1e9:c(e)?e-2e9:u(e)?-e:i(e)?e:void(0,r.exhaustivenessCheck)(e)}function f(e,t){switch(e){case"User":return o(t);case"Contact":return o(t+19e8);case"Group":return o(-t);case"Chat":return o(t+2e9);default:(0,r.exhaustivenessCheck)(e)}}function p(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"nom";switch(e.kind){case"User":switch(t){case"nom":return e.firstName+" "+e.lastName;case"gen":return e.firstNameGen+" "+e.lastNameGen;case"acc":return e.firstNameAcc+" "+e.lastNameAcc;default:return(0,r.exhaustivenessCheck)(t)}case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,r.exhaustivenessCheck)(e)}}function m(e){switch(e.kind){case"User":return e.firstName+" "+e.lastName.charAt(0)+(e.lastName.length>1?".":"");case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,r.exhaustivenessCheck)(e)}}function v(e){switch(e.kind){case"User":return e.firstName;case"Contact":case"Group":return e.name;case"Chat":return e.title;default:return(0,r.exhaustivenessCheck)(e)}}function h(e){if("Chat"===e.kind||"Contact"===e.kind)return"";if(e.screenName)return"/".concat(e.screenName);switch(e.kind){case"User":return"/id".concat(e.id);case"Group":return"/club".concat(Math.abs(e.id));default:return(0,r.exhaustivenessCheck)(e)}}function g(e){return Math.min(1e3,e)}function b(e,t){"title"in t?e.title=t.title:(e.photo50=t.photo50,e.photo100=t.photo100,e.photo200=t.photo200)}function y(e){delete e.photo50,delete e.photo100,delete e.photo200,delete e.hasDefaultPhoto,e.canCall=!1}function w(e,t,n){e.lastSeen.at=t,e.lastSeen.platform=n}function _(e,t,n){"Contact"!==e.kind&&(e.mutualFriends={hint:t,count:n})}function k(e,t){switch(t){case"add":if(!e.canChangeFriendship)break;e.friendship={unfamiliar:"outgoingRequest",outgoingRequest:"outgoingRequest",incomingRequest:"friends",friends:"friends"}[e.friendship];break;case"delete":e.friendship={unfamiliar:"unfamiliar",outgoingRequest:"unfamiliar",incomingRequest:"incomingRequest",friends:"incomingRequest"}[e.friendship];break;default:(0,r.exhaustivenessCheck)(t)}}function C(e,t){switch(t){case"join":var n={notMember:e.isClosed?"outgoingRequest":"member",member:"member",unsure:"member",declined:"member",outgoingRequest:"outgoingRequest",incomingRequest:"member"}[e.membership];e.membership!==n&&"member"===n&&e.memberCount++,e.membership=n;break;case"leave":var o={notMember:"notMember",member:"notMember",unsure:"notMember",declined:"notMember",outgoingRequest:"notMember",incomingRequest:"declined"}[e.membership];e.membership!==o&&e.memberCount--,e.membership=o;break;default:(0,r.exhaustivenessCheck)(t)}}function E(e,t){e.isBlacklistedByMe=t}function I(e,t){var n=e.get(t);if(n)return n;if(r.isDev)throw new Error("Пир ".concat(t," не найден в кэше! Обрати внимание на то, как загружаются недостающие данные в сторе."));return e.get(o())}},30966:(e,t,n)=>{"use strict";n.d(t,{resolveCmid:()=>o,toPlainText:()=>a,isEmpty:()=>i});var r=n(21705);function o(e){return Number.isNaN(e)&&(e=0),!e||e<0?0:e}function a(e,t){return e.chunks?e.chunks.reduce((function(e,n){switch(n.kind){case"Text":return e+n.text;case"Mention":case"ClientMention":return e+"@"+n.screenName;case"NamedMention":case"MassMention":return e+n.displayName;case"AliasMention":return e+"@"+n.displayName;case"Email":return e+n.email;case"Url":return e+n.caption;case"Hashtag":return e+n.tag;case"LineBreak":return e+(t.multiline?"\n":" ");default:return(0,r.exhaustivenessCheck)(n)}}),""):""}function i(e){return 0===e.chunks.length&&!Object.keys(e.attaches).find((function(e){return"unknown"!==e}))}},878664:(e,t,n)=>{"use strict";function r(e){return Number.isNaN(e)&&(e=0),e}function o(e){return Number.isNaN(e)&&(e=0),e}n.d(t,{resolveStickerPackId:()=>r,resolveStickerId:()=>o})},641450:(e,t,n)=>{"use strict";n.d(t,{MASS_MENTIONS:()=>c,fromClientText:()=>u,fromServerText:()=>l});var r=n(621094),o=n(975066),a=n(314432),i=n(997864),s=n(533788),c=[{variant:"all",mentions:["all","everyone","все"]},{variant:"online",mentions:["online","here","тут","здесь"]}];function u(e){return d(e,f.Client)}function l(e){return d(e,f.Server)}function d(e,t){if(0===e.length)return[];try{return t.tryParse(e).reduce((function(e,t){if("Text"===t.kind){var n=e[e.length-1];"Text"===(null==n?void 0:n.kind)?n.text+=t.text:e.push({kind:"Text",text:t.text})}else e.push(t);return e}),[]).map((function(e){return"Text"===e.kind?{kind:"Text",text:(0,s.decodeHTMLEntities)(e.text)}:e}))}catch(e){return console.error(e),[]}}var f=i.createLanguage({Server:function(e){return i.alt(e.SharedChunk,e.Text).many()},Client:function(e){return i.alt(e.SharedChunk,e.ClientMention,e.Text).many()},SharedChunk:function(e){return i.alt(e.LineBreak,e.Url,e.Hashtag,e.Email,e.MassMention,e.Mention,e.NamedMention,e.AliasMention)},LineBreak:function(){return i.regexp(/\n|<br ?\/?>/).map((function(){return{kind:"LineBreak"}}))},ScreenName:function(){return i.seqObj(["prefix",i.oneOf("@*")],["handle",i.alt(i.digit,i.letter,i.string("_")).atLeast(2).map((function(e){return e.join("")}))])},ClientMention:function(e){return e.ScreenName.map((function(e){return{kind:"ClientMention",screenName:e.handle}}))},MassMention:function(){return i.regexp(/(?!,|;|:|\.|\s|\n|"|\(|\)|\[|\]|!|\?)([*@](all|everyone|все|online|here|здесь|тут))(?=$|,|;|:|\.(?![a-z0-9_-])|\s|\n|"|\(|\)|\[|\]|!|\?)/i,1).map((function(e){return{kind:"MassMention",displayName:e}}))},Mention:function(e){return i.seqObj(i.string("["),["type",i.alt(i.string("id"),i.string("club"))],["peerId",i.digit.atLeast(1).map((function(e){return+e.join("")}))],i.string("|"),["screenName",e.ScreenName],i.string("]")).map((function(e){return{kind:"Mention",type:e.type,peerId:"club"===e.type?a.resolveId(-e.peerId):a.resolveId(e.peerId),screenName:e.screenName.handle}}))},NamedMention:function(){return i.seqObj(i.string("["),["type",i.alt(i.string("id"),i.string("club"))],["peerId",i.digit.atLeast(1).map((function(e){return+e.join("")}))],["displayName",i.regexp(/\|(.+?)\]/,1)]).map((function(e){return{kind:"NamedMention",type:e.type,peerId:"club"===e.type?a.resolveId(-e.peerId):a.resolveId(e.peerId),displayName:e.displayName}}))},AliasMention:function(e){return i.seqObj(["screenName",e.ScreenName],i.whitespace,["displayName",i.regexp(/\((.+?)\)/,1)]).map((function(e){return{kind:"AliasMention",screenName:e.screenName.handle,displayName:e.displayName}}))},Url:function(){return i.seq(i.regexp(new RegExp(p)),i.regexp(new RegExp(m)),i.regexp(new RegExp(v)),i.regexp(new RegExp(h)),i.regexp(new RegExp(g))).map((function(e){var t=(0,o.default)(e,5),n=t[0],r=t[1],a=t[2],i=t[3],c=t[4],u="".concat(n||"http://").concat(r).concat(a).concat(i).concat(c),l=e.join("");return a.length<=y&&b.has(a.toLowerCase())?{kind:"Url",caption:(0,s.decodeHTMLEntities)(l),href:(0,s.decodeHTMLEntities)(u)}:{kind:"Text",text:l}}))},Hashtag:function(){return i.regexp(new RegExp("#".concat(C,"{0,100}").concat(k).concat(C,"{0,100}"))).map((function(e){return{kind:"Hashtag",tag:e}}))},Email:function(){return i.regexp(new RegExp("([a-zA-Zа-яА-Я\\-_\\.0-9\\+]+@("+m+v+"))","i")).map((function(e){return{kind:"Email",email:e}}))},Text:function(){return i.any.map((function(e){return{kind:"Text",text:e}}))}}),p="(https?:\\/\\/)?",m="((?:[\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј\\—\\-\\_]+\\.){1,5})",v="([A-Za-zа-яА-Я\\-\\d]{2,22})",h="(?:\\:(\\d{2,5}))?",g="(([\\/?#])(?:\\&amp;|\\&|\\&#\\d{2,6};|,[_%]|!|,*(?:[\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$~=;:'*ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ　-〿＀-￯]|[.](?!\\s|$|[^.\\wА-Яа-я\\xa8\\xb8\\xc0-\\xffєЄҐґЇїІіЈј\\—\\-\\_@#%?+\\/\\$~=;:'*ªµºÀ-ÖØ-öø-ˁˆ-ˑˠ-ˤˬˮͰ-ʹͶͷͺ-ͽͿΆΈ-ΊΌΎ-ΡΣ-ϵϷ-ҁҊ-ԯԱ-Ֆՙա-ևא-תװ-ײؠ-يٮٯٱ-ۓەۥۦۮۯۺ-ۼۿܐܒ-ܯݍ-ޥޱߊ-ߪߴߵߺࠀ-ࠕࠚࠤࠨࡀ-ࡘࢠ-ࢴࢶ-ࢽऄ-हऽॐक़-ॡॱ-ঀঅ-ঌএঐও-নপ-রলশ-হঽৎড়ঢ়য়-ৡৰৱਅ-ਊਏਐਓ-ਨਪ-ਰਲਲ਼ਵਸ਼ਸਹਖ਼-ੜਫ਼ੲ-ੴઅ-ઍએ-ઑઓ-નપ-રલળવ-હઽૐૠૡૹଅ-ଌଏଐଓ-ନପ-ରଲଳଵ-ହଽଡ଼ଢ଼ୟ-ୡୱஃஅ-ஊஎ-ஐஒ-கஙசஜஞடணதந-பம-ஹௐఅ-ఌఎ-ఐఒ-నప-హఽౘ-ౚౠౡಀಅ-ಌಎ-ಐಒ-ನಪ-ಳವ-ಹಽೞೠೡೱೲഅ-ഌഎ-ഐഒ-ഺഽൎൔ-ൖൟ-ൡൺ-ൿඅ-ඖක-නඳ-රලව-ෆก-ะาำเ-ๆກຂຄງຈຊຍດ-ທນ-ຟມ-ຣລວສຫອ-ະາຳຽເ-ໄໆໜ-ໟༀཀ-ཇཉ-ཬྈ-ྌက-ဪဿၐ-ၕၚ-ၝၡၥၦၮ-ၰၵ-ႁႎႠ-ჅჇჍა-ჺჼ-ቈቊ-ቍቐ-ቖቘቚ-ቝበ-ኈኊ-ኍነ-ኰኲ-ኵኸ-ኾዀዂ-ዅወ-ዖዘ-ጐጒ-ጕጘ-ፚᎀ-ᎏᎠ-Ᏽᏸ-ᏽᐁ-ᙬᙯ-ᙿᚁ-ᚚᚠ-ᛪᛱ-ᛸᜀ-ᜌᜎ-ᜑᜠ-ᜱᝀ-ᝑᝠ-ᝬᝮ-ᝰក-ឳៗៜᠠ-ᡷᢀ-ᢄᢇ-ᢨᢪᢰ-ᣵᤀ-ᤞᥐ-ᥭᥰ-ᥴᦀ-ᦫᦰ-ᧉᨀ-ᨖᨠ-ᩔᪧᬅ-ᬳᭅ-ᭋᮃ-ᮠᮮᮯᮺ-ᯥᰀ-ᰣᱍ-ᱏᱚ-ᱽᲀ-ᲈᳩ-ᳬᳮ-ᳱᳵᳶᴀ-ᶿḀ-ἕἘ-Ἕἠ-ὅὈ-Ὅὐ-ὗὙὛὝὟ-ώᾀ-ᾴᾶ-ᾼιῂ-ῄῆ-ῌῐ-ΐῖ-Ίῠ-Ῥῲ-ῴῶ-ῼⁱⁿₐ-ₜℂℇℊ-ℓℕℙ-ℝℤΩℨK-ℭℯ-ℹℼ-ℿⅅ-ⅉⅎↃↄⰀ-Ⱞⰰ-ⱞⱠ-ⳤⳫ-ⳮⳲⳳⴀ-ⴥⴧⴭⴰ-ⵧⵯⶀ-ⶖⶠ-ⶦⶨ-ⶮⶰ-ⶶⶸ-ⶾⷀ-ⷆⷈ-ⷎⷐ-ⷖⷘ-ⷞⸯ々〆〱-〵〻〼ぁ-ゖゝ-ゟァ-ヺー-ヿㄅ-ㄭㄱ-ㆎㆠ-ㆺㇰ-ㇿ㐀-䶵一-鿕ꀀ-ꒌꓐ-ꓽꔀ-ꘌꘐ-ꘟꘪꘫꙀ-ꙮꙿ-ꚝꚠ-ꛥꜗ-ꜟꜢ-ꞈꞋ-ꞮꞰ-ꞷꟷ-ꠁꠃ-ꠅꠇ-ꠊꠌ-ꠢꡀ-ꡳꢂ-ꢳꣲ-ꣷꣻꣽꤊ-ꤥꤰ-ꥆꥠ-ꥼꦄ-ꦲꧏꧠ-ꧤꧦ-ꧯꧺ-ꧾꨀ-ꨨꩀ-ꩂꩄ-ꩋꩠ-ꩶꩺꩾ-ꪯꪱꪵꪶꪹ-ꪽꫀꫂꫛ-ꫝꫠ-ꫪꫲ-ꫴꬁ-ꬆꬉ-ꬎꬑ-ꬖꬠ-ꬦꬨ-ꬮꬰ-ꭚꭜ-ꭥꭰ-ꯢ가-힣ힰ-ퟆퟋ-ퟻ豈-舘並-龎ﬀ-ﬆﬓ-ﬗיִײַ-ﬨשׁ-זּטּ-לּמּנּסּףּפּצּ-ﮱﯓ-ﴽﵐ-ﶏﶒ-ﷇﷰ-ﷻﹰ-ﹴﹶ-ﻼＡ-Ｚａ-ｚｦ-ﾾￂ-ￇￊ-ￏￒ-ￗￚ-ￜ　-〿＀-￯]))+|(?:\\(|\\[)[\\w\\$А-Яа-яёЁєЄҐґЇїІіЈј\\d&#%;,]+(?:\\)|\\])){0,200})?",b=new Set([].concat((0,r.default)("aaa,aarp,abarth,abb,abbott,abbvie,abc,able,abogado,abudhabi,ac,academy,accenture,accountant,accountants,aco,active,actor,ad,adac,ads,adult,ae,aeg,aero,aetna,af,afamilycompany,afl,africa,ag,agakhan,agency,ai,aig,aigo,airbus,airforce,airtel,akdn,al,alfaromeo,alibaba,alipay,allfinanz,allstate,ally,alsace,alstom,am,americanexpress,americanfamily,amex,amfam,amica,amsterdam,an,analytics,android,anquan,anz,ao,aol,apartments,app,apple,aq,aquarelle,ar,aramco,archi,army,arpa,art,arte,as,asda,asia,associates,at,athleta,attorney,au,auction,audi,audible,audio,auspost,author,auto,autos,avianca,aw,aws,ax,axa,az,azure,ba,baby,baidu,banamex,bananarepublic,band,bank,bar,barcelona,barclaycard,barclays,barefoot,bargains,baseball,basketball,bauhaus,bayern,bb,bbc,bbt,bbva,bcg,bcn,bd,be,beats,beauty,beer,bentley,berlin,best,bestbuy,bet,bf,bg,bh,bharti,bi,bible,bid,bike,bing,bingo,bio,biz,bj,bl,black,blackfriday,blanco,blockbuster,blog,bloomberg,blue,bm,bms,bmw,bn,bnl,bnpparibas,bo,boats,boehringer,bofa,bom,bond,boo,book,booking,boots,bosch,bostik,boston,bot,boutique,box,bq,br,bradesco,bridgestone,broadway,broker,brother,brussels,bs,bt,budapest,bugatti,build,builders,business,buy,buzz,bv,bw,by,bz,bzh,ca,cab,cafe,cal,call,calvinklein,cam,camera,camp,cancerresearch,canon,capetown,capital,capitalone,car,caravan,cards,care,career,careers,cars,cartier,casa,case,caseih,cash,casino,cat,catering,catholic,cba,cbn,cbre,cbs,cc,cd,ceb,center,ceo,cern,cf,cfa,cfd,cg,ch,chanel,channel,chase,chat,cheap,chintai,chloe,christmas,chrome,chrysler,church,ci,cipriani,circle,cisco,citadel,citi,citic,city,cityeats,ck,cl,claims,cleaning,click,clinic,clinique,clothing,cloud,club,clubmed,cm,cn,co,coach,codes,coffee,college,cologne,com,comcast,commbank,community,company,compare,computer,comsec,condos,construction,consulting,contact,contractors,cooking,cookingchannel,cool,coop,corsica,country,coupon,coupons,courses,cr,credit,creditcard,creditunion,cricket,crown,crs,cruise,cruises,csc,cu,cuisinella,cv,cw,cx,cy,cymru,cyou,cz,dabur,dad,dance,data,date,dating,datsun,day,dclk,dds,de,deal,dealer,deals,degree,delivery,dell,deloitte,delta,democrat,dental,dentist,desi,design,dev,dhl,diamonds,diet,digital,direct,directory,discount,discover,dish,diy,dj,dk,dm,dnp,do,docs,doctor,dodge,dog,doha,domains,dot,download,drive,dtv,dubai,duck,dunlop,duns,dupont,durban,dvag,dvr,dz,earth,eat,ec,eco,edeka,edu,education,ee,eg,eh,email,emerck,energy,engineer,engineering,enterprises,epost,epson,equipment,er,ericsson,erni,es,esq,estate,esurance,et,eu,eurovision,eus,events,everbank,exchange,expert,exposed,express,extraspace,fage,fail,fairwinds,faith,family,fan,fans,farm,farmers,fashion,fast,fedex,feedback,ferrari,ferrero,fi,fiat,fidelity,fido,film,final,finance,financial,fire,firestone,firmdale,fish,fishing,fit,fitness,fj,fk,flickr,flights,flir,florist,flowers,fly,fm,fo,foo,food,foodnetwork,football,ford,forex,forsale,forum,foundation,fox,fr,free,fresenius,frl,frogans,frontdoor,frontier,ftr,fujitsu,fujixerox,fun,fund,furniture,futbol,fyi,ga,gal,gallery,gallo,gallup,game,games,gap,garden,gb,gbiz,gd,gdn,ge,gea,gent,genting,george,gf,gg,ggee,gh,gi,gift,gifts,gives,giving,gl,glade,glass,gle,global,globo,gm,gmail,gmbh,gmo,gmx,gn,godaddy,gold,goldpoint,golf,goo,goodhands,goodyear,goog,google,gop,got,gov,gp,gq,gr,grainger,graphics,gratis,green,gripe,group,gs,gt,gu,guardian,gucci,guge,guide,guitars,guru,gw,gy,hair,hamburg,hangout,haus,hbo,hdfc,hdfcbank,health,healthcare,help,helsinki,here,hermes,hgtv,hiphop,hisamitsu,hitachi,hiv,hk,hkt,hm,hn,hockey,holdings,holiday,homedepot,homegoods,homes,homesense,honda,honeywell,horse,hospital,host,hosting,hot,hoteles,hotmail,house,how,hr,hsbc,ht,htc,hu,hughes,hyatt,hyundai,ibm,icbc,ice,icu,id,ie,ieee,ifm,ikano,il,im,imamat,imdb,immo,immobilien,in,industries,infiniti,info,ing,ink,institute,insurance,insure,int,intel,international,intuit,investments,io,ipiranga,iq,ir,irish,is,iselect,ismaili,ist,istanbul,it,itau,itv,iveco,iwc,jaguar,java,jcb,jcp,je,jeep,jetzt,jewelry,jio,jlc,jll,jm,jmp,jnj,jo,jobs,joburg,jot,joy,jp,jpmorgan,jprs,juegos,juniper,kaufen,kddi,ke,kerryhotels,kerrylogistics,kerryproperties,kfh,kg,kh,ki,kia,kim,kinder,kindle,kitchen,kiwi,km,kn,koeln,komatsu,kosher,kp,kpmg,kpn,kr,krd,kred,kuokgroup,kw,ky,kyoto,kz,la,lacaixa,ladbrokes,lamborghini,lamer,lancaster,lancia,lancome,land,landrover,lanxess,lasalle,lat,latino,latrobe,law,lawyer,lb,lc,lds,lease,leclerc,lefrak,legal,lego,lexus,lgbt,li,liaison,lidl,life,lifeinsurance,lifestyle,lighting,like,lilly,limited,limo,lincoln,linde,link,lipsy,live,living,lixil,lk,loan,loans,local,locker,locus,loft,lol,london,lotte,lotto,love,lpl,lplfinancial,lr,ls,lt,ltd,ltda,lu,lundbeck,lupin,luxe,luxury,lv,ly,ma,macys,madrid,maif,maison,makeup,man,management,mango,market,marketing,markets,marriott,marshalls,maserati,mattel,mba,mc,mcd,mcdonalds,mckinsey,md,me,med,media,meet,melbourne,meme,memorial,men,menu,meo,metlife,mf,mg,mh,miami,microsoft,mil,mini,mint,mit,mitsubishi,mk,ml,mlb,mls,mm,mma,mn,mo,mobi,mobile,mobily,moda,moe,moi,mom,monash,money,monster,montblanc,mopar,mormon,mortgage,moscow,moto,motorcycles,mov,movie,movistar,mp,mq,mr,ms,msd,mt,mtn,mtpc,mtr,mu,museum,mutual,mv,mw,mx,my,mz,na,nab,nadex,nagoya,name,nationwide,natura,navy,nba,nc,ne,nec,net,netbank,netflix,network,neustar,new,newholland,news,next,nextdirect,nexus,nf,nfl,ng,ngo,nhk,ni,nico,nike,nikon,ninja,nissan,nissay,nl,no,nokia,northwesternmutual,norton,now,nowruz,nowtv,np,nr,nra,nrw,ntt,nu,nyc,nz,obi,observer,off,office,okinawa,olayan,olayangroup,oldnavy,ollo,om,omega,one,ong,onl,online,onyourside,ooo,open,oracle,orange,org,organic,orientexpress,origins,osaka,otsuka,ott,ovh,pa,page,pamperedchef,panasonic,panerai,paris,pars,partners,parts,party,passagens,pay,pccw,pe,pet,pf,pfizer,pg,ph,pharmacy,philips,phone,photo,photography,photos,physio,piaget,pics,pictet,pictures,pid,pin,ping,pink,pioneer,pizza,pk,pl,place,play,playstation,plumbing,plus,pm,pn,pnc,pohl,poker,politie,porn,post,pr,pramerica,praxi,press,prime,pro,prod,productions,prof,progressive,promo,properties,property,protection,pru,prudential,ps,pt,pub,pw,pwc,py,qa,qpon,quebec,quest,qvc,racing,radio,raid,re,read,realestate,realtor,realty,recipes,red,redstone,redumbrella,rehab,reise,reisen,reit,reliance,ren,rent,rentals,repair,report,republican,rest,restaurant,review,reviews,rexroth,rich,richardli,ricoh,rightathome,ril,rio,rip,rmit,ro,rocher,rocks,rodeo,rogers,room,rs,rsvp,ru,ruhr,run,rw,rwe,ryukyu,sa,saarland,safe,safety,sakura,sale,salon,samsclub,samsung,sandvik,sandvikcoromant,sanofi,sap,sapo,sarl,sas,save,saxo,sb,sbi,sbs,sc,sca,scb,schaeffler,schmidt,scholarships,school,schule,schwarz,science,scjohnson,scor,scot,sd,se,seat,secure,security,seek,select,sener,services,ses,seven,sew,sex,sexy,sfr,sg,sh,shangrila,sharp,shaw,shell,shia,shiksha,shoes,shop,shopping,shouji,show,showtime,shriram,si,silk,sina,singles,site,sj,sk,ski,skin,sky,skype,sl,sling,sm,smart,smile,sn,sncf,so,soccer,social,softbank,software,sohu,solar,solutions,song,sony,soy,space,spiegel,spot,spreadbetting,sr,srl,srt,ss,st,stada,staples,star,starhub,statebank,statefarm,statoil,stc,stcgroup,stockholm,storage,store,stream,studio,study,style,su,sucks,supplies,supply,support,surf,surgery,suzuki,sv,swatch,swiftcover,swiss,sx,sy,sydney,symantec,systems,sz,tab,taipei,talk,taobao,target,tatamotors,tatar,tattoo,tax,taxi,tc,tci,td,tdk,team,tech,technology,tel,telecity,telefonica,temasek,tennis,teva,tf,tg,th,thd,theater,theatre,tiaa,tickets,tienda,tiffany,tips,tires,tirol,tj,tjmaxx,tjx,tk,tkmaxx,tl,tm,tmall,tn,to,today,tokyo,tools,top,toray,toshiba,total,tours,town,toyota,toys,tp,tr,trade,trading,training,travel,travelchannel,travelers,travelersinsurance,trust,trv,tt,tube,tui,tunes,tushu,tv,tvs,tw,tz,ua,ubank,ubs,uconnect,ug,uk,um,unicom,university,uno,uol,ups,us,uy,uz,va,vacations,vana,vanguard,vc,ve,vegas,ventures,verisign,vermögensberater,vermögensberatung,versicherung,vet,vg,vi,viajes,video,vig,viking,villas,vin,vip,virgin,visa,vision,vista,vistaprint,viva,vivo,vlaanderen,vn,vodka,volkswagen,volvo,vote,voting,voto,voyage,vu,vuelos,wales,walmart,walter,wang,wanggou,warman,watch,watches,weather,weatherchannel,webcam,weber,website,wed,wedding,weibo,weir,wf,whoswho,wien,wiki,williamhill,win,windows,wine,winners,wme,wolterskluwer,woodside,work,works,world,wow,ws,wtc,wtf,xbox,xerox,xfinity,xihuan,xin,xperia,xxx,xyz,yachts,yahoo,yamaxun,yandex,ye,yodobashi,yoga,yokohama,you,youtube,yt,yu,yun,za,zappos,zara,zero,zip,zippo,zm,zone,zuerich,zw".split(",")),(0,r.default)("бг,бел,дети,ею,католик,ком,мкд,мон,москва,онлайн,орг,рус,рф,сайт,срб,укр".split(",")),(0,r.default)("qxam,90ae,90ais,d1acj3b,e1a4c,80aqecdr1a,j1aef,d1alf,l1acc,80adxhks,80asehdb,c1avg,p1acf,p1ai,80aswg,90a3ac,j1amh,80ao21a,y9a3aq,9dbq2a,mgbca7dzdo,mgba3a3ejt,mgbayh7gpa,lgbbat1ad8j,mgberp4a5d4ar,mgba7c0bbn0a,mgbc0a9azcg,mgb2ddes,mgbaam7a8h,mgba3a4f16a,mgbbh1a,mgbab2bd,ngbe9e0a,mgbbh1a71e,pgbs0dh,mgbpl2fh,ogbpf8fl,ngbc5azd,mgbtx2b,mgb9awbf,ygbi2ammx,wgbl6a,mgbi4ecexp,fhbei,wgbh1c,mgbx4cd0ab,mgbb9fbpob,4gbrim,mgbt3dhd,mgbai9azgqp6j,mgbgu82a,11b4c3d,c2br7g,h2brj9c,h2breg3eve,h2brj9c8c,i1b6b1a6a2e,54b7fta0cc,45brj9c,45br5cyl,s9brj9c,gecrj9c,3hcrj9c,xkc2dl3a5ee0h,xkc2al3hye2a,clchc0ea0b2g2a9gcd,fpcrj9c3d,2scrj9c,rvc1e0am3e,fzc2c9e2c,42c2d9a,o3cw4h,node,q9jyb4c,gckr3f0f,qcka1pmc,tckwe,cck2b3b,1ck2e1b,bck1b9a5dre4c,eckvdtc9d,rhqv96g,fiq64b,fiqs8s,fiqz9s,fiq228c5hs,vhquv,1qqw23a,vuq861b,nyqy26a,45q11c,55qx5d,55qw42g,kprw13d,kpry57d,czru2d,czrs0t,czr694b,w4rs40l,w4r85el8fhu5dnra,3ds443g,3oq18vl8pn36a,pssy2u,tiq49xqyj,fjq720a,fct429k,estv75g,xhq521b,9krt00a,30rr7y,6qq986b3xl,kput3i,kpu716f,zfr164b,mxtq1m,yfro4i67o,efvy88h,9et52u,rovu88b,nqv7f,b4w605ferd,unup4y,mix891f,mix082f,3pxu8k,pbt977c,6frz82g,nqv7fs00ema,ses554g,hxt814e,5tzm5g,io0a7i,8y0a063a,jlq61u9w7b,flw351e,g2xx48c,gk3at1e,3bst00m,fzys8d69uvgm,kcrx77d1x4a,jvr189m,imr513n,5su34j936bgsg,j6w193g,t60b56a,mk1bu44c,cg4bki,3e0b707e".split(",").map((function(e){return"xn--"+e}))))),y=(0,r.default)(b).reduce((function(e,t){return Math.max(e,t.length)}),0),w="a-zA-Zа-яА-ЯёіјєїґўЁІЈЄЇҐЎ’",_="(?:&#(?:19[2-9]|(?:[2-9]|1[0-3])[0-9][0-9]);?)",k="(?:[".concat(w,"]|").concat(_,")"),C="(?:[".concat(w,"_\\d]|").concat(_,")")},47860:(e,t,n)=>{"use strict";n.d(t,{dictionaryLatinConvert:()=>p,toTranslit:()=>m,toLocalCase:()=>v});var r=n(975066),o=n(322559);function a(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return i(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return i(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,a=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw a}}}}function i(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function s(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function c(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?s(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):s(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var u={u1072:"a",u1073:"b",u1074:"v",u1075:"g",u1076:"d",u1077:"e",u1105:"yo",u1078:"zh",u1079:"z",u1080:"i",u1081:"y",u1082:"k",u1083:"l",u1084:"m",u1085:"n",u1086:"o",u1087:"p",u1088:"r",u1089:"s",u1090:"t",u1091:"u",u1092:"f",u1093:"kh",u1094:"ts",u1095:"ch",u1096:"sh",u1097:"shch",u1098:"'",u1099:"y",u1100:"'",u1101:"e",u1102:"yu",u1103:"ya"},l=c(c({},u),{},{u1093:"h",u1097:"sh",u1098:"",u1100:"",u1105:"e"}),d={u102:"а",u44:"б",u100:"в",u117:"г",u108:"д",u116:"е",u92:"ё",u59:"ж",u112:"з",u98:"и",u113:"й",u114:"к",u107:"л",u118:"м",u121:"н",u106:"о",u103:"п",u104:"р",u99:"с",u110:"т",u101:"у",u97:"ф",u91:"х",u119:"ц",u120:"ч",u105:"ш",u111:"щ",u93:"ъ",u109:"ь",u115:"ы",u39:"э",u46:"ю",u122:"я",u60:"б",u126:"ё",u58:"ж",u123:"х",u125:"ъ",u34:"э",u62:"ю",u64:'"',u35:"№",u36:";",u37:"%",u94:":",u38:"?",u63:",",u47:"."},f={yo:"ё",YO:"Ё",zh:"ж",ZH:"Ж",kh:"х",KH:"Х",ts:"ц",TS:"Ц",ch:"ч",CH:"Ч",sch:"щ",SCH:"Щ",shch:"щ",SHCH:"Щ",sh:"ш",SH:"Ш",eh:"э",EH:"Э",yu:"ю",YU:"Ю",ya:"я",YA:"Я","'":"ь",a:"а",A:"А",b:"б",B:"Б",v:"В",g:"г",G:"Г",d:"д",D:"Д",e:"е",E:"Е",z:"з",Z:"З",i:"и",I:"И",j:"й",J:"Й",k:"к",K:"К",l:"л",L:"Л",m:"м",M:"М",n:"н",N:"Н",o:"о",O:"О",p:"п",P:"Р",r:"р",R:"Р",s:"с",S:"С",t:"т",T:"Т",u:"у",U:"У",f:"ф",F:"Ф",h:"х",H:"Х",c:"ц",C:"Ц",y:"ы",Y:"Ы"};function p(e){return function(e){var t=e.dictionary,n=e.value;return Object.entries(t).reduce((function(e,t){var n=(0,r.default)(t,2),o=n[0],a=n[1];return e.replace(new RegExp(o,"g"),a)}),n)}({value:e.value,dictionary:f})}function m(e,t){e=e.toLowerCase().trim();var n=[u,l];return t&&n.push(d),n.reduce((function(t,n){var r=h(e,n);return r===e||t.includes(r)||t.push(r),t}),[])}function v(e){return h(e=e.toLowerCase().trim(),d)}function h(e,t){var n,r="",o=a(e);try{for(o.s();!(n=o.n()).done;){var i=n.value,s=t["u"+i.codePointAt(0)];r+=void 0!==s?s:i}}catch(e){o.e(e)}finally{o.f()}return r}},233600:(e,t,n)=>{"use strict";n.d(t,{create:()=>d,add:()=>f,search:()=>p,peerWords:()=>h});var r=n(621094),o=n(322559),a=n(47860),i=n(21705),s=n(540075);function c(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return u(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return u(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function u(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var l=Symbol("items");function d(){return(0,o.default)({},l,new Set)}function f(e,t,n){if(Array.isArray(t))t.forEach((function(t){return f(e,t,n)}));else{var r=n(t),o=r.id,a=r.strings;(0,s.getWordsVariants)(a).forEach((function(t){var n=e;n[l].add(o),Array.from(t.trim().toLowerCase()).forEach((function(e){var t=n[e];t||(t=n[e]=d()),t[l].add(o),n=t}))}))}return e}function p(e,t){var n=m(e,g(t)),o=m(e,g(a.toLocalCase(t)));return new Set([].concat((0,r.default)(n),(0,r.default)(o)))}function m(e,t){var n,o=null,a=c(t);try{for(a.s();!(n=a.n()).done;){var i=v(e,n.value);if(o){var s,u=c(o);try{for(u.s();!(s=u.n()).done;){var l=s.value;i.has(l)||o.delete(l)}}catch(e){u.e(e)}finally{u.f()}}else o=new Set((0,r.default)(i))}}catch(e){a.e(e)}finally{a.f()}return o||new Set}function v(e,t){var n,r=e,o=c(t.trim().toLowerCase());try{for(o.s();!(n=o.n()).done;){var a=r[n.value];if(!a)return new Set;r=a}}catch(e){o.e(e)}finally{o.f()}return r[l]}function h(e){var t=[];switch(e.kind){case"Chat":t.push.apply(t,(0,r.default)(g(e.title)));break;case"Group":e.screenName&&t.push(e.screenName),t.push.apply(t,(0,r.default)(g(e.name)));break;case"User":e.screenName&&t.push(e.screenName),t.push.apply(t,(0,r.default)(g(e.firstName))),t.push.apply(t,(0,r.default)(g(e.lastName)));break;case"Contact":t.push.apply(t,(0,r.default)(g(e.name)));break;default:(0,i.exhaustivenessCheck)(e)}return t}function g(e){return e.trim().toLowerCase().split(/\s+/g)}},21705:(e,t,n)=>{"use strict";n.d(t,{isDev:()=>f,exhaustivenessCheck:()=>p,sleep:()=>m,debounce:()=>h,throttle:()=>g,RetryTimeout:()=>b,toNonEmpty:()=>y,formatFileSize:()=>w,formatDuration:()=>_,isSameDate:()=>k,isSameYear:()=>C,words:()=>E,isDeepEqual:()=>I});var r=n(231989),o=n(50706),a=n(225155),i=n(322559),s=n(467846),c=n(343883),u=n.n(c);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=!1;function p(e){throw new Error("Exhaustivness failure! This should never happen.")}function m(e){return v.apply(this,arguments)}function v(){return(v=(0,s.default)(u().mark((function e(t){return u().wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",new Promise((function(e){setTimeout(e,t)})));case 1:case"end":return e.stop()}}),e)})))).apply(this,arguments)}function h(e,t,n){var r=null,o=function(){null!==r&&(window.clearTimeout(r),r=null)},a=function(){for(var a=arguments.length,i=new Array(a),s=0;s<a;s++)i[s]=arguments[s];var c=function(){r=null,n||e.apply(void 0,i)},u=n&&!r;o(),r=window.setTimeout(c,t),u&&e.apply(void 0,i)};return a.cancel=o,a}function g(e,t){var n=!1,r=null;return function(){for(var o=arguments.length,a=new Array(o),i=0;i<o;i++)a[i]=arguments[i];n?r=a:(n=!0,e.apply(void 0,a),setTimeout((function(){n=!1,r&&(e(r),r=null)}),t))}}var b=(0,o.default)((function e(t,n){var r=this;(0,a.default)(this,e),(0,i.default)(this,"delay",(function(){return r.timeout})),(0,i.default)(this,"attempts",(function(){return r.retries})),(0,i.default)(this,"backoff",(function(){r.timeout=Math.min(2*r.timeout,r.maxTimeout),r.retries++})),(0,i.default)(this,"reset",(function(){r.timeout=r.minTimeout,r.retries=0})),this.minTimeout=t,this.maxTimeout=n,this.timeout=t,this.retries=0}));function y(e){return e.length>0?e:null}function w(e){return e>Math.pow(1024,3)?Number((e/Math.pow(1024,3)).toFixed(2))+" GB":e>Math.pow(1024,2)?Number((e/Math.pow(1024,2)).toFixed(1))+" MB":Math.round(e/1024)+" KB"}function _(e,t){e||(e=0),e=Math.abs(e);var n=Math.floor(e/3600).toString(),r=(Math.floor(e/60)%60).toString(),o=(e%60).toString().padStart(2,"0");return e>=3600||t?[n,r.padStart(2,"0"),o].join(":"):[r.padStart(1,"0"),o].join(":")}function k(e,t){return e=new Date(e),t=new Date(t),e.getDate()===t.getDate()&&e.getMonth()===t.getMonth()&&e.getFullYear()===t.getFullYear()}function C(e,t){return e=new Date(e),t=new Date(t),e.getFullYear()===t.getFullYear()}function E(e){return e.split(/\s/)}function I(e,t){if(e===t)return!0;if(e!=e&&t!=t)return!0;var n=function(e){return"object"!==(0,r.default)(e)||null===e};if(n(e)||n(t))return e===t;if(e&&t&&"object"==(0,r.default)(e)&&"object"==(0,r.default)(t)){if(e.constructor!==t.constructor)return!1;if(Array.isArray(e)){if(e.length!==t.length)return!1;for(var o=0;o<e.length;o++)if(!I(e[o],t[o]))return!1;return!0}if(e instanceof Map&&t instanceof Map){if(e.size!==t.size)return!1;var a,i=l(e.entries());try{for(i.s();!(a=i.n()).done;){var s=a.value[0];if(!n(s))throw new Error("isDeepEqual can't compare Maps with non primitive keys");if(!t.has(s))return!1}}catch(e){i.e(e)}finally{i.f()}var c,u=l(e.entries());try{for(u.s();!(c=u.n()).done;){var d=c.value;if(!I(d[1],t.get(d[0])))return!1}}catch(e){u.e(e)}finally{u.f()}return!0}if(e instanceof Set&&t instanceof Set){if(e.size!==t.size)return!1;var f,p=l(e.entries());try{for(p.s();!(f=p.n()).done;){var m=f.value[0];if(!n(m))throw new Error("isDeepEqual can't compare Sets with non primitive values");if(!t.has(m))return!1}}catch(e){p.e(e)}finally{p.f()}return!0}var v=Object.keys(e);if(v.length!==Object.keys(t).length)return!1;for(var h=0,g=v;h<g.length;h++){var b=g[h];if(!Object.prototype.hasOwnProperty.call(t,b))return!1}for(var y=0,w=v;y<w.length;y++){var _=w[y];if(!I(e[_],t[_]))return!1}return!0}throw new Error("isDeepEqual don't know how to compare: ".concat(e," and ").concat(t))}},540075:(e,t,n)=>{"use strict";n.d(t,{getWordsVariants:()=>i});var r=n(47860);function o(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return a(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return a(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var i,s=!0,c=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return s=e.done,e},e:function(e){c=!0,i=e},f:function(){try{s||null==n.return||n.return()}finally{if(c)throw i}}}}function a(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function i(e){var t,n=[],a=o(e);try{var i=function(){var e=t.value,o=e.replace(/ё/g,"е").replace(/Ё/g,"Е");o!==e&&n.push(o),r.toTranslit(e,!0).forEach((function(t){t!==e&&n.push(t)})),n.push(e)};for(a.s();!(t=a.n()).done;)i()}catch(e){a.e(e)}finally{a.f()}return n}},303460:(e,t,n)=>{"use strict";n.d(t,{fromApiAttach:()=>b,fromApiConvoAttach:()=>y,fromApiWallAttach:()=>w,fromApiDoc:()=>C,fromApiPhoto:()=>E,fromApiVideo:()=>I,fromApiAudio:()=>P,fromApiVoice:()=>S,apiAttachWallOwnerId:()=>B});var r=n(278765),o=n(293209),a=n(322559),i=n(621094),s=n(151225),c=n(314432),u=n(980662),l=n(641450),d=n(21705),f=n(378399),p=["type","src"];function m(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function v(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?m(Object(n),!0).forEach((function(t){(0,a.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function h(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return g(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return g(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function g(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function b(e,t,n){if(0===e.length)return{};var r,o,a,u,d,p,m,v,g,b,y={},O=function(e){y.unknown=[].concat((0,i.default)(y.unknown||[]),[{data:e}])},j=h(e);try{for(j.s();!(r=j.n()).done;){var q=r.value;switch(q.type){case"photo":if(!q.photo){O(q);break}var z=E(q.photo,n);if(!z){O(q);break}y.photos=[].concat((0,i.default)(y.photos||[]),[z]);break;case"audio":if(!q.audio){O(q);break}var F=P(q.audio);y.audios=[].concat((0,i.default)(y.audios||[]),[F]);break;case"video":if(!q.video){O(q);break}var G=I(q.video,n);if(!G){O(q);break}y.videos=[].concat((0,i.default)(y.videos||[]),[G]);break;case"doc":if(!q.doc){O(q);break}var V=C(q.doc);if(!V){O(q);break}y.docs=[].concat((0,i.default)(y.docs||[]),[V]);break;case"link":if(!q.link){O(q);break}var H=k(q.link);if(!H){O(q);break}if(s.isAttachInviteLink(H)){y.inviteLink=H;break}y.link=H;break;case"market":if(!q.market){O(q);break}var K={kind:"Market",id:(b=q.market).id,ownerId:b.owner_id,title:b.title,price:b.price.text,priceOld:b.price.old_amount_text,photo:b.thumb_photo};if(!K){O(q);break}y.market=K;break;case"market_album":if(!q.market_market_album){O(q);break}y.marketAlbum={kind:"MarketAlbum"};break;case"gift":if(!q.gift){O(q);break}var W=M(q.gift);if(!W){O(q);break}y.gift=W;break;case"sticker":if(!q.sticker){O(q);break}var $=(0,f.fromApiSticker)(q.sticker);if(!$){O(q);break}y.sticker=$;break;case"wall":if(!q.wall||!q.wall.from_id||!q.wall.id){O(q);break}q.wall.geo&&(q.wall.attachments=[].concat((0,i.default)(q.wall.attachments||[]),[{type:"geo",geo:q.wall.geo}]));var Y=B(q.wall);if(!Y){O(q);break}y.wall={kind:"Wall",authorId:c.resolveId(q.wall.from_id),ownerId:c.resolveId(Y),id:q.wall.id,date:1e3*(q.wall.date||0),chunks:l.fromServerText(q.wall.text||""),attaches:w(q.wall)};break;case"wall_reply":if(!(q.wall_reply&&q.wall_reply.from_id&&q.wall_reply.id&&q.wall_reply.post_id)){O(q);break}var Z=B(q.wall_reply);if(!Z){O(q);break}y.wallReply={kind:"WallReply",id:q.wall_reply.id,postId:q.wall_reply.post_id,authorId:c.resolveId(q.wall_reply.from_id),ownerId:c.resolveId(Z),parentsStack:q.wall_reply.parents_stack,date:1e3*(q.wall_reply.date||0),chunks:l.fromServerText(q.wall_reply.text||""),attaches:_(q.wall_reply.attachments||[])};break;case"article":if(!q.article){O(q);break}y.article=x(q.article);break;case"poll":if(!q.poll||!q.poll.owner_id||!q.poll.id){O(q);break}y.poll={kind:"Poll",id:q.poll.id,ownerId:q.poll.owner_id};break;case"call":if(!q.call){O(q);break}y.call={kind:"Call"};break;case"graffiti":if(!q.graffiti){O(q);break}y.graffiti={kind:"Graffiti",imageUrl:q.graffiti.url,width:q.graffiti.width,height:q.graffiti.height};break;case"audio_message":if(!q.audio_message){O(q);break}y.voice=S(q.audio_message,t);break;case"audio_playlist":if(!q.audio_playlist){O(q);break}y.audioPlaylist={kind:"AudioPlaylist",id:(g=q.audio_playlist).id,ownerId:g.owner_id,type:N[g.type],title:g.title,accessKey:g.access_key,image:A(g.photo,"photo")};break;case"podcast":if(!q.podcast){O(q);break}y.podcast=(p=q.podcast,m=void 0,v=void 0,{kind:"Podcast",id:p.id,ownerId:p.owner_id,title:p.title,image:null!=p&&null!==(m=p.podcast_info)&&void 0!==m&&null!==(v=m.cover)&&void 0!==v&&v.sizes?D(p.podcast_info.cover.sizes):void 0});break;case"money_transfer":if(!q.money_transfer){O(q);break}y.moneyTransfer={kind:"MoneyTransfer",text:q.money_transfer.amount.text};break;case"money_request":if(!q.money_request){O(q);break}y.moneyRequest={kind:"MoneyRequest",id:(d=q.money_request).id,toId:d.to_id,fromId:d.from_id,text:d.amount.text,initUrl:d.init_url,isUserOwner:!!d.user_is_owner,isProcessed:!!d.processed,amount:d.amount};break;case"story":if(!q.story){O(q);break}y.story={kind:"Story",id:(u=q.story).id,ownerId:u.owner_id,image:u.photo&&u.photo.sizes?L(u.photo.sizes):void 0,date:void 0!==u.date?1e3*u.date:void 0,available:!u.is_expired&&0!==u.can_see};break;case"geo":if(!q.geo||!q.geo.coordinates){O(q);break}y.geo={kind:"Geo",coordinates:q.geo.coordinates,place:q.geo.place};break;case"group_call_in_progress":if(!q.group_call_in_progress){O(q);break}y.activeCall=(o=q.group_call_in_progress,a=void 0,{kind:"ActiveCall",initiatorId:o.initiator_id,joinLink:o.join_link,participants:{list:null===(a=o.participants.list)||void 0===a?void 0:a.map(c.resolveId),count:o.participants.count||0,coverList:R(o)}});break;case"mini_app":if(!q.mini_app){O(q);break}var Q=T(q.mini_app);if(!Q){O(q);break}y.miniApps=[].concat((0,i.default)(y.miniApps||[]),[Q]);break;case"donut_link":if(!q.donut_link){O(q);break}var J=U(q.donut_link);if(!J){O(q);break}y.donutLink=J;break;case"narrative":case"artist":case"event":case"curator":case"group":case"widget":case"link_curator":O(q);break;default:q.type;O(q)}}}catch(e){j.e(e)}finally{j.f()}return y}function y(e){var t,n={},r=h(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;switch(o.attachment.type){case"photo":if(!o.attachment.photo)break;var a=E(o.attachment.photo,o.attachment.photo.access_key);if(!a)break;var i={attach:a,cmid:u.resolveCmid(o.message_id),peerId:c.resolveId(o.from_id)};n.photos=(n.photos||[]).concat(i);break;case"audio":if(!o.attachment.audio)break;var s={attach:P(o.attachment.audio),cmid:u.resolveCmid(o.message_id),peerId:c.resolveId(o.from_id)};n.audios=(n.audios||[]).concat(s);break;case"video":if(!o.attachment.video)break;var l=I(o.attachment.video,o.attachment.video.access_key);if(!l)break;var f={attach:l,cmid:u.resolveCmid(o.message_id),peerId:c.resolveId(o.from_id)};n.videos=(n.videos||[]).concat(f);break;case"doc":if(!o.attachment.doc)break;var p=C(o.attachment.doc);if(!p)break;var m={attach:p,cmid:u.resolveCmid(o.message_id),peerId:c.resolveId(o.from_id)};n.docs=(n.docs||[]).concat(m);break;case"link":if(!o.attachment.link)break;var v=k(o.attachment.link);if(!v)break;var g={attach:v,cmid:u.resolveCmid(o.message_id),peerId:c.resolveId(o.from_id)};n.links=(n.links||[]).concat(g);break;case"audio_message":case"graffiti":case"market":case"share":case"wall":break;default:(0,d.exhaustivenessCheck)(o.attachment.type)}}}catch(e){r.e(e)}finally{r.f()}return n}function w(e){var t,n=e.attachments,r=e.copy_history,o=e.access_key,i=[],s=h(n||[]);try{for(s.s();!(t=s.n()).done;){var u=t.value;switch(u.type){case"photo":case"audio":case"video":case"doc":case"link":case"mini_app":case"sticker":case"market":case"article":case"poll":case"audio_playlist":case"podcast":case"market_album":i.push((0,a.default)({type:u.type},u.type,u[u.type]));break;case"geo":var l,d,f;if(!u.geo)break;var p=null===(l=u.geo.coordinates)||void 0===l?void 0:l.split(" ").map((function(e){return parseFloat(e)}));i.push({type:"geo",geo:v(v({},u.geo),{},{place:{title:null===(d=u.geo.place)||void 0===d?void 0:d.title,address:null===(f=u.geo.place)||void 0===f?void 0:f.address},coordinates:p&&p[0]&&p[1]?{latitude:p[0],longitude:p[1]}:void 0})});break;case"textlive":case"textpost":case"textpost_publish":case"posted_photo":case"graffiti":case"note":case"app":case"page":case"album":case"event":case"donut_link":case"situational_theme":case"group":case"artist":case"curator":case"photos_list":case"pretty_cards":case"narrative":break;default:u.type}}}catch(e){s.e(e)}finally{s.f()}var m=b(i,!1,o);if(null!=r&&r[0]){var g=B(r[0]);m.wallHistory={kind:"WallHistory",id:r[0].id||0,authorId:c.resolveId(r[0].from_id),ownerId:c.resolveId(g),date:1e3*(r[0].date||0),text:r[0].text||""}}return m}function _(e){var t,n=[],r=h(e);try{for(r.s();!(t=r.n()).done;){var o=t.value;switch(o.type){case"photo":case"audio":case"video":case"doc":case"link":case"sticker":case"market":n.push((0,a.default)({type:o.type},o.type,o[o.type]));break;case"market_market_album":n.push((0,a.default)({type:"market_album"},o.type,o[o.type]));break;case"note":case"page":case"graffiti":break;default:o.type}}}catch(e){r.e(e)}finally{r.f()}return b(n,!1)}function k(e){if(e.title&&e.caption){var t=e.url,n=/^https:\/\/m\.vk\.com(.+)/;if(n.test(e.url)){var r=e.url.match(n);t=r&&r[1]?r[1]:t}return{kind:"Link",url:t,title:e.title,meta:e.caption,image:e.photo?L(e.photo.sizes||[]):void 0}}}function C(e){var t,n,r;if(e.url){var o=!(null===(t=e.preview)||void 0===t||null===(n=t.photo)||void 0===n||null===(r=n.sizes)||void 0===r||!r.length)&&L(e.preview.photo.sizes.map((function(e){return v(v({},e),{},{url:e.src})})));return v({kind:"Doc",id:e.id,ownerId:e.owner_id,title:e.title,size:e.size,ext:e.ext,date:e.date,url:e.url},o&&{image:o})}}function E(e,t){if(e.sizes)return{kind:"Photo",accessKey:e.access_key,albumId:e.album_id,id:e.id,ownerId:e.owner_id,hasTags:e.has_tags,sizes:L(e.sizes),messageAccessKey:t}}function I(e,t){if(e.id&&e.owner_id){var n=D(e.image||[{url:"",height:0,width:0}]);if(n)return{kind:"Video",accessKey:e.access_key,id:e.id,ownerId:e.owner_id,duration:e.duration,width:e.width,height:e.height,image:n,title:e.title,views:e.views||0,restriction:e.restriction,messageAccessKey:t}}}function x(e){var t;switch(e.state){case"available":case"banned":case"deleted":case"paid":case"protected":t=e.state;break;case void 0:t="unknown";break;default:e.state;t="unknown"}return{kind:"Article",state:t,url:e.url||"",title:e.title||"",author:e.owner_name||"",meta:e.subtitle||"",image:e.photo?L(e.photo.sizes||[]):void 0}}var O={thumb:[48,96,256,512],photo:[34,68,135,270,300,600,1200],unknown:[]};function A(e,t){if(e){var n=O[t].reduce((function(n,r){var o=e["".concat(t,"_").concat(r)];return o?(n.push({url:o,width:r,height:r}),n):n}),[]),r=(0,o.default)(n),a=r[0],s=r.slice(1);return a?[a].concat((0,i.default)(s)):void 0}}function M(e){var t=A(e,"thumb");if(t)return{kind:"Gift",id:e.id,isStickerStyle:!!e.is_stickers_style,image:t}}function P(e){return{kind:"Audio",id:e.id,ownerId:e.owner_id,artist:e.artist,title:e.title,subtitle:e.subtitle,url:e.url,duration:e.duration,albumId:e.album_id,trackCode:e.track_code,contentRestricted:e.content_restricted,albumPartNumber:e.album_part_number,accessKey:e.access_key}}function S(e,t){return{kind:"Voice",duration:e.duration,id:e.id,linkMp3:e.link_mp3,linkOgg:e.link_ogg,ownerId:e.owner_id,waveform:e.waveform,isListened:t,isTranscriptPossible:e.duration/60/60<1,transcription:j(e)}}function j(e){switch(e.transcript_state){case"done":var t;return{state:"done",text:null===(t=e.transcript)||void 0===t?void 0:t.trim(),updatedAt:e.transcript_update_time?1e3*e.transcript_update_time:void 0};case"error":case"in_progress":return{state:e.transcript_state};case void 0:return;default:(0,d.exhaustivenessCheck)(e.transcript_state)}}var N={0:"playlist",1:"album",2:"playlist",3:"playlist",4:"playlist",5:"playlist"};function L(e){return e.sort((function(e,t){return e.width-t.width})).reduce((function(e,t){var n=t.type,o=(t.src,(0,r.default)(t,p));return"s"!==n&&"m"!==n&&"x"!==n&&"o"!==n&&"p"!==n&&"q"!==n&&"r"!==n&&"y"!==n&&"z"!==n&&"w"!==n||e.set(n,o),e}),new Map)}function D(e){var t=e.sort((function(e,t){return e.width-t.width})).map((function(e){return{width:e.width,height:e.height,url:e.url}})),n=(0,o.default)(t),r=n[0],a=n.slice(1);if(r)return[r].concat((0,i.default)(a))}function R(e){var t=e.participants.list;return t?t.reduce((function(e,t){var n=c.resolveAnyId(t);return(c.isUserPeerId(n)||c.isGroupPeerId(n))&&e.push(n),e}),[]).slice(0,3):[]}function T(e){if(e.app&&e.app.share_url){var t=(0,d.toNonEmpty)(e.images.map((function(e){var t=e.url,n=e.height;return{width:e.width,height:n,url:t}})));if(t){t.sort((function(e,t){return e.width-t.width}));var n=e.app.share_url.replace(/https:\/\/[a-z0-9_\-.]+\//,"");return{kind:"MiniApp",title:e.title,appLink:n,images:t}}}}function U(e){var t,n,r=c.resolveId(e.owner_id);if(c.isGroupPeerId(r)&&null!==(t=e.action)&&void 0!==t&&t.url&&null!==(n=e.button.action)&&void 0!==n&&n.url&&e.button.title)return{kind:"DonutLink",ownerId:r,button:{action:{target:"internal",type:"open_url",url:e.button.action.url},title:e.button.title},donors:e.donors,text:e.text,action:{target:"internal",type:"open_url",url:e.action.url}}}function B(e){var t,n=e.owner_id,r=e.source_id,o=e.to_id;return null!==(t=null!=n?n:r)&&void 0!==t?t:o}},583906:(e,t,n)=>{"use strict";n.d(t,{fromApiKeyboard:()=>l,fromEngineKeyboard:()=>d,convertButtons:()=>p,fromApiMessageEvent:()=>v});var r=n(322559),o=n(533788),a=n(573974),i=n(314432),s=n(190831);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){var n=f(e.buttons,e.inline),r=i.resolveId(e.author_id||t);return e.inline?{kind:"InlineKeyboard",authorId:r,buttons:n}:{kind:"InputKeyboard",authorId:r,buttons:n,oneTime:e.one_time}}function d(e,t){return e.inline?e.buttons?{kind:"InlineKeyboard",buttons:f(e.buttons,e.inline),authorId:i.resolveId(e.author_id||t)}:void 0:e.buttons&&null!==(n=e.buttons)&&void 0!==n&&n.length?{kind:"InputKeyboardUpsertEvent",keyboard:{kind:"InputKeyboard",buttons:f(e.buttons,e.inline),authorId:i.resolveId(e.author_id||t),oneTime:e.one_time}}:{kind:"InputKeyboardDeleteEvent"};var n}function f(e,t){return e.map((function(e){return p(e,t)}))}function p(e,t){return e.map((function(e){return function(e,t){var n=function(e,t){return"positive"===e?"commerce":"negative"===e?"destructive":"primary"===e?e:t?"overlay_primary":"secondary"}(e.color,t);switch(e.action.type){case"text":case"callback":return{type:e.action.type,label:(0,o.decodeHTMLEntities)(e.action.label||""),payload:e.action.payload||"",color:n};case"open_link":return{type:e.action.type,link:e.action.link,label:(0,o.decodeHTMLEntities)(e.action.label||""),payload:e.action.payload||"",color:n};case"location":return{type:e.action.type,payload:e.action.payload||"",color:n};case"vkpay":return{type:e.action.type,payload:e.action.payload||"",hash:e.action.hash||"",url:a.createAppUrl(s.VK_PAY_APP_ID,e.action.hash||"")};case"open_app":return{type:e.action.type,payload:e.action.payload||"",label:(0,o.decodeHTMLEntities)(e.action.label||""),hash:e.action.hash||"",appId:e.action.app_id||0,ownerId:e.action.owner_id||0,color:n,url:a.createAppUrl(e.action.app_id,e.action.hash||"",e.action.owner_id)};case"open_photo":return;default:return void e.action}}(e,t)})).filter(m)}function m(e){return void 0!==e}var v=function(e,t,n){var r=n.event_id,o=n.action,s=n.owner_id,c=a.resolveId(r),l=i.resolveId(s);if(o)switch(o.type){case"show_snackbar":return u(u({},o),{},{id:c,ownerId:l,title:i.name(e),photo:t.photo50,peerId:e.id});case"open_link":return u(u({},o),{},{id:c,ownerId:l,title:i.name(e),peerId:e.id});default:return{id:c,type:o.type,ownerId:l,url:(0,a.createAppUrl)(o.app_id,o.hash,l),peerId:e.id}}}},65515:(e,t,n)=>{"use strict";n.d(t,{fromApiTemplate:()=>l});var r=n(322559),o=n(278765),a=n(583906),i=n(303460),s=["buttons","photo","action"];function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e,t){var n;return{kind:"carousel",elements:(null===(n=e.elements)||void 0===n?void 0:n.map((function(e){return function(e,t){var n=e.buttons,r=e.photo,c=e.action,l=(0,o.default)(e,s),d=r?(0,i.fromApiPhoto)(r,t):null,f=u(u({buttons:n?(0,a.convertButtons)(n,!0):[]},d&&{photo:d}),l),p=u(u({},f),{},{kind:"simple"});if(!c)return p;switch(c.type){case"open_photo":return r&&d?u(u({},f),{},{kind:"photo",photo:d}):p;case"open_link":return u(u({},f),{},{kind:"link",link:c.link});default:return p}}(e,t)})))||[]}}},419117:(e,t,n)=>{"use strict";n.d(t,{fromApiChannel:()=>i});var r=n(716352),o=n(30966),a=n(610557),i=function(e,t,n){var i,s,c,u=n&&(0,a.fromApiPost)(n),l=[];return u&&(l=u.cmid>1?[{kind:"GapItem",fromCmid:o.resolveCmid(1),toCmid:o.resolveCmid(u.cmid-1)},{kind:"PostItem",post:u}]:[{kind:"PostItem",post:u}]),{kind:"Channel",id:r.resolveId(e.channel_id),unreadCount:Math.floor(10*Math.random())+0,isArchived:(null===(i=e.user_data)||void 0===i?void 0:i.is_archived)||!1,inReadCmid:o.resolveCmid((null===(s=e.user_data)||void 0===s||null===(c=s.read_state)||void 0===c?void 0:c.read_up_to_cmid)||0),majorSortId:e.sort_id.major_id,minorSortId:e.sort_id.minor_id,notificationsDisabledUntil:0,membersCount:t.members_count||0,photos:{photo50:t.photo_50,photo100:t.photo_100},name:t.name||"",isVerified:Boolean(t.verified),history:l,pending:{},locks:{loading:!1,cleanUp:0}}}},975474:(e,t,n)=>{"use strict";n.d(t,{fromApiConvo:()=>m,fromLongpollPushSettings:()=>v});var r=n(621094),o=n(322559),a=n(314432),i=n(360202),s=n(980662),c=n(641450),u=n(341570),l=n(583906);function d(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function f(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?d(Object(n),!0).forEach((function(t){(0,o.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):d(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}var p={18:"peer_deleted",900:"peer_blacklisted",901:"peer_blacklisted",902:"peer_blacklisted",915:"disabled_by_community",916:"disabled_by_peer",917:"kicked",918:"no_access",925:"no_access",932:"no_access",945:"chat_unsupported",946:"chat_unsupported",203:"disabled_by_peer"};function m(e,t){var n,o,d,m,v,b,y,w,_=t&&(0,u.fromApiMessage)(t).message,k=e.current_keyboard&&(0,l.fromApiKeyboard)(e.current_keyboard);if("InlineKeyboard"===(null==k?void 0:k.kind))throw new Error("Не может прийти инлайн клавиатура для сообщения");var C,E,I,x=f({majorSortId:(null===(n=e.sort_id)||void 0===n?void 0:n.major_id)||0,minorSortId:(null===(o=e.sort_id)||void 0===o?void 0:o.minor_id)||0,unreadCount:e.unread_count||0,isMarkedUnread:!!e.is_marked_unread,isArchived:!!e.is_archived,inReadBy:s.resolveCmid(e.in_read_cmid),outReadBy:s.resolveCmid(e.out_read_cmid),folderIds:new Set((null===(d=e.folder_ids)||void 0===d?void 0:d.map(i.resolveId))||[]),isNew:!!e.is_new,canWrite:(C=e.can_write,null!=C&&C.allowed?{allowed:!0}:{allowed:!1,reason:(null==C?void 0:C.reason)&&p[C.reason]||"unknown"}),currentKeyboard:k,push:h(e.push_settings),persistedCmid:s.resolveCmid(null==_?void 0:_.cmid),persisted:_?new Map([[_.cmid,f(f({},_),{},{olderId:s.resolveCmid(),newerId:s.resolveCmid()})]]):new Map,queuedId:s.resolveRandomId(),queued:new Map,unreadExpireables:new Set((e.expire_cmids||[]).map(s.resolveCmid)),hasMore:e.last_message_id>0},e.conversation_bar?{convoBanner:{icon:null!==(m=null===(v=e.conversation_bar)||void 0===v?void 0:v.icon)&&void 0!==m?m:"",name:e.conversation_bar.name,title:null!==(b=null===(y=e.conversation_bar)||void 0===y?void 0:y.title)&&void 0!==b?b:"",chunks:c.fromServerText(e.conversation_bar.text),canHide:(null===(w=e.conversation_bar)||void 0===w?void 0:w.can_hide)||!0,buttons:e.conversation_bar.buttons?e.conversation_bar.buttons.map((function(e){var t,n,r;return{callbackData:null!==(t=null==e?void 0:e.callback_data)&&void 0!==t?t:"",mode:null!==(n=null==e?void 0:e.style)&&void 0!==n?n:e.layout,link:null!==(r=null==e?void 0:e.link)&&void 0!==r?r:"",text:e.text,hideOnAction:!!e.hide_on_action,type:e.type}})):[]}}:void 0),O=a.resolveId(e.peer.id);switch(e.peer.type){case"user":var A;return a.isUserPeerId(O)?"pending"===(null===(A=e.message_request_data)||void 0===A?void 0:A.status)?{convo:f(f({},x),{},{kind:"MessageRequestUserConvo",peerId:O})}:{convo:f(f({},x),{},{kind:"UserConvo",peerId:O})}:null;case"chat":var M,P,S,j,N,L,D,R,T,U;if(!a.isChatPeerId(O))return null;if(!e.chat_settings)throw new Error("TODO chat convo has to has chat settings");var B=e.chat_settings.owner_id&&0!==e.chat_settings.owner_id?a.resolveId(e.chat_settings.owner_id):void 0,q=B&&(a.isUserPeerId(B)||a.isGroupPeerId(B))?B:void 0,z=f(f({},x),{},{peerId:O,ownerId:q,unreadMentions:new Set((e.mention_cmids||[]).map(s.resolveCmid)),membersCount:(null===(M=e.chat_settings)||void 0===M?void 0:M.members_count)||0,state:null===(P=e.chat_settings)||void 0===P?void 0:P.state,isCasper:!!e.chat_settings.is_disappearing,isCommunityChat:!!B&&a.isGroupPeerId(B),isDonut:!!e.chat_settings.is_donut,activeCall:g(e.call_in_progress),pinnedMessage:e.chat_settings.pinned_message?(0,u.fromApiPinnedMessage)(e.chat_settings.pinned_message):void 0,acl:(I=e.chat_settings.acl,{canChangeInfo:I.can_change_info,canChangeInviteLink:I.can_change_invite_link,canChangePin:I.can_change_pin,canInvite:I.can_invite,canPromoteUsers:I.can_promote_users,canSeeInviteLink:I.can_see_invite_link,canModerate:I.can_moderate,canCopyChat:I.can_copy_chat,canCall:I.can_call,canUseMassMentions:I.can_use_mass_mentions,canChangeServiceType:Boolean(I.can_change_service_type),canChangeStyle:Boolean(I.can_change_style)}),permissions:e.chat_settings.permissions?(E=e.chat_settings.permissions,{invite:E.invite||"all",change_info:E.change_info||"all",change_pin:E.change_pin||"all",use_mass_mentions:E.use_mass_mentions||"all",see_invite_link:E.see_invite_link||"all",call:E.call||"all",change_style:E.change_style||"all",change_admins:E.change_admins||"owner"}):void 0,isService:Boolean(e.chat_settings.is_service),adminIds:new Set([].concat((0,r.default)([B]||0),(0,r.default)(e.chat_settings.admin_ids||[])).map(a.resolveId))}),F={kind:"Chat",id:O,title:(null===(S=e.chat_settings)||void 0===S?void 0:S.title)||"",photo50:null===(j=e.chat_settings.photo)||void 0===j?void 0:j.photo_50,photo100:null===(N=e.chat_settings.photo)||void 0===N?void 0:N.photo_100,photo200:null===(L=e.chat_settings.photo)||void 0===L?void 0:L.photo_200,hasDefaultPhoto:(null===(D=e.chat_settings.photo)||void 0===D?void 0:D.is_default_photo)||(null===(R=e.chat_settings.photo)||void 0===R?void 0:R.is_default_call_photo),canCall:e.chat_settings.acl.can_call};return"pending"===(null===(T=e.message_request_data)||void 0===T?void 0:T.status)&&void 0!==(null===(U=e.message_request_data)||void 0===U?void 0:U.inviter_id)?{convo:f(f({},z),{},{kind:"MessageRequestChatConvo",inviterPeerId:a.resolveId(e.message_request_data.inviter_id)}),peer:F}:{convo:f(f({},z),{},{kind:"ChatConvo"}),peer:F};case"group":return a.isGroupPeerId(O)?{convo:f(f({},x),{},{peerId:O,kind:"GroupConvo"})}:null;case"email":return null;case"contact":return a.isContactPeerId(O)?{convo:f(f({},x),{},{peerId:O,kind:"ContactConvo"})}:null;default:e.peer.type;return null}}function v(e){var t=Number(e[1].disabled_until);switch(t){case 0:return{mode:"everything",disabledUntil:0};case-1:return{mode:"every-mention",disabledUntil:1/0};default:return{mode:"every-mention",disabledUntil:1e3*t}}}function h(e){var t={mode:"everything",disabledUntil:0};return e?(e.disabled_forever?t={mode:"every-mention",disabledUntil:1/0}:e.disabled_until&&(t={mode:"every-mention",disabledUntil:1e3*e.disabled_until}),"everything"!==t.mode&&(e.disabled_mass_mentions&&(t=f(f({},t),{},{mode:"direct-mention"})),e.disabled_mentions&&(t=f(f({},t),{},{mode:"nothing"}))),t):t}function g(e){if(e)return{participants:{list:(e.participants.list||[]).reduce((function(e,t){var n=a.resolveAnyId(t);return(a.isUserPeerId(n)||a.isGroupPeerId(n))&&e.push(n),e}),[]),count:e.participants.count||0},joinLink:e.join_link,canFinishCall:Boolean(e.can_finish_call),hasLink:Boolean(e.has_link)}}},590917:(e,t,n)=>{"use strict";n.d(t,{fromApiFolder:()=>o});var r=n(360202);function o(e){return{id:r.resolveId(e.id),name:e.name,peerIds:new Set,boundaryMinorId:1/0,hasMore:!0,unreadCount:0}}},341570:(e,t,n)=>{"use strict";n.d(t,{fromApiMessage:()=>v,fromEngineMessage:()=>h,fromApiPinnedMessage:()=>_});var r=n(621094),o=n(975066),a=n(281385),i=n(303460),s=n(980662),c=n(314432),u=n(641450),l=n(21705),d=n(583906),f=n(65515);function p(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return m(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return m(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function m(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function v(e){if(e.action)return{message:{kind:"Service",id:s.resolveId(e.id),action:y({apiAction:e.action,apiAttaches:e.attachments}),peerId:c.resolveId(e.peer_id),cmid:s.resolveCmid(e.conversation_message_id),authorId:c.resolveId(e.from_id),sentAt:1e3*e.date,isOut:1===e.out,deleteTTL:void 0!==e.ttl?1e3*e.ttl:void 0},mentions:{hasDirect:!1,hasMass:!1}};var t=c.resolveId(e.peer_id);if(e.is_expired)return{message:{kind:"Expired",id:s.resolveId(e.id),cmid:s.resolveCmid(e.conversation_message_id),peerId:c.resolveId(e.peer_id),authorId:c.resolveId(e.from_id),isOut:1===e.out,sentAt:1e3*e.date},mentions:{hasDirect:!1,hasMass:!1}};var n=e.keyboard&&(0,d.fromApiKeyboard)(e.keyboard);if("InputKeyboard"===(null==n?void 0:n.kind))throw new Error("Кажется из апи пришла не инлайн клавиатура для сообщения");var r=s.resolveCmid(e.conversation_message_id);return{message:{kind:"Normal",id:s.resolveId(e.id),randomId:s.resolveRandomId(e.random_id),cmid:r,peerId:t,authorId:c.resolveId(e.from_id),chunks:u.fromServerText(e.text),isOut:1===e.out,isImportant:!!e.important,sentAt:1e3*e.date,updatedAt:e.update_time&&1e3*e.update_time,attaches:(0,i.fromApiAttach)(w(e),!!e.was_listened,"mail".concat(e.id)),keyboard:n,forwardedMessages:b(e.fwd_messages,t,r),replyMessage:e.reply_message?g(e.reply_message,t,r):void 0,expireTTL:e.expire_ttl?1e3*e.expire_ttl:void 0,deleteTTL:void 0!==e.ttl?1e3*e.ttl:void 0,template:e.template?(0,f.fromApiTemplate)(e.template,"mail".concat(e.id)):void 0},mentions:{hasDirect:!1,hasMass:!1}}}function h(e,t,n){var r,f,m,v,h,g,b,w,_,k;switch(e[0]){case 4:var C=(0,o.default)(e,11);r=C[1],f=C[2],m=C[4],v=C[5],h=C[6],g=C[7],b=C[8],w=C[9],k=C[10];break;case 10004:var E=(0,o.default)(e,11);k=E[1],f=E[2],m=E[4],v=E[5],h=E[6],g=E[7],b=E[8],w=E[9],r=E[10];break;case 5:var I=(0,o.default)(e,11);r=I[1],f=I[2],m=I[3],v=I[4],h=I[5],g=I[6],b=I[7],w=I[8],k=I[9],_=I[10];break;case 10005:var x=(0,o.default)(e,11);k=x[1],f=x[2],m=x[3],v=x[4],h=x[5],g=x[6],b=x[7],w=x[8],r=x[9],_=x[10];break;case 18:var O=(0,o.default)(e,11);r=O[1],f=O[2],m=O[3],v=O[4],h=O[5],g=O[6],b=O[7],w=O[8],k=O[9],_=O[10];break;case 10018:var A=(0,o.default)(e,11);k=A[1],f=A[2],m=A[3],v=A[4],h=A[5],g=A[6],b=A[7],w=A[8],r=A[9],_=A[10];break;default:(0,l.exhaustivenessCheck)(e)}var M,P=c.resolveId(m),S=s.convertFlags(f),j=S.isOut,N=S.isImportant,L=S.noPush,D=S.isVoiceListened,R=j||P===t;if(M=void 0!==g.from?c.resolveId(Number(g.from)):R?t:P,g.source_act)return{message:{kind:"Service",id:s.resolveId(r),cmid:s.resolveCmid(k),peerId:P,authorId:M,action:y({apiAction:{type:g.source_act,member_id:g.source_mid?Number(g.source_mid):void 0,text:g.source_text,old_text:g.source_old_text,style:g.source_style}}),deleteTTL:void 0!==g.ttl?1e3*Number(g.ttl):void 0,sentAt:1e3*v,isOut:R},mentions:{hasDirect:!1,hasMass:!1},noPush:L};if("1"===g.is_expired)return{message:{kind:"Expired",id:s.resolveId(r),cmid:s.resolveCmid(k),isOut:R,peerId:P,authorId:M,sentAt:1e3*v},mentions:{hasDirect:!1,hasMass:!1},noPush:!0};var T,U={hasDirect:!1,hasMass:!1},B=p(g.marked_users||[]);try{for(B.s();!(T=B.n()).done;){var q=T.value;if(q[0]===a.IEngine.MarkedType.Mention)switch(q[1]){case"all":U.hasMass=U.hasMass||M!==t;break;case"online":U.hasMass=U.hasMass||q[2].includes(t);break;default:U.hasDirect=q[1].includes(t)}}}catch(e){B.e(e)}finally{B.f()}var z,F={};if("sticker"!==b.attach1_type&&"audiomsg"!==b.attach1_kind||!b.attachments)void 0!==b.attach1_type&&(F={unknown:[{data:b}]});else{var G=JSON.parse(b.attachments);Array.isArray(G)&&(F=(0,i.fromApiAttach)(G,D,"mail".concat(r)))}if(void 0!==b.reply){var V=JSON.parse(b.reply),H=n(s.resolveCmid(V.conversation_message_id));H&&(z=s.toForeign({message:H,rootPeerId:P,rootCmid:s.resolveCmid(k)}))}var K,W,$=g.keyboard?(0,d.fromEngineKeyboard)(g.keyboard,M):void 0;return"InlineKeyboard"===(null==$?void 0:$.kind)?K=$:W=$,{message:{kind:"Normal",id:s.resolveId(r),cmid:s.resolveCmid(k),randomId:s.resolveRandomId(w),peerId:P,authorId:M,chunks:u.fromServerText(h),isOut:R,isImportant:N,sentAt:1e3*v,updatedAt:_?1e3*_:void 0,expireTTL:g.expire_ttl?1e3*Number(g.expire_ttl):void 0,deleteTTL:void 0!==g.ttl?1e3*Number(g.ttl):void 0,attaches:F,replyMessage:z,keyboard:K},mentions:U,noPush:L,keyboardEvent:W}}function g(e,t,n){var r,o;return e.peer_id&&(r=c.resolveId(e.peer_id)),e.id&&(o=s.resolveId(e.id)),{kind:"Foreign",id:o,peerId:r,rootPeerId:t,rootCmid:n,authorId:c.resolveId(e.from_id),chunks:u.fromServerText(e.text),sentAt:1e3*e.date,updatedAt:e.update_time&&1e3*e.update_time,attaches:(0,i.fromApiAttach)(w(e),!!e.was_listened,e.id?"mail".concat(e.id):void 0),forwardedMessages:b(e.fwd_messages,t,n),replyMessage:e.reply_message?g(e.reply_message,t,n):void 0}}function b(e,t,n){if(e&&0!==e.length){var r,o,a=p(e);try{for(a.s();!(o=a.n()).done;){var i=o.value;r?r.push(g(i,t,n)):r=[g(i,t,n)]}}catch(e){a.e(e)}finally{a.f()}return r}}function y(e){var t=e.apiAction,n=e.apiAttaches,r={type:"unknown"};switch(t.type){case"chat_create":return t.text?{type:t.type,title:t.text}:r;case"chat_title_update":return t.text&&t.old_text?{type:t.type,title:t.text,oldTitle:t.old_text}:r;case"chat_photo_remove":case"chat_pin_message":case"chat_unpin_message":case"chat_screenshot":case"chat_group_call_started":case"chat_invite_user_by_link":case"chat_invite_user_by_call_join_link":case"chat_kick_don":return{type:t.type};case"chat_photo_update":var o=null==n?void 0:n.find((function(e){return"photo"===e.type})),a=null==o?void 0:o.photo;if(!a)return r;var s=(0,i.fromApiPhoto)(a);return s?{type:t.type,photo:s}:r;case"chat_invite_user":case"chat_kick_user":case"accepted_message_request":if(!t.member_id)return r;var u=c.resolveId(t.member_id);return c.isUserPeerId(u)||c.isGroupPeerId(u)?{type:t.type,peerId:u}:r;case"chat_invite_user_by_message_request":case"chat_invite_user_by_call":case"chat_kick_user_call_block":if(!t.member_id)return r;var l=c.resolveId(t.member_id);return c.isUserPeerId(l)?{type:t.type,peerId:l}:r;case"conversation_style_update":case"conversation_style_update_action":return{type:t.type,style:t.style};case"custom":return r;default:t.type;return r}}function w(e){var t=e.attachments,n=void 0===t?[]:t,o=e.geo;return o?[].concat((0,r.default)(n),[{type:"geo",geo:o}]):n}function _(e){var t,n=c.resolveId(e.peer_id),r=s.resolveCmid(e.conversation_message_id),o=c.resolveId(e.from_id);return e.id&&(t=s.resolveId(e.id)),{kind:"Pinned",id:t,cmid:r,peerId:n,authorId:o,chunks:u.fromServerText(e.text),sentAt:1e3*e.date,forwardedMessages:e.fwd_messages?b(e.fwd_messages,n,r):void 0,replyMessage:e.reply_message?g(e.reply_message,n,r):void 0,attaches:(0,i.fromApiAttach)(e.attachments||[],!1)}}},604850:(e,t,n)=>{"use strict";n.d(t,{fromApiUser:()=>i,fromApiGroup:()=>s,fromApiContact:()=>c,convertPlatform:()=>u});var r=n(314432),o=[6482950,6481715,6146827],a={1:"mobile",2:"mobile",3:"mobile",4:"mobile",5:"mobile",6:"other",7:"other"};function i(e){var t,n,a,i,s,c,u={0:"unfamiliar",1:"outgoingRequest",2:"incomingRequest",3:"friends"},l="other";null!==(t=e.online_info)&&void 0!==t&&t.is_mobile&&(l="mobile"),o.includes((null===(n=e.online_info)||void 0===n?void 0:n.app_id)||0)&&(l="vkme");var d=r.resolveRealId("User",e.id),f=Boolean(e.blacklisted);return{user:{kind:"User",id:d,firstName:e.first_name,firstNameGen:e.first_name_gen||e.first_name,firstNameAcc:e.first_name_acc||e.first_name,lastName:e.last_name,lastNameGen:e.last_name_gen||e.last_name,lastNameAcc:e.last_name_acc||e.last_name,screenName:e.screen_name,sex:void 0!==e.sex?{0:"unknown",1:"female",2:"male"}[e.sex]:"unknown",photo50:e.photo_50,photo100:e.photo_100,photo200:e.photo_200,lastSeen:{isVisible:!(null===(a=e.online_info)||void 0===a||!a.visible),at:(null===(i=e.online_info)||void 0===i?void 0:i.last_seen)&&1e3*e.online_info.last_seen,platform:l},isVerified:Boolean(e.verified),isBlacklisted:f,isBlacklistedByMe:Boolean(e.blacklisted_by_me),isDeactivated:Boolean(e.deactivated),canCall:Boolean(e.can_call),canChangeFriendship:1===e.can_send_friend_request,canInviteToChats:!!e.can_invite_to_chats,canMessage:1===e.can_write_private_message,followersCount:e.followers_count||0,friendship:void 0!==e.friend_status?u[e.friend_status]:u[0],mutualFriends:f?{hint:[],count:0}:void 0,contactName:e.contact_name,occupation:e.occupation,bdate:e.bdate,city:e.city},isOnline:!(null===(s=e.online_info)||void 0===s||!s.visible||null===(c=e.online_info)||void 0===c||!c.is_online)}}function s(e){var t,n=r.resolveRealId("Group",e.id);if(!e.type)throw new Error("fromApiGroup содержит некорректный тип ".concat(e.type));var o={0:"notMember",1:"member",2:"unsure",3:"declined",4:"outgoingRequest",5:"incomingRequest"}[e.member_status||0];return{kind:"Group",id:n,type:e.type,name:e.name,screenName:e.screen_name,photo50:e.photo_50,photo100:e.photo_100,photo200:e.photo_200,activity:e.activity,memberCount:e.members_count||0,membership:o,isDeactivated:Boolean(e.deactivated),isVerified:1===e.verified,isClosed:Boolean(e.is_closed),canMessage:1===e.can_message,canChangeMembership:0!==(null===(t=e.ban_info)||void 0===t?void 0:t.end_date)&&(0===e.is_closed||"member"===o||"incomingRequest"===o),mutualFriends:2===e.is_closed&&"member"!==o?{hint:[],count:0}:void 0}}function c(e){var t=r.resolveRealId("Contact",e.id),n=r.resolveId(e.user_id);return{kind:"Contact",id:t,name:e.name,userId:n,phone:e.phone,canWrite:e.can_write,photo50:e.photo_50,lastSeen:e.last_seen_status}}function u(e,t){var n=a[e]||"other";return o.includes(t)&&(n="vkme"),n}},610557:(e,t,n)=>{"use strict";n.d(t,{fromApiPost:()=>l});var r=n(322559),o=n(30966),a=n(641450),i=n(314432),s=n(303460);function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(e);t&&(r=r.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,r)}return n}function u(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){(0,r.default)(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function l(e){var t,n,r,c,l,d,f,p,m,v,h,g=null==e||null===(t=e.attachments)||void 0===t||null===(n=t[0])||void 0===n?void 0:n.wall,b=null==g||null===(r=g.copy_history)||void 0===r?void 0:r[0],y={};if(b){var w=(0,s.apiAttachWallOwnerId)(b);y=u(u({},y),{},{wall:{kind:"Wall",id:b.id||0,authorId:i.resolveId(b.from_id),ownerId:i.resolveId(w),date:1e3*(b.date||0),chunks:a.fromServerText(b.text||""),attaches:(0,s.fromApiWallAttach)(b)}}),g.copy_history=void 0}return null!=g&&g.attachments&&(y=u(u({},y),(0,s.fromApiWallAttach)(g))),{cmid:o.resolveCmid(e.cmid),chunks:null!=g&&g.text?a.fromServerText(g.text):[],views:(null==g||null===(c=g.views)||void 0===c?void 0:c.count)||0,sentAt:1e3*e.time,likes:{count:(null==g||null===(l=g.likes)||void 0===l?void 0:l.count)||0,isLiked:Boolean(null==g||null===(d=g.likes)||void 0===d?void 0:d.user_likes)},reposts:{count:(null==g||null===(f=g.reposts)||void 0===f?void 0:f.count)||0,isReposted:Boolean(null==g||null===(p=g.reposts)||void 0===p?void 0:p.user_reposted)},comments:{count:(null==g||null===(m=g.comments)||void 0===m?void 0:m.count)||0,canView:Boolean(null==g||null===(v=g.comments)||void 0===v?void 0:v.can_view),canPost:Boolean(null==g||null===(h=g.comments)||void 0===h?void 0:h.can_post)},attaches:y}}},378399:(e,t,n)=>{"use strict";n.d(t,{fromApiStickerPack:()=>o,fromApiSticker:()=>a});var r=n(878664);function o(e){if("stickers"===e.type&&e.title&&e.previews&&e.stickers){var t=e.previews.find((function(e){return 22===e.height})),n=e.previews.find((function(e){return 34===e.height})),o=e.previews.find((function(e){return 44===e.height})),i=e.previews.find((function(e){return 68===e.height}));if(t&&n&&o&&i){var s=[],c=[];return e.stickers.reduce((function(e,t){var n=a(t);return n?(c.push(n),e.push(n.id),e):e}),s),{stickerPack:{id:r.resolveStickerPackId(e.id),name:e.title,icons:{icon22:t.url,icon34:n.url,icon44:o.url,icon68:i.url},stickerIds:s},stickers:c}}}}function a(e){var t,n;if("sticker_id"in e&&e.images&&e.images_with_background&&e.sticker_id){e.images.sort((function(e,t){return e.height-t.height}));var o=e.images.find((function(e){return e.height>=128})),a=e.images.find((function(e){return e.height>=256})),i=e.images_with_background.find((function(e){return e.height>=128})),s=e.images_with_background.find((function(e){return e.height>=256}));if(o&&a&&i&&s)return{id:r.resolveStickerId(e.sticker_id),kind:"Sticker",isAllowed:void 0===e.is_allowed||e.is_allowed,image128:{light:o.url,dark:i.url},image256:{light:a.url,dark:s.url},animation:e.animations&&{light:(null===(t=e.animations.find((function(e){return"light"===e.type})))||void 0===t?void 0:t.url)||"",dark:(null===(n=e.animations.find((function(e){return"dark"===e.type})))||void 0===n?void 0:n.url)||""}}}}},281385:(e,t,n)=>{"use strict";var r,o,a,i,s,c,u,l,d;n.d(t,{IEngine:()=>r}),o=r||(r={}),function(e){e[e.Mention=1]="Mention",e[e.ExpiringMessage=2]="ExpiringMessage"}(a||(a={})),o.MarkedType=a,function(e){e[e.CopyFlagChanged=0]="CopyFlagChanged",e[e.TitleChanged=1]="TitleChanged",e[e.AvatarChanged=2]="AvatarChanged",e[e.AdminGrated=3]="AdminGrated",e[e.FlagsChanged=4]="FlagsChanged",e[e.Pinned=5]="Pinned",e[e.UserJoined=6]="UserJoined",e[e.UserLeft=7]="UserLeft",e[e.UserKicked=8]="UserKicked",e[e.AdminKicked=9]="AdminKicked",e[e.BannerChanged=10]="BannerChanged",e[e.KeyboardChanged=11]="KeyboardChanged",e[e.MessageRequestChanged=12]="MessageRequestChanged",e[e.ContactConverted=13]="ContactConverted",e[e.BusinessNotifyDataChanged=14]="BusinessNotifyDataChanged",e[e.MessageRequestCanceled=15]="MessageRequestCanceled",e[e.MessageRequestRejected=16]="MessageRequestRejected",e[e.MessageRequestAccepted=17]="MessageRequestAccepted",e[e.ContactJoined=18]="ContactJoined",e[e.CallInProgressChanged=19]="CallInProgressChanged",e[e.DonSubscribed=20]="DonSubscribed",e[e.DonUnsubscribed=21]="DonUnsubscribed",e[e.IsNewChange=22]="IsNewChange",e[e.StyleChanged=23]="StyleChanged"}(i||(i={})),o.ChatUpdateType=i,function(e){e[e.Deleted=0]="Deleted",e[e.Accepted=1]="Accepted",e[e.Rejected=2]="Rejected",e[e.New=3]="New"}(s||(s={})),o.MRStatus=s,function(e){e[e.FolderCreated=10]="FolderCreated",e[e.FolderDeleted=20]="FolderDeleted",e[e.FolderUpdated=30]="FolderUpdated",e[e.FoldersReordered=40]="FoldersReordered",e[e.FolderInvalidate=50]="FolderInvalidate",e[e.FoldersInvalidate=60]="FoldersInvalidate",e[e.FolderSetMajorSortId=70]="FolderSetMajorSortId"}(c||(c={})),o.FolderUpdateType=c,function(e){e[e.PeerSublist=100]="PeerSublist",e[e.TagSublist=110]="TagSublist",e[e.PeerIds=120]="PeerIds"}(u||(u={})),o.FolderUpdateElementType=u,function(e){e[e.Include=200]="Include",e[e.Exclude=210]="Exclude"}(l||(l={})),o.FolderUpdateElementState=l,function(e){e[e.Add=300]="Add",e[e.Remove=310]="Remove"}(d||(d={})),o.FolderUpdateElementAction=d,o.isIncompleteUpdate=function(e){switch(e[0]){case 10004:case 4:return e.length<12;case 10005:case 10018:case 5:case 18:return e.length<11;default:return!1}}},837021:(e,t,n)=>{"use strict";n.d(t,{TypingVariants:()=>f,insertConvos:()=>p,insertPeers:()=>v,insertContacts:()=>h,insertFolder:()=>g,insertChannels:()=>b,getOwnerGroupId:()=>y});var r=n(509727),o=n(314432),a=n(233600),i=n(975474),s=n(604850),c=n(590917),u=n(419117);function l(e,t){var n="undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(!n){if(Array.isArray(e)||(n=function(e,t){if(!e)return;if("string"==typeof e)return d(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);"Object"===n&&e.constructor&&(n=e.constructor.name);if("Map"===n||"Set"===n)return Array.from(e);if("Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n))return d(e,t)}(e))||t&&e&&"number"==typeof e.length){n&&(e=n);var r=0,o=function(){};return{s:o,n:function(){return r>=e.length?{done:!0}:{done:!1,value:e[r++]}},e:function(e){throw e},f:o}}throw new TypeError("Invalid attempt to iterate non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var a,i=!0,s=!1;return{s:function(){n=n.call(e)},n:function(){var e=n.next();return i=e.done,e},e:function(e){s=!0,a=e},f:function(){try{i||null==n.return||n.return()}finally{if(s)throw a}}}}function d(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}var f=["text","voice","photo","video","file"];function p(e,t,n){var o,s=arguments.length>3&&void 0!==arguments[3]?arguments[3]:{},c=s.dangerouslyMerge,u=[],d=l(n);try{for(d.s();!(o=d.n()).done;){var f,p=o.value,v="conversation"in p?(0,i.fromApiConvo)(p.conversation,p.last_message):(0,i.fromApiConvo)(p);if(v){var h=v.convo,g=v.peer,b=t.convos.get(h.peerId);if(!b||c){var y=m(e,h,b);t.convos.set(h.peerId,y),g&&t.peers.set(g.id,g),u.push(h),"ChatConvo"===y.kind&&t.hiddenPinnedMessages.get(y.peerId)!==(null===(f=y.pinnedMessage)||void 0===f?void 0:f.cmid)&&t.hiddenPinnedMessages.delete(y.peerId)}else u.push(b)}}}catch(e){d.e(e)}finally{d.f()}var w=u.filter((function(e){return!r.isMR(e)}));return a.add(t.convosSearchIndex,w,(function(e){var n=t.peers.get(e.peerId);return{id:e.peerId,strings:n?a.peerWords(n):[]}})),u}function m(e,t,n){return n?(e.me_re_disable_merge_convos||0!==n.persisted.size||(n.persisted=t.persisted,n.persistedCmid=t.persistedCmid),n):t}function v(e,t){var n,r=t.apiUsers,o=t.apiGroups,a=t.apiContacts,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},c=i.dangerouslyOverwrite,u=[],d=l(r);try{for(d.s();!(n=d.n()).done;){var f=n.value,p=(0,s.fromApiUser)(f),m=p.user,v=p.isOnline,h=e.peers.get(m.id);!h||"User"!==h.kind||c?(e.peers.set(m.id,m),c&&e.onlines.delete(m.id),v&&e.onlines.add(m.id),u.push(m)):u.push(h)}}catch(e){d.e(e)}finally{d.f()}var g,b=[],y=l(o);try{for(y.s();!(g=y.n()).done;){var w=g.value,_=(0,s.fromApiGroup)(w),k=e.peers.get(_.id);!k||"Group"!==k.kind||c?(e.peers.set(_.id,_),b.push(_)):b.push(k)}}catch(e){y.e(e)}finally{y.f()}var C,E=[],I=l(a);try{for(I.s();!(C=I.n()).done;){var x=C.value,O=(0,s.fromApiContact)(x),A=e.peers.get(O.id);!A||"Contact"!==A.kind||c?(e.peers.set(O.id,O),E.push(O)):E.push(A)}}catch(e){I.e(e)}finally{I.f()}return{insertedUsers:u,insertedGroups:b,insertedContacts:E}}function h(e,t){var n=[];t.sort((function(e,t){return e.name.localeCompare(t.name)}));var r,o=l(t);try{for(o.s();!(r=o.n()).done;){var a=r.value,i=(0,s.fromApiContact)(a),c=i.userId?i.userId:i.id;e.contactList.set(c,i),n.push(i)}}catch(e){o.e(e)}finally{o.f()}return n}function g(e,t){var n,r=[],o=l(t);try{var a=function(){var t=n.value,o=(0,c.fromApiFolder)(t);if(e.organisers.folders.find((function(e){return e.id===o.id})))return r.push(o),"continue";e.organisers.folders.push(o),r.push(o)};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return r}function b(e,t){var n,r=[],o=l(t.items||[]);try{var a=function(){var o,a=n.value,i=null===(o=t.groups)||void 0===o?void 0:o.find((function(e){return-e.id===a.channel.channel_id}));if(!i)throw new Error("С бэка не приходит нужная группа для канала");var s=(0,u.fromApiChannel)(a.channel,i,a.last_message),c=e.channels.get(s.id);if(c)return r.push(c),"continue";e.channels.set(s.id,s),r.push(s)};for(o.s();!(n=o.n()).done;)a()}catch(e){o.e(e)}finally{o.f()}return r}function y(e){return o.isGroupPeerId(e)?o.toRealId(e):0}},379686:(e,t,n)=>{"use strict";function r(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}n.d(t,{default:()=>r})},847877:(e,t,n)=>{"use strict";function r(e){if(Array.isArray(e))return e}n.d(t,{default:()=>r})},917065:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(379686);function o(e){if(Array.isArray(e))return(0,r.default)(e)}},467846:(e,t,n)=>{"use strict";function r(e,t,n,r,o,a,i){try{var s=e[a](i),c=s.value}catch(e){return void n(e)}s.done?t(c):Promise.resolve(c).then(r,o)}function o(e){return function(){var t=this,n=arguments;return new Promise((function(o,a){var i=e.apply(t,n);function s(e){r(i,o,a,s,c,"next",e)}function c(e){r(i,o,a,s,c,"throw",e)}s(void 0)}))}}n.d(t,{default:()=>o})},225155:(e,t,n)=>{"use strict";function r(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}n.d(t,{default:()=>r})},50706:(e,t,n)=>{"use strict";function r(e,t){for(var n=0;n<t.length;n++){var r=t[n];r.enumerable=r.enumerable||!1,r.configurable=!0,"value"in r&&(r.writable=!0),Object.defineProperty(e,r.key,r)}}function o(e,t,n){return t&&r(e.prototype,t),n&&r(e,n),Object.defineProperty(e,"prototype",{writable:!1}),e}n.d(t,{default:()=>o})},322559:(e,t,n)=>{"use strict";function r(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}n.d(t,{default:()=>r})},314957:(e,t,n)=>{"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{default:()=>r})},851986:(e,t,n)=>{"use strict";function r(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}n.d(t,{default:()=>r})},352417:(e,t,n)=>{"use strict";function r(e,t){var n=null==e?null:"undefined"!=typeof Symbol&&e[Symbol.iterator]||e["@@iterator"];if(null!=n){var r,o,a=[],i=!0,s=!1;try{for(n=n.call(e);!(i=(r=n.next()).done)&&(a.push(r.value),!t||a.length!==t);i=!0);}catch(e){s=!0,o=e}finally{try{i||null==n.return||n.return()}finally{if(s)throw o}}return a}}n.d(t,{default:()=>r})},801521:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{default:()=>r})},229081:(e,t,n)=>{"use strict";function r(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}n.d(t,{default:()=>r})},278765:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(750030);function o(e,t){if(null==e)return{};var n,o,a=(0,r.default)(e,t);if(Object.getOwnPropertySymbols){var i=Object.getOwnPropertySymbols(e);for(o=0;o<i.length;o++)n=i[o],t.indexOf(n)>=0||Object.prototype.propertyIsEnumerable.call(e,n)&&(a[n]=e[n])}return a}},750030:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{default:()=>r})},975066:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(847877),o=n(352417),a=n(771436),i=n(801521);function s(e,t){return(0,r.default)(e)||(0,o.default)(e,t)||(0,a.default)(e,t)||(0,i.default)()}},293209:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(847877),o=n(851986),a=n(771436),i=n(801521);function s(e){return(0,r.default)(e)||(0,o.default)(e)||(0,a.default)(e)||(0,i.default)()}},621094:(e,t,n)=>{"use strict";n.d(t,{default:()=>s});var r=n(917065),o=n(851986),a=n(771436),i=n(229081);function s(e){return(0,r.default)(e)||(0,o.default)(e)||(0,a.default)(e)||(0,i.default)()}},231989:(e,t,n)=>{"use strict";function r(e){return r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},r(e)}n.d(t,{default:()=>r})},771436:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(379686);function o(e,t){if(e){if("string"==typeof e)return(0,r.default)(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?(0,r.default)(e,t):void 0}}},343883:(e,t,n)=>{e.exports=n(263462)},533788:(e,t,n)=>{"use strict";n.d(t,{decodeHTMLEntities:()=>o});var r=[["&amp;","&"],["&lt;","<"],["&gt;",">"],["&quot;",'"']];function o(e){return r.reduce((function(e,t){var n=t[0],r=t[1];return e.replace(new RegExp(n,"ig"),r)}),e).replace(/&#(\d+);/g,(function(e,t){return String.fromCodePoint(t)}))}},20700:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function o(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var a=typeof n;if("string"===a||"number"===a)e.push(n);else if(Array.isArray(n)){if(n.length){var i=o.apply(null,n);i&&e.push(i)}}else if("object"===a)if(n.toString===Object.prototype.toString)for(var s in n)r.call(n,s)&&n[s]&&e.push(s);else e.push(n.toString())}}return e.join(" ")}e.exports?(o.default=o,e.exports=o):void 0===(n=function(){return o}.apply(t,[]))||(e.exports=n)}()},858088:(e,t,n)=>{"use strict";n.d(t,{default:()=>o});var r=n(702369);function o(e,t){e.classList?e.classList.add(t):(0,r.default)(e,t)||("string"==typeof e.className?e.className=e.className+" "+t:e.setAttribute("class",(e.className&&e.className.baseVal||"")+" "+t))}},702369:(e,t,n)=>{"use strict";function r(e,t){return e.classList?!!t&&e.classList.contains(t):-1!==(" "+(e.className.baseVal||e.className)+" ").indexOf(" "+t+" ")}n.d(t,{default:()=>r})},619506:(e,t,n)=>{"use strict";function r(e,t){return e.replace(new RegExp("(^|\\s)"+t+"(?:\\s|$)","g"),"$1").replace(/\s+/g," ").replace(/^\s*|\s*$/g,"")}function o(e,t){e.classList?e.classList.remove(t):"string"==typeof e.className?e.className=r(e.className,t):e.setAttribute("class",r(e.className&&e.className.baseVal||"",t))}n.d(t,{default:()=>o})},608994:(e,t,n)=>{"use strict";n.d(t,{nanoid:()=>r});let r=(e=21)=>crypto.getRandomValues(new Uint8Array(e)).reduce(((e,t)=>e+=(t&=63)<36?t.toString(36):t<62?(t-26).toString(36).toUpperCase():t>62?"-":"_"),"")},367075:function(e,t,n){!function(e,t){"use strict";function n(e){if(e&&e.__esModule)return e;var t=Object.create(null);return e&&Object.keys(e).forEach((function(n){if("default"!==n){var r=Object.getOwnPropertyDescriptor(e,n);Object.defineProperty(t,n,r.get?r:{enumerable:!0,get:function(){return e[n]}})}})),t.default=e,Object.freeze(t)}var r=n(t);function o(e,t){return o=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e},o(e,t)}function a(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,o(e,t)}var i=function(e,t){return void 0===e&&(e=[]),void 0===t&&(t=[]),e.length!==t.length||e.some((function(e,n){return!Object.is(e,t[n])}))},s={error:null},c=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).state=s,t.resetErrorBoundary=function(){for(var e,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];null==t.props.onReset||(e=t.props).onReset.apply(e,r),t.reset()},t}a(t,e),t.getDerivedStateFromError=function(e){return{error:e}};var n=t.prototype;return n.reset=function(){this.setState(s)},n.componentDidCatch=function(e,t){var n,r;null==(n=(r=this.props).onError)||n.call(r,e,t)},n.componentDidUpdate=function(e,t){var n,r,o=this.state.error,a=this.props.resetKeys;null!==o&&null!==t.error&&i(e.resetKeys,a)&&(null==(n=(r=this.props).onResetKeysChange)||n.call(r,e.resetKeys,a),this.reset())},n.render=function(){var e=this.state.error,t=this.props,n=t.fallbackRender,o=t.FallbackComponent,a=t.fallback;if(null!==e){var i={error:e,resetErrorBoundary:this.resetErrorBoundary};if(r.isValidElement(a))return a;if("function"==typeof n)return n(i);if(o)return r.createElement(o,i);throw new Error("react-error-boundary requires either a fallback, fallbackRender, or FallbackComponent prop")}return this.props.children},t}(r.Component);function u(e,t){var n=function(n){return r.createElement(c,t,r.createElement(e,n))},o=e.displayName||e.name||"Unknown";return n.displayName="withErrorBoundary("+o+")",n}function l(e){var t=r.useState(null),n=t[0],o=t[1];if(null!=e)throw e;if(null!=n)throw n;return o}e.ErrorBoundary=c,e.useErrorHandler=l,e.withErrorBoundary=u,Object.defineProperty(e,"__esModule",{value:!0})}(t,n(667294))},321039:(e,t,n)=>{"use strict";n.d(t,{default:()=>f});var r=n(502636),o=n(272319),a=n(631760),i=(n(45697),n(858088)),s=n(619506),c=n(667294),u=n(765788),l=function(e,t){return e&&t&&t.split(" ").forEach((function(t){return(0,s.default)(e,t)}))},d=function(e){function t(){for(var t,n=arguments.length,r=new Array(n),o=0;o<n;o++)r[o]=arguments[o];return(t=e.call.apply(e,[this].concat(r))||this).appliedClasses={appear:{},enter:{},exit:{}},t.onEnter=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1];t.removeClasses(o,"exit"),t.addClass(o,a?"appear":"enter","base"),t.props.onEnter&&t.props.onEnter(e,n)},t.onEntering=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1]?"appear":"enter";t.addClass(o,a,"active"),t.props.onEntering&&t.props.onEntering(e,n)},t.onEntered=function(e,n){var r=t.resolveArguments(e,n),o=r[0],a=r[1]?"appear":"enter";t.removeClasses(o,a),t.addClass(o,a,"done"),t.props.onEntered&&t.props.onEntered(e,n)},t.onExit=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"appear"),t.removeClasses(n,"enter"),t.addClass(n,"exit","base"),t.props.onExit&&t.props.onExit(e)},t.onExiting=function(e){var n=t.resolveArguments(e)[0];t.addClass(n,"exit","active"),t.props.onExiting&&t.props.onExiting(e)},t.onExited=function(e){var n=t.resolveArguments(e)[0];t.removeClasses(n,"exit"),t.addClass(n,"exit","done"),t.props.onExited&&t.props.onExited(e)},t.resolveArguments=function(e,n){return t.props.nodeRef?[t.props.nodeRef.current,e]:[e,n]},t.getClassNames=function(e){var n=t.props.classNames,r="string"==typeof n,o=r?""+(r&&n?n+"-":"")+e:n[e];return{baseClassName:o,activeClassName:r?o+"-active":n[e+"Active"],doneClassName:r?o+"-done":n[e+"Done"]}},t}(0,a.default)(t,e);var n=t.prototype;return n.addClass=function(e,t,n){var r=this.getClassNames(t)[n+"ClassName"],o=this.getClassNames("enter").doneClassName;"appear"===t&&"done"===n&&o&&(r+=" "+o),"active"===n&&e&&e.scrollTop,r&&(this.appliedClasses[t][n]=r,function(e,t){e&&t&&t.split(" ").forEach((function(t){return(0,i.default)(e,t)}))}(e,r))},n.removeClasses=function(e,t){var n=this.appliedClasses[t],r=n.base,o=n.active,a=n.done;this.appliedClasses[t]={},r&&l(e,r),o&&l(e,o),a&&l(e,a)},n.render=function(){var e=this.props,t=(e.classNames,(0,o.default)(e,["classNames"]));return c.createElement(u.default,(0,r.default)({},t,{onEnter:this.onEnter,onEntered:this.onEntered,onEntering:this.onEntering,onExit:this.onExit,onExiting:this.onExiting,onExited:this.onExited}))},t}(c.Component);d.defaultProps={classNames:""},d.propTypes={};const f=d},765788:(e,t,n)=>{"use strict";n.d(t,{default:()=>h});var r=n(272319),o=n(631760),a=(n(45697),n(667294)),i=n(973935),s=n(322667),c=n(629371),u="unmounted",l="exited",d="entering",f="entered",p="exiting",m=function(e){function t(t,n){var r;r=e.call(this,t,n)||this;var o,a=n&&!n.isMounting?t.enter:t.appear;return r.appearStatus=null,t.in?a?(o=l,r.appearStatus=d):o=f:o=t.unmountOnExit||t.mountOnEnter?u:l,r.state={status:o},r.nextCallback=null,r}(0,o.default)(t,e),t.getDerivedStateFromProps=function(e,t){return e.in&&t.status===u?{status:l}:null};var n=t.prototype;return n.componentDidMount=function(){this.updateStatus(!0,this.appearStatus)},n.componentDidUpdate=function(e){var t=null;if(e!==this.props){var n=this.state.status;this.props.in?n!==d&&n!==f&&(t=d):n!==d&&n!==f||(t=p)}this.updateStatus(!1,t)},n.componentWillUnmount=function(){this.cancelNextCallback()},n.getTimeouts=function(){var e,t,n,r=this.props.timeout;return e=t=n=r,null!=r&&"number"!=typeof r&&(e=r.exit,t=r.enter,n=void 0!==r.appear?r.appear:t),{exit:e,enter:t,appear:n}},n.updateStatus=function(e,t){void 0===e&&(e=!1),null!==t?(this.cancelNextCallback(),t===d?this.performEnter(e):this.performExit()):this.props.unmountOnExit&&this.state.status===l&&this.setState({status:u})},n.performEnter=function(e){var t=this,n=this.props.enter,r=this.context?this.context.isMounting:e,o=this.props.nodeRef?[r]:[i.findDOMNode(this),r],a=o[0],c=o[1],u=this.getTimeouts(),l=r?u.appear:u.enter;!e&&!n||s.default.disabled?this.safeSetState({status:f},(function(){t.props.onEntered(a)})):(this.props.onEnter(a,c),this.safeSetState({status:d},(function(){t.props.onEntering(a,c),t.onTransitionEnd(l,(function(){t.safeSetState({status:f},(function(){t.props.onEntered(a,c)}))}))})))},n.performExit=function(){var e=this,t=this.props.exit,n=this.getTimeouts(),r=this.props.nodeRef?void 0:i.findDOMNode(this);t&&!s.default.disabled?(this.props.onExit(r),this.safeSetState({status:p},(function(){e.props.onExiting(r),e.onTransitionEnd(n.exit,(function(){e.safeSetState({status:l},(function(){e.props.onExited(r)}))}))}))):this.safeSetState({status:l},(function(){e.props.onExited(r)}))},n.cancelNextCallback=function(){null!==this.nextCallback&&(this.nextCallback.cancel(),this.nextCallback=null)},n.safeSetState=function(e,t){t=this.setNextCallback(t),this.setState(e,t)},n.setNextCallback=function(e){var t=this,n=!0;return this.nextCallback=function(r){n&&(n=!1,t.nextCallback=null,e(r))},this.nextCallback.cancel=function(){n=!1},this.nextCallback},n.onTransitionEnd=function(e,t){this.setNextCallback(t);var n=this.props.nodeRef?this.props.nodeRef.current:i.findDOMNode(this),r=null==e&&!this.props.addEndListener;if(n&&!r){if(this.props.addEndListener){var o=this.props.nodeRef?[this.nextCallback]:[n,this.nextCallback],a=o[0],s=o[1];this.props.addEndListener(a,s)}null!=e&&setTimeout(this.nextCallback,e)}else setTimeout(this.nextCallback,0)},n.render=function(){var e=this.state.status;if(e===u)return null;var t=this.props,n=t.children,o=(t.in,t.mountOnEnter,t.unmountOnExit,t.appear,t.enter,t.exit,t.timeout,t.addEndListener,t.onEnter,t.onEntering,t.onEntered,t.onExit,t.onExiting,t.onExited,t.nodeRef,(0,r.default)(t,["children","in","mountOnEnter","unmountOnExit","appear","enter","exit","timeout","addEndListener","onEnter","onEntering","onEntered","onExit","onExiting","onExited","nodeRef"]));return a.createElement(c.default.Provider,{value:null},"function"==typeof n?n(e,o):a.cloneElement(a.Children.only(n),o))},t}(a.Component);function v(){}m.contextType=c.default,m.propTypes={},m.defaultProps={in:!1,mountOnEnter:!1,unmountOnExit:!1,appear:!1,enter:!0,exit:!0,onEnter:v,onEntering:v,onEntered:v,onExit:v,onExiting:v,onExited:v},m.UNMOUNTED=u,m.EXITED=l,m.ENTERING=d,m.ENTERED=f,m.EXITING=p;const h=m},629371:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r=n(667294).createContext(null)},322667:(e,t,n)=>{"use strict";n.d(t,{default:()=>r});const r={disabled:!1}},502636:(e,t,n)=>{"use strict";function r(){return r=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var r in n)Object.prototype.hasOwnProperty.call(n,r)&&(e[r]=n[r])}return e},r.apply(this,arguments)}n.d(t,{default:()=>r})},631760:(e,t,n)=>{"use strict";function r(e,t){e.prototype=Object.create(t.prototype),e.prototype.constructor=e,e.__proto__=t}n.d(t,{default:()=>r})},272319:(e,t,n)=>{"use strict";function r(e,t){if(null==e)return{};var n,r,o={},a=Object.keys(e);for(r=0;r<a.length;r++)n=a[r],t.indexOf(n)>=0||(o[n]=e[n]);return o}n.d(t,{default:()=>r})},263462:e=>{var t=function(e){"use strict";var t,n=Object.prototype,r=n.hasOwnProperty,o="function"==typeof Symbol?Symbol:{},a=o.iterator||"@@iterator",i=o.asyncIterator||"@@asyncIterator",s=o.toStringTag||"@@toStringTag";function c(e,t,n,r){var o=t&&t.prototype instanceof v?t:v,a=Object.create(o.prototype),i=new O(r||[]);return a._invoke=function(e,t,n){var r=l;return function(o,a){if(r===f)throw new Error("Generator is already running");if(r===p){if("throw"===o)throw a;return M()}for(n.method=o,n.arg=a;;){var i=n.delegate;if(i){var s=E(i,n);if(s){if(s===m)continue;return s}}if("next"===n.method)n.sent=n._sent=n.arg;else if("throw"===n.method){if(r===l)throw r=p,n.arg;n.dispatchException(n.arg)}else"return"===n.method&&n.abrupt("return",n.arg);r=f;var c=u(e,t,n);if("normal"===c.type){if(r=n.done?p:d,c.arg===m)continue;return{value:c.arg,done:n.done}}"throw"===c.type&&(r=p,n.method="throw",n.arg=c.arg)}}}(e,n,i),a}function u(e,t,n){try{return{type:"normal",arg:e.call(t,n)}}catch(e){return{type:"throw",arg:e}}}e.wrap=c;var l="suspendedStart",d="suspendedYield",f="executing",p="completed",m={};function v(){}function h(){}function g(){}var b={};b[a]=function(){return this};var y=Object.getPrototypeOf,w=y&&y(y(A([])));w&&w!==n&&r.call(w,a)&&(b=w);var _=g.prototype=v.prototype=Object.create(b);function k(e){["next","throw","return"].forEach((function(t){e[t]=function(e){return this._invoke(t,e)}}))}function C(e,t){function n(o,a,i,s){var c=u(e[o],e,a);if("throw"!==c.type){var l=c.arg,d=l.value;return d&&"object"==typeof d&&r.call(d,"__await")?t.resolve(d.__await).then((function(e){n("next",e,i,s)}),(function(e){n("throw",e,i,s)})):t.resolve(d).then((function(e){l.value=e,i(l)}),(function(e){return n("throw",e,i,s)}))}s(c.arg)}var o;this._invoke=function(e,r){function a(){return new t((function(t,o){n(e,r,t,o)}))}return o=o?o.then(a,a):a()}}function E(e,n){var r=e.iterator[n.method];if(r===t){if(n.delegate=null,"throw"===n.method){if(e.iterator.return&&(n.method="return",n.arg=t,E(e,n),"throw"===n.method))return m;n.method="throw",n.arg=new TypeError("The iterator does not provide a 'throw' method")}return m}var o=u(r,e.iterator,n.arg);if("throw"===o.type)return n.method="throw",n.arg=o.arg,n.delegate=null,m;var a=o.arg;return a?a.done?(n[e.resultName]=a.value,n.next=e.nextLoc,"return"!==n.method&&(n.method="next",n.arg=t),n.delegate=null,m):a:(n.method="throw",n.arg=new TypeError("iterator result is not an object"),n.delegate=null,m)}function I(e){var t={tryLoc:e[0]};1 in e&&(t.catchLoc=e[1]),2 in e&&(t.finallyLoc=e[2],t.afterLoc=e[3]),this.tryEntries.push(t)}function x(e){var t=e.completion||{};t.type="normal",delete t.arg,e.completion=t}function O(e){this.tryEntries=[{tryLoc:"root"}],e.forEach(I,this),this.reset(!0)}function A(e){if(e){var n=e[a];if(n)return n.call(e);if("function"==typeof e.next)return e;if(!isNaN(e.length)){var o=-1,i=function n(){for(;++o<e.length;)if(r.call(e,o))return n.value=e[o],n.done=!1,n;return n.value=t,n.done=!0,n};return i.next=i}}return{next:M}}function M(){return{value:t,done:!0}}return h.prototype=_.constructor=g,g.constructor=h,g[s]=h.displayName="GeneratorFunction",e.isGeneratorFunction=function(e){var t="function"==typeof e&&e.constructor;return!!t&&(t===h||"GeneratorFunction"===(t.displayName||t.name))},e.mark=function(e){return Object.setPrototypeOf?Object.setPrototypeOf(e,g):(e.__proto__=g,s in e||(e[s]="GeneratorFunction")),e.prototype=Object.create(_),e},e.awrap=function(e){return{__await:e}},k(C.prototype),C.prototype[i]=function(){return this},e.AsyncIterator=C,e.async=function(t,n,r,o,a){void 0===a&&(a=Promise);var i=new C(c(t,n,r,o),a);return e.isGeneratorFunction(n)?i:i.next().then((function(e){return e.done?e.value:i.next()}))},k(_),_[s]="Generator",_[a]=function(){return this},_.toString=function(){return"[object Generator]"},e.keys=function(e){var t=[];for(var n in e)t.push(n);return t.reverse(),function n(){for(;t.length;){var r=t.pop();if(r in e)return n.value=r,n.done=!1,n}return n.done=!0,n}},e.values=A,O.prototype={constructor:O,reset:function(e){if(this.prev=0,this.next=0,this.sent=this._sent=t,this.done=!1,this.delegate=null,this.method="next",this.arg=t,this.tryEntries.forEach(x),!e)for(var n in this)"t"===n.charAt(0)&&r.call(this,n)&&!isNaN(+n.slice(1))&&(this[n]=t)},stop:function(){this.done=!0;var e=this.tryEntries[0].completion;if("throw"===e.type)throw e.arg;return this.rval},dispatchException:function(e){if(this.done)throw e;var n=this;function o(r,o){return s.type="throw",s.arg=e,n.next=r,o&&(n.method="next",n.arg=t),!!o}for(var a=this.tryEntries.length-1;a>=0;--a){var i=this.tryEntries[a],s=i.completion;if("root"===i.tryLoc)return o("end");if(i.tryLoc<=this.prev){var c=r.call(i,"catchLoc"),u=r.call(i,"finallyLoc");if(c&&u){if(this.prev<i.catchLoc)return o(i.catchLoc,!0);if(this.prev<i.finallyLoc)return o(i.finallyLoc)}else if(c){if(this.prev<i.catchLoc)return o(i.catchLoc,!0)}else{if(!u)throw new Error("try statement without catch or finally");if(this.prev<i.finallyLoc)return o(i.finallyLoc)}}}},abrupt:function(e,t){for(var n=this.tryEntries.length-1;n>=0;--n){var o=this.tryEntries[n];if(o.tryLoc<=this.prev&&r.call(o,"finallyLoc")&&this.prev<o.finallyLoc){var a=o;break}}a&&("break"===e||"continue"===e)&&a.tryLoc<=t&&t<=a.finallyLoc&&(a=null);var i=a?a.completion:{};return i.type=e,i.arg=t,a?(this.method="next",this.next=a.finallyLoc,m):this.complete(i)},complete:function(e,t){if("throw"===e.type)throw e.arg;return"break"===e.type||"continue"===e.type?this.next=e.arg:"return"===e.type?(this.rval=this.arg=e.arg,this.method="return",this.next="end"):"normal"===e.type&&t&&(this.next=t),m},finish:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.finallyLoc===e)return this.complete(n.completion,n.afterLoc),x(n),m}},catch:function(e){for(var t=this.tryEntries.length-1;t>=0;--t){var n=this.tryEntries[t];if(n.tryLoc===e){var r=n.completion;if("throw"===r.type){var o=r.arg;x(n)}return o}}throw new Error("illegal catch attempt")},delegateYield:function(e,n,r){return this.delegate={iterator:A(e),resultName:n,nextLoc:r},"next"===this.method&&(this.arg=t),m}},e}(e.exports);try{regeneratorRuntime=t}catch(e){Function("r","regeneratorRuntime = r")(t)}}}]);try{stManager.done("dist/11c7a0efa74f6d488cf4ce0ffbe4d05a.e8757e4156d0d9bd789e.js")}catch(e){}